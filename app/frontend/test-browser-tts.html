<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser TTS Test - FREE Speech Synthesis</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a2e;
            color: #fff;
        }
        h1 { color: #4CAF50; }
        .test-section {
            background: #2d2d44;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 2px solid #4CAF50;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            margin: 5px;
        }
        button:hover { background: #45a049; }
        button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            background: #1a1a2e;
            border-radius: 4px;
            font-family: monospace;
        }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .info { color: #2196F3; }
    </style>
</head>
<body>
    <h1>üé§ FREE Browser TTS Test</h1>
    <p>Testing Web Speech API - NO backend required, NO fake audio</p>

    <div class="test-section">
        <h2>Test 1: Simple Speech</h2>
        <button onclick="testSimple()">Speak "Hello World"</button>
        <div id="status1" class="status"></div>
    </div>

    <div class="test-section">
        <h2>Test 2: Carnot Engine (Short)</h2>
        <button onclick="testCarnotShort()">Speak Carnot Narration (Short)</button>
        <div id="status2" class="status"></div>
    </div>

    <div class="test-section">
        <h2>Test 3: Carnot Engine (Long)</h2>
        <button onclick="testCarnotLong()">Speak Carnot Narration (Long)</button>
        <div id="status3" class="status"></div>
    </div>

    <div class="test-section">
        <h2>Controls</h2>
        <button onclick="stopSpeech()">‚èπÔ∏è Stop</button>
        <button onclick="pauseSpeech()">‚è∏Ô∏è Pause</button>
        <button onclick="resumeSpeech()">‚ñ∂Ô∏è Resume</button>
        <div id="statusControl" class="status"></div>
    </div>

    <div class="test-section">
        <h2>Available Voices</h2>
        <div id="voices" class="status"></div>
    </div>

    <script>
        let synthesis = window.speechSynthesis;
        let currentUtterance = null;

        // Load voices
        function loadVoices() {
            const voices = synthesis.getVoices();
            const voicesDiv = document.getElementById('voices');
            
            if (voices.length === 0) {
                voicesDiv.innerHTML = '<span class="info">Loading voices...</span>';
                return;
            }

            const enVoices = voices.filter(v => v.lang.startsWith('en'));
            voicesDiv.innerHTML = `
                <span class="success">‚úÖ ${voices.length} voices available (${enVoices.length} English)</span><br>
                ${enVoices.slice(0, 5).map(v => `- ${v.name} (${v.lang})`).join('<br>')}
            `;
        }

        synthesis.onvoiceschanged = loadVoices;
        loadVoices();

        function speak(text, statusId) {
            const statusDiv = document.getElementById(statusId);
            statusDiv.innerHTML = '<span class="info">üé§ Speaking...</span>';

            // Stop any current speech
            synthesis.cancel();

            currentUtterance = new SpeechSynthesisUtterance(text);
            currentUtterance.rate = 1.0;
            currentUtterance.pitch = 1.0;
            currentUtterance.volume = 1.0;
            currentUtterance.lang = 'en-US';

            // Get best voice
            const voices = synthesis.getVoices();
            const enVoice = voices.find(v => v.lang.startsWith('en-US')) || voices[0];
            if (enVoice) {
                currentUtterance.voice = enVoice;
            }

            currentUtterance.onstart = () => {
                statusDiv.innerHTML = '<span class="success">‚ñ∂Ô∏è Speech started</span>';
            };

            currentUtterance.onend = () => {
                statusDiv.innerHTML = '<span class="success">‚úÖ Speech completed</span>';
            };

            currentUtterance.onerror = (e) => {
                statusDiv.innerHTML = `<span class="error">‚ùå Error: ${e.error}</span>`;
            };

            synthesis.speak(currentUtterance);
        }

        function testSimple() {
            speak('Hello World! This is FREE browser text to speech!', 'status1');
        }

        function testCarnotShort() {
            speak('The Carnot engine is a theoretical thermodynamic cycle that achieves maximum efficiency.', 'status2');
        }

        function testCarnotLong() {
            const text = 'The Carnot cycle consists of four reversible processes. First, isothermal expansion where the gas absorbs heat from a hot reservoir. Second, adiabatic expansion where the gas does work without heat exchange. Third, isothermal compression where heat is released to a cold reservoir. Finally, adiabatic compression returns the system to its initial state. This cycle represents the maximum possible efficiency any heat engine can achieve.';
            speak(text, 'status3');
        }

        function stopSpeech() {
            synthesis.cancel();
            document.getElementById('statusControl').innerHTML = '<span class="info">‚èπÔ∏è Stopped</span>';
        }

        function pauseSpeech() {
            synthesis.pause();
            document.getElementById('statusControl').innerHTML = '<span class="info">‚è∏Ô∏è Paused</span>';
        }

        function resumeSpeech() {
            synthesis.resume();
            document.getElementById('statusControl').innerHTML = '<span class="info">‚ñ∂Ô∏è Resumed</span>';
        }
    </script>
</body>
</html>
