(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(c){if(c.ep)return;c.ep=!0;const h=s(c);fetch(c.href,h)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(o){return o===null||typeof o!="object"?null:(o=z$1&&o[z$1]||o["@@iterator"],typeof o=="function"?o:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(o,e,s){this.props=o,this.context=e,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(o,e){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,e,"setState")};E$1.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(o,e,s){this.props=o,this.context=e,this.refs=D$1,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(o,e,s){var a,c={},h=null,d=null;if(e!=null)for(a in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(h=""+e.key),e)J.call(e,a)&&!L$1.hasOwnProperty(a)&&(c[a]=e[a]);var g=arguments.length-2;if(g===1)c.children=s;else if(1<g){for(var _=Array(g),b=0;b<g;b++)_[b]=arguments[b+2];c.children=_}if(o&&o.defaultProps)for(a in g=o.defaultProps,g)c[a]===void 0&&(c[a]=g[a]);return{$$typeof:l$1,type:o,key:h,ref:d,props:c,_owner:K$1.current}}function N$1(o,e){return{$$typeof:l$1,type:o.type,key:e,ref:o.ref,props:o.props,_owner:o._owner}}function O$1(o){return typeof o=="object"&&o!==null&&o.$$typeof===l$1}function escape(o){var e={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(s){return e[s]})}var P$1=/\/+/g;function Q$1(o,e){return typeof o=="object"&&o!==null&&o.key!=null?escape(""+o.key):e.toString(36)}function R$1(o,e,s,a,c){var h=typeof o;(h==="undefined"||h==="boolean")&&(o=null);var d=!1;if(o===null)d=!0;else switch(h){case"string":case"number":d=!0;break;case"object":switch(o.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=o,c=c(d),o=a===""?"."+Q$1(d,0):a,I$1(c)?(s="",o!=null&&(s=o.replace(P$1,"$&/")+"/"),R$1(c,e,s,"",function(b){return b})):c!=null&&(O$1(c)&&(c=N$1(c,s+(!c.key||d&&d.key===c.key?"":(""+c.key).replace(P$1,"$&/")+"/")+o)),e.push(c)),1;if(d=0,a=a===""?".":a+":",I$1(o))for(var g=0;g<o.length;g++){h=o[g];var _=a+Q$1(h,g);d+=R$1(h,e,s,_,c)}else if(_=A$1(o),typeof _=="function")for(o=_.call(o),g=0;!(h=o.next()).done;)h=h.value,_=a+Q$1(h,g++),d+=R$1(h,e,s,_,c);else if(h==="object")throw e=String(o),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(o,e,s){if(o==null)return o;var a=[],c=0;return R$1(o,a,"","",function(h){return e.call(s,h,c++)}),a}function T$1(o){if(o._status===-1){var e=o._result;e=e(),e.then(function(s){(o._status===0||o._status===-1)&&(o._status=1,o._result=s)},function(s){(o._status===0||o._status===-1)&&(o._status=2,o._result=s)}),o._status===-1&&(o._status=0,o._result=e)}if(o._status===1)return o._result.default;throw o._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(o,e,s){S$1(o,function(){e.apply(this,arguments)},s)},count:function(o){var e=0;return S$1(o,function(){e++}),e},toArray:function(o){return S$1(o,function(e){return e})||[]},only:function(o){if(!O$1(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(o,e,s){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var a=C$1({},o.props),c=o.key,h=o.ref,d=o._owner;if(e!=null){if(e.ref!==void 0&&(h=e.ref,d=K$1.current),e.key!==void 0&&(c=""+e.key),o.type&&o.type.defaultProps)var g=o.type.defaultProps;for(_ in e)J.call(e,_)&&!L$1.hasOwnProperty(_)&&(a[_]=e[_]===void 0&&g!==void 0?g[_]:e[_])}var _=arguments.length-2;if(_===1)a.children=s;else if(1<_){g=Array(_);for(var b=0;b<_;b++)g[b]=arguments[b+2];a.children=g}return{$$typeof:l$1,type:o.type,key:c,ref:h,props:a,_owner:d}};react_production_min.createContext=function(o){return o={$$typeof:u,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:t,_context:o},o.Consumer=o};react_production_min.createElement=M$1;react_production_min.createFactory=function(o){var e=M$1.bind(null,o);return e.type=o,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:v$1,render:o}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(o){return{$$typeof:y,_payload:{_status:-1,_result:o},_init:T$1}};react_production_min.memo=function(o,e){return{$$typeof:x,type:o,compare:e===void 0?null:e}};react_production_min.startTransition=function(o){var e=V$1.transition;V$1.transition={};try{o()}finally{V$1.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(o,e){return U$1.current.useCallback(o,e)};react_production_min.useContext=function(o){return U$1.current.useContext(o)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(o){return U$1.current.useDeferredValue(o)};react_production_min.useEffect=function(o,e){return U$1.current.useEffect(o,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(o,e,s){return U$1.current.useImperativeHandle(o,e,s)};react_production_min.useInsertionEffect=function(o,e){return U$1.current.useInsertionEffect(o,e)};react_production_min.useLayoutEffect=function(o,e){return U$1.current.useLayoutEffect(o,e)};react_production_min.useMemo=function(o,e){return U$1.current.useMemo(o,e)};react_production_min.useReducer=function(o,e,s){return U$1.current.useReducer(o,e,s)};react_production_min.useRef=function(o){return U$1.current.useRef(o)};react_production_min.useState=function(o){return U$1.current.useState(o)};react_production_min.useSyncExternalStore=function(o,e,s){return U$1.current.useSyncExternalStore(o,e,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(o,e,s){var a,c={},h=null,d=null;s!==void 0&&(h=""+s),e.key!==void 0&&(h=""+e.key),e.ref!==void 0&&(d=e.ref);for(a in e)m$1.call(e,a)&&!p$1.hasOwnProperty(a)&&(c[a]=e[a]);if(o&&o.defaultProps)for(a in e=o.defaultProps,e)c[a]===void 0&&(c[a]=e[a]);return{$$typeof:k,type:o,key:h,ref:d,props:c,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function e(mt,Ct){var vt=mt.length;mt.push(Ct);e:for(;0<vt;){var wt=vt-1>>>1,xt=mt[wt];if(0<c(xt,Ct))mt[wt]=Ct,mt[vt]=xt,vt=wt;else break e}}function s(mt){return mt.length===0?null:mt[0]}function a(mt){if(mt.length===0)return null;var Ct=mt[0],vt=mt.pop();if(vt!==Ct){mt[0]=vt;e:for(var wt=0,xt=mt.length,$t=xt>>>1;wt<$t;){var Ot=2*(wt+1)-1,Mt=mt[Ot],Ft=Ot+1,ft=mt[Ft];if(0>c(Mt,vt))Ft<xt&&0>c(ft,Mt)?(mt[wt]=ft,mt[Ft]=vt,wt=Ft):(mt[wt]=Mt,mt[Ot]=vt,wt=Ot);else if(Ft<xt&&0>c(ft,vt))mt[wt]=ft,mt[Ft]=vt,wt=Ft;else break e}}return Ct}function c(mt,Ct){var vt=mt.sortIndex-Ct.sortIndex;return vt!==0?vt:mt.id-Ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;o.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();o.unstable_now=function(){return d.now()-g}}var _=[],b=[],j=1,rt=null,tt=3,nt=!1,_e=!1,st=!1,at=typeof setTimeout=="function"?setTimeout:null,ot=typeof clearTimeout=="function"?clearTimeout:null,it=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(mt){for(var Ct=s(b);Ct!==null;){if(Ct.callback===null)a(b);else if(Ct.startTime<=mt)a(b),Ct.sortIndex=Ct.expirationTime,e(_,Ct);else break;Ct=s(b)}}function et(mt){if(st=!1,$(mt),!_e)if(s(_)!==null)_e=!0,Pt(lt);else{var Ct=s(b);Ct!==null&&bt(et,Ct.startTime-mt)}}function lt(mt,Ct){_e=!1,st&&(st=!1,ot(ct),ct=-1),nt=!0;var vt=tt;try{for($(Ct),rt=s(_);rt!==null&&(!(rt.expirationTime>Ct)||mt&&!gt());){var wt=rt.callback;if(typeof wt=="function"){rt.callback=null,tt=rt.priorityLevel;var xt=wt(rt.expirationTime<=Ct);Ct=o.unstable_now(),typeof xt=="function"?rt.callback=xt:rt===s(_)&&a(_),$(Ct)}else a(_);rt=s(_)}if(rt!==null)var $t=!0;else{var Ot=s(b);Ot!==null&&bt(et,Ot.startTime-Ct),$t=!1}return $t}finally{rt=null,tt=vt,nt=!1}}var ut=!1,dt=null,ct=-1,pt=5,ht=-1;function gt(){return!(o.unstable_now()-ht<pt)}function yt(){if(dt!==null){var mt=o.unstable_now();ht=mt;var Ct=!0;try{Ct=dt(!0,mt)}finally{Ct?St():(ut=!1,dt=null)}}else ut=!1}var St;if(typeof it=="function")St=function(){it(yt)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,kt=Et.port2;Et.port1.onmessage=yt,St=function(){kt.postMessage(null)}}else St=function(){at(yt,0)};function Pt(mt){dt=mt,ut||(ut=!0,St())}function bt(mt,Ct){ct=at(function(){mt(o.unstable_now())},Ct)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(mt){mt.callback=null},o.unstable_continueExecution=function(){_e||nt||(_e=!0,Pt(lt))},o.unstable_forceFrameRate=function(mt){0>mt||125<mt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pt=0<mt?Math.floor(1e3/mt):5},o.unstable_getCurrentPriorityLevel=function(){return tt},o.unstable_getFirstCallbackNode=function(){return s(_)},o.unstable_next=function(mt){switch(tt){case 1:case 2:case 3:var Ct=3;break;default:Ct=tt}var vt=tt;tt=Ct;try{return mt()}finally{tt=vt}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(mt,Ct){switch(mt){case 1:case 2:case 3:case 4:case 5:break;default:mt=3}var vt=tt;tt=mt;try{return Ct()}finally{tt=vt}},o.unstable_scheduleCallback=function(mt,Ct,vt){var wt=o.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?wt+vt:wt):vt=wt,mt){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=vt+xt,mt={id:j++,callback:Ct,priorityLevel:mt,startTime:vt,expirationTime:xt,sortIndex:-1},vt>wt?(mt.sortIndex=vt,e(b,mt),s(_)===null&&mt===s(b)&&(st?(ot(ct),ct=-1):st=!0,bt(et,vt-wt))):(mt.sortIndex=xt,e(_,mt),_e||nt||(_e=!0,Pt(lt))),mt},o.unstable_shouldYield=gt,o.unstable_wrapCallback=function(mt){var Ct=tt;return function(){var vt=tt;tt=Ct;try{return mt.apply(this,arguments)}finally{tt=vt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(o){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+o,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+o+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(o,e){ha(o,e),ha(o+"Capture",e)}function ha(o,e){for(ea[o]=e,o=0;o<e.length;o++)da.add(e[o])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(o){return ja.call(ma,o)?!0:ja.call(la,o)?!1:ka.test(o)?ma[o]=!0:(la[o]=!0,!1)}function pa(o,e,s,a){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function qa(o,e,s,a){if(e===null||typeof e>"u"||pa(o,e,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(o,e,s,a,c,h,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=o,this.type=e,this.sanitizeURL=h,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){z[o]=new v(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var e=o[0];z[e]=new v(e,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){z[o]=new v(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){z[o]=new v(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){z[o]=new v(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){z[o]=new v(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){z[o]=new v(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){z[o]=new v(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){z[o]=new v(o,5,!1,o.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){z[o]=new v(o,1,!1,o.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){z[o]=new v(o,1,!1,o.toLowerCase(),null,!0,!0)});function ta(o,e,s,a){var c=z.hasOwnProperty(e)?z[e]:null;(c!==null?c.type!==0:a||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,s,c,a)&&(s=null),a||c===null?oa(e)&&(s===null?o.removeAttribute(e):o.setAttribute(e,""+s)):c.mustUseProperty?o[c.propertyName]=s===null?c.type===3?!1:"":s:(e=c.attributeName,a=c.attributeNamespace,s===null?o.removeAttribute(e):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,a?o.setAttributeNS(a,e,s):o.setAttribute(e,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(o){return o===null||typeof o!="object"?null:(o=Ja&&o[Ja]||o["@@iterator"],typeof o=="function"?o:null)}var A=Object.assign,La;function Ma(o){if(La===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+o}var Na=!1;function Oa(o,e){if(!o||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(b){var a=b}Reflect.construct(o,[],e)}else{try{e.call()}catch(b){a=b}o.call(e.prototype)}else{try{throw Error()}catch(b){a=b}o()}}catch(b){if(b&&a&&typeof b.stack=="string"){for(var c=b.stack.split(`
`),h=a.stack.split(`
`),d=c.length-1,g=h.length-1;1<=d&&0<=g&&c[d]!==h[g];)g--;for(;1<=d&&0<=g;d--,g--)if(c[d]!==h[g]){if(d!==1||g!==1)do if(d--,g--,0>g||c[d]!==h[g]){var _=`
`+c[d].replace(" at new "," at ");return o.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",o.displayName)),_}while(1<=d&&0<=g);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(o=o?o.displayName||o.name:"")?Ma(o):""}function Pa(o){switch(o.tag){case 5:return Ma(o.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return o=Oa(o.type,!1),o;case 11:return o=Oa(o.type.render,!1),o;case 1:return o=Oa(o.type,!0),o;default:return""}}function Qa(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ca:return(o.displayName||"Context")+".Consumer";case Ba:return(o._context.displayName||"Context")+".Provider";case Da:var e=o.render;return o=o.displayName,o||(o=e.displayName||e.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ga:return e=o.displayName||null,e!==null?e:Qa(o.type)||"Memo";case Ha:e=o._payload,o=o._init;try{return Qa(o(e))}catch{}}return null}function Ra(o){var e=o.type;switch(o.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=e.render,o=o.displayName||o.name||"",e.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ta(o){var e=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(o){var e=Ta(o)?"checked":"value",s=Object.getOwnPropertyDescriptor(o.constructor.prototype,e),a=""+o[e];if(!o.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,h=s.set;return Object.defineProperty(o,e,{configurable:!0,get:function(){return c.call(this)},set:function(d){a=""+d,h.call(this,d)}}),Object.defineProperty(o,e,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){o._valueTracker=null,delete o[e]}}}}function Va(o){o._valueTracker||(o._valueTracker=Ua(o))}function Wa(o){if(!o)return!1;var e=o._valueTracker;if(!e)return!0;var s=e.getValue(),a="";return o&&(a=Ta(o)?o.checked?"true":"false":o.value),o=a,o!==s?(e.setValue(o),!0):!1}function Xa(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya(o,e){var s=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??o._wrapperState.initialChecked})}function Za(o,e){var s=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;s=Sa(e.value!=null?e.value:s),o._wrapperState={initialChecked:a,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(o,e){e=e.checked,e!=null&&ta(o,"checked",e,!1)}function bb(o,e){ab(o,e);var s=Sa(e.value),a=e.type;if(s!=null)a==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+s):o.value!==""+s&&(o.value=""+s);else if(a==="submit"||a==="reset"){o.removeAttribute("value");return}e.hasOwnProperty("value")?cb(o,e.type,s):e.hasOwnProperty("defaultValue")&&cb(o,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(o.defaultChecked=!!e.defaultChecked)}function db(o,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+o._wrapperState.initialValue,s||e===o.value||(o.value=e),o.defaultValue=e}s=o.name,s!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,s!==""&&(o.name=s)}function cb(o,e,s){(e!=="number"||Xa(o.ownerDocument)!==o)&&(s==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+s&&(o.defaultValue=""+s))}var eb=Array.isArray;function fb(o,e,s,a){if(o=o.options,e){e={};for(var c=0;c<s.length;c++)e["$"+s[c]]=!0;for(s=0;s<o.length;s++)c=e.hasOwnProperty("$"+o[s].value),o[s].selected!==c&&(o[s].selected=c),c&&a&&(o[s].defaultSelected=!0)}else{for(s=""+Sa(s),e=null,c=0;c<o.length;c++){if(o[c].value===s){o[c].selected=!0,a&&(o[c].defaultSelected=!0);return}e!==null||o[c].disabled||(e=o[c])}e!==null&&(e.selected=!0)}}function gb(o,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb(o,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}e=s}e==null&&(e=""),s=e}o._wrapperState={initialValue:Sa(s)}}function ib(o,e){var s=Sa(e.value),a=Sa(e.defaultValue);s!=null&&(s=""+s,s!==o.value&&(o.value=s),e.defaultValue==null&&o.defaultValue!==s&&(o.defaultValue=s)),a!=null&&(o.defaultValue=""+a)}function jb(o){var e=o.textContent;e===o._wrapperState.initialValue&&e!==""&&e!==null&&(o.value=e)}function kb(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(o,e){return o==null||o==="http://www.w3.org/1999/xhtml"?kb(e):o==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mb,nb=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,a,c){MSApp.execUnsafeLocalFunction(function(){return o(e,s,a,c)})}:o}(function(o,e){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;e.firstChild;)o.appendChild(e.firstChild)}});function ob(o,e){if(e){var s=o.firstChild;if(s&&s===o.lastChild&&s.nodeType===3){s.nodeValue=e;return}}o.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(o){qb.forEach(function(e){e=e+o.charAt(0).toUpperCase()+o.substring(1),pb[e]=pb[o]})});function rb(o,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||pb.hasOwnProperty(o)&&pb[o]?(""+e).trim():e+"px"}function sb(o,e){o=o.style;for(var s in e)if(e.hasOwnProperty(s)){var a=s.indexOf("--")===0,c=rb(s,e[s],a);s==="float"&&(s="cssFloat"),a?o.setProperty(s,c):o[s]=c}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(o,e){if(e){if(tb[o]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,o));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(o,e){if(o.indexOf("-")===-1)return typeof e.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb=null,zb=null,Ab=null;function Bb(o){if(o=Cb(o)){if(typeof yb!="function")throw Error(p(280));var e=o.stateNode;e&&(e=Db(e),yb(o.stateNode,o.type,e))}}function Eb(o){zb?Ab?Ab.push(o):Ab=[o]:zb=o}function Fb(){if(zb){var o=zb,e=Ab;if(Ab=zb=null,Bb(o),e)for(o=0;o<e.length;o++)Bb(e[o])}}function Gb(o,e){return o(e)}function Hb(){}var Ib=!1;function Jb(o,e,s){if(Ib)return o(e,s);Ib=!0;try{return Gb(o,e,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(o,e){var s=o.stateNode;if(s===null)return null;var a=Db(s);if(a===null)return null;s=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(o=o.type,a=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!a;break e;default:o=!1}if(o)return null;if(s&&typeof s!="function")throw Error(p(231,e,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(o,e,s,a,c,h,d,g,_){var b=Array.prototype.slice.call(arguments,3);try{e.apply(s,b)}catch(j){this.onError(j)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(o){Ob=!0,Pb=o}};function Tb(o,e,s,a,c,h,d,g,_){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(o,e,s,a,c,h,d,g,_){if(Tb.apply(this,arguments),Ob){if(Ob){var b=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=b)}}function Vb(o){var e=o,s=o;if(o.alternate)for(;e.return;)e=e.return;else{o=e;do e=o,e.flags&4098&&(s=e.return),o=e.return;while(o)}return e.tag===3?s:null}function Wb(o){if(o.tag===13){var e=o.memoizedState;if(e===null&&(o=o.alternate,o!==null&&(e=o.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(o){if(Vb(o)!==o)throw Error(p(188))}function Yb(o){var e=o.alternate;if(!e){if(e=Vb(o),e===null)throw Error(p(188));return e!==o?null:o}for(var s=o,a=e;;){var c=s.return;if(c===null)break;var h=c.alternate;if(h===null){if(a=c.return,a!==null){s=a;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===s)return Xb(c),o;if(h===a)return Xb(c),e;h=h.sibling}throw Error(p(188))}if(s.return!==a.return)s=c,a=h;else{for(var d=!1,g=c.child;g;){if(g===s){d=!0,s=c,a=h;break}if(g===a){d=!0,a=c,s=h;break}g=g.sibling}if(!d){for(g=h.child;g;){if(g===s){d=!0,s=h,a=c;break}if(g===a){d=!0,a=h,s=c;break}g=g.sibling}if(!d)throw Error(p(189))}}if(s.alternate!==a)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?o:e}function Zb(o){return o=Yb(o),o!==null?$b(o):null}function $b(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var e=$b(o);if(e!==null)return e;o=o.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(o){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,o,void 0,(o.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(o){return o>>>=0,o===0?32:31-(pc(o)/qc|0)|0}var rc=64,sc=4194304;function tc(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uc(o,e){var s=o.pendingLanes;if(s===0)return 0;var a=0,c=o.suspendedLanes,h=o.pingedLanes,d=s&268435455;if(d!==0){var g=d&~c;g!==0?a=tc(g):(h&=d,h!==0&&(a=tc(h)))}else d=s&~c,d!==0?a=tc(d):h!==0&&(a=tc(h));if(a===0)return 0;if(e!==0&&e!==a&&!(e&c)&&(c=a&-a,h=e&-e,c>=h||c===16&&(h&4194240)!==0))return e;if(a&4&&(a|=s&16),e=o.entangledLanes,e!==0)for(o=o.entanglements,e&=a;0<e;)s=31-oc(e),c=1<<s,a|=o[s],e&=~c;return a}function vc(o,e){switch(o){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(o,e){for(var s=o.suspendedLanes,a=o.pingedLanes,c=o.expirationTimes,h=o.pendingLanes;0<h;){var d=31-oc(h),g=1<<d,_=c[d];_===-1?(!(g&s)||g&a)&&(c[d]=vc(g,e)):_<=e&&(o.expiredLanes|=g),h&=~g}}function xc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function yc(){var o=rc;return rc<<=1,!(rc&4194240)&&(rc=64),o}function zc(o){for(var e=[],s=0;31>s;s++)e.push(o);return e}function Ac(o,e,s){o.pendingLanes|=e,e!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,e=31-oc(e),o[e]=s}function Bc(o,e){var s=o.pendingLanes&~e;o.pendingLanes=e,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=e,o.mutableReadLanes&=e,o.entangledLanes&=e,e=o.entanglements;var a=o.eventTimes;for(o=o.expirationTimes;0<s;){var c=31-oc(s),h=1<<c;e[c]=0,a[c]=-1,o[c]=-1,s&=~h}}function Cc(o,e){var s=o.entangledLanes|=e;for(o=o.entanglements;s;){var a=31-oc(s),c=1<<a;c&e|o[a]&e&&(o[a]|=e),s&=~c}}var C=0;function Dc(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(o,e){switch(o){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(o,e,s,a,c,h){return o===null||o.nativeEvent!==h?(o={blockedOn:e,domEventName:s,eventSystemFlags:a,nativeEvent:h,targetContainers:[c]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),o):(o.eventSystemFlags|=a,e=o.targetContainers,c!==null&&e.indexOf(c)===-1&&e.push(c),o)}function Uc(o,e,s,a,c){switch(e){case"focusin":return Lc=Tc(Lc,o,e,s,a,c),!0;case"dragenter":return Mc=Tc(Mc,o,e,s,a,c),!0;case"mouseover":return Nc=Tc(Nc,o,e,s,a,c),!0;case"pointerover":var h=c.pointerId;return Oc.set(h,Tc(Oc.get(h)||null,o,e,s,a,c)),!0;case"gotpointercapture":return h=c.pointerId,Pc.set(h,Tc(Pc.get(h)||null,o,e,s,a,c)),!0}return!1}function Vc(o){var e=Wc(o.target);if(e!==null){var s=Vb(e);if(s!==null){if(e=s.tag,e===13){if(e=Wb(s),e!==null){o.blockedOn=e,Ic(o.priority,function(){Gc(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){o.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xc(o){if(o.blockedOn!==null)return!1;for(var e=o.targetContainers;0<e.length;){var s=Yc(o.domEventName,o.eventSystemFlags,e[0],o.nativeEvent);if(s===null){s=o.nativeEvent;var a=new s.constructor(s.type,s);wb=a,s.target.dispatchEvent(a),wb=null}else return e=Cb(s),e!==null&&Fc(e),o.blockedOn=s,!1;e.shift()}return!0}function Zc(o,e,s){Xc(o)&&s.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(o,e){o.blockedOn===e&&(o.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(o){function e(c){return ad(c,o)}if(0<Kc.length){ad(Kc[0],o);for(var s=1;s<Kc.length;s++){var a=Kc[s];a.blockedOn===o&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,o),Mc!==null&&ad(Mc,o),Nc!==null&&ad(Nc,o),Oc.forEach(e),Pc.forEach(e),s=0;s<Qc.length;s++)a=Qc[s],a.blockedOn===o&&(a.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(o,e,s,a){var c=C,h=cd.transition;cd.transition=null;try{C=1,fd(o,e,s,a)}finally{C=c,cd.transition=h}}function gd(o,e,s,a){var c=C,h=cd.transition;cd.transition=null;try{C=4,fd(o,e,s,a)}finally{C=c,cd.transition=h}}function fd(o,e,s,a){if(dd){var c=Yc(o,e,s,a);if(c===null)hd(o,e,a,id,s),Sc(o,a);else if(Uc(c,o,e,s,a))a.stopPropagation();else if(Sc(o,a),e&4&&-1<Rc.indexOf(o)){for(;c!==null;){var h=Cb(c);if(h!==null&&Ec(h),h=Yc(o,e,s,a),h===null&&hd(o,e,a,id,s),h===c)break;c=h}c!==null&&a.stopPropagation()}else hd(o,e,a,null,s)}}var id=null;function Yc(o,e,s,a){if(id=null,o=xb(a),o=Wc(o),o!==null)if(e=Vb(o),e===null)o=null;else if(s=e.tag,s===13){if(o=Wb(e),o!==null)return o;o=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;o=null}else e!==o&&(o=null);return id=o,null}function jd(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var o,e=ld,s=e.length,a,c="value"in kd?kd.value:kd.textContent,h=c.length;for(o=0;o<s&&e[o]===c[o];o++);var d=s-o;for(a=1;a<=d&&e[s-a]===c[h-a];a++);return md=c.slice(o,1<a?1-a:void 0)}function od(o){var e=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&e===13&&(o=13)):o=e,o===10&&(o=13),32<=o||o===13?o:0}function pd(){return!0}function qd(){return!1}function rd(o){function e(s,a,c,h,d){this._reactName=s,this._targetInst=c,this.type=a,this.nativeEvent=h,this.target=d,this.currentTarget=null;for(var g in o)o.hasOwnProperty(g)&&(s=o[g],this[g]=s?s(h):h[g]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd&&(yd&&o.type==="mousemove"?(wd=o.screenX-yd.screenX,xd=o.screenY-yd.screenY):xd=wd=0,yd=o),wd)},movementY:function(o){return"movementY"in o?o.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(o){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(o):(o=Od[o])?!!e[o]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(o){if(o.key){var e=Md[o.key]||o.key;if(e!=="Unidentified")return e}return o.type==="keypress"?(o=od(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(o){return o.type==="keypress"?od(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(o,e){switch(o){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie=!1;function je(o,e){switch(o){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return o=e.data,o===ee&&fe?null:o;default:return null}}function ke(o,e){if(ie)return o==="compositionend"||!ae&&ge(o,e)?(o=nd(),md=ld=kd=null,ie=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e==="input"?!!le[o.type]:e==="textarea"}function ne(o,e,s,a){Eb(a),e=oe(e,"onChange"),0<e.length&&(s=new td("onChange","change",null,s,a),o.push({event:s,listeners:e}))}var pe=null,qe=null;function re$1(o){se(o,0)}function te(o){var e=ue(o);if(Wa(e))return o}function ve(o,e){if(o==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(o){if(o.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,o,xb(o)),Jb(re$1,e)}}function Ce(o,e,s){o==="focusin"?(Ae(),pe=e,qe=s,pe.attachEvent("onpropertychange",Be)):o==="focusout"&&Ae()}function De(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te(qe)}function Ee(o,e){if(o==="click")return te(e)}function Fe(o,e){if(o==="input"||o==="change")return te(e)}function Ge(o,e){return o===e&&(o!==0||1/o===1/e)||o!==o&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(o,e){if(He(o,e))return!0;if(typeof o!="object"||o===null||typeof e!="object"||e===null)return!1;var s=Object.keys(o),a=Object.keys(e);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var c=s[a];if(!ja.call(e,c)||!He(o[c],e[c]))return!1}return!0}function Je(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ke(o,e){var s=Je(o);o=0;for(var a;s;){if(s.nodeType===3){if(a=o+s.textContent.length,o<=e&&a>=e)return{node:s,offset:e-o};o=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(o,e){return o&&e?o===e?!0:o&&o.nodeType===3?!1:e&&e.nodeType===3?Le(o,e.parentNode):"contains"in o?o.contains(e):o.compareDocumentPosition?!!(o.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var o=window,e=Xa();e instanceof o.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)o=e.contentWindow;else break;e=Xa(o.document)}return e}function Ne(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e&&(e==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||e==="textarea"||o.contentEditable==="true")}function Oe(o){var e=Me(),s=o.focusedElem,a=o.selectionRange;if(e!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(a!==null&&Ne(s)){if(e=a.start,o=a.end,o===void 0&&(o=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(o,s.value.length);else if(o=(e=s.ownerDocument||document)&&e.defaultView||window,o.getSelection){o=o.getSelection();var c=s.textContent.length,h=Math.min(a.start,c);a=a.end===void 0?h:Math.min(a.end,c),!o.extend&&h>a&&(c=a,a=h,h=c),c=Ke(s,h);var d=Ke(s,a);c&&d&&(o.rangeCount!==1||o.anchorNode!==c.node||o.anchorOffset!==c.offset||o.focusNode!==d.node||o.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(c.node,c.offset),o.removeAllRanges(),h>a?(o.addRange(e),o.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),o.addRange(e)))}}for(e=[],o=s;o=o.parentNode;)o.nodeType===1&&e.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)o=e[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(o,e,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(e=new td("onSelect","select",null,e,s),o.push({event:e,listeners:a}),e.target=Qe)))}function Ve(o,e){var s={};return s[o.toLowerCase()]=e.toLowerCase(),s["Webkit"+o]="webkit"+e,s["Moz"+o]="moz"+e,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(o){if(Xe[o])return Xe[o];if(!We[o])return o;var e=We[o],s;for(s in e)if(e.hasOwnProperty(s)&&s in Ye)return Xe[o]=e[s];return o}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(o,e){df.set(o,e),fa(e,[o])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(o,e,s){var a=o.type||"unknown-event";o.currentTarget=s,Ub(a,e,void 0,o),o.currentTarget=null}function se(o,e){e=(e&4)!==0;for(var s=0;s<o.length;s++){var a=o[s],c=a.event;a=a.listeners;e:{var h=void 0;if(e)for(var d=a.length-1;0<=d;d--){var g=a[d],_=g.instance,b=g.currentTarget;if(g=g.listener,_!==h&&c.isPropagationStopped())break e;nf(c,g,b),h=_}else for(d=0;d<a.length;d++){if(g=a[d],_=g.instance,b=g.currentTarget,g=g.listener,_!==h&&c.isPropagationStopped())break e;nf(c,g,b),h=_}}}if(Qb)throw o=Rb,Qb=!1,Rb=null,o}function D(o,e){var s=e[of];s===void 0&&(s=e[of]=new Set);var a=o+"__bubble";s.has(a)||(pf(e,o,2,!1),s.add(a))}function qf(o,e,s){var a=0;e&&(a|=4),pf(s,o,a,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(o){if(!o[rf]){o[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,o),qf(s,!0,o))});var e=o.nodeType===9?o:o.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(o,e,s,a){switch(jd(e)){case 1:var c=ed;break;case 4:c=gd;break;default:c=fd}s=c.bind(null,e,s,o),c=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(c=!0),a?c!==void 0?o.addEventListener(e,s,{capture:!0,passive:c}):o.addEventListener(e,s,!0):c!==void 0?o.addEventListener(e,s,{passive:c}):o.addEventListener(e,s,!1)}function hd(o,e,s,a,c){var h=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var g=a.stateNode.containerInfo;if(g===c||g.nodeType===8&&g.parentNode===c)break;if(d===4)for(d=a.return;d!==null;){var _=d.tag;if((_===3||_===4)&&(_=d.stateNode.containerInfo,_===c||_.nodeType===8&&_.parentNode===c))return;d=d.return}for(;g!==null;){if(d=Wc(g),d===null)return;if(_=d.tag,_===5||_===6){a=h=d;continue e}g=g.parentNode}}a=a.return}Jb(function(){var b=h,j=xb(s),rt=[];e:{var tt=df.get(o);if(tt!==void 0){var nt=td,_e=o;switch(o){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":nt=Rd;break;case"focusin":_e="focus",nt=Fd;break;case"focusout":_e="blur",nt=Fd;break;case"beforeblur":case"afterblur":nt=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Vd;break;case $e:case af:case bf:nt=Hd;break;case cf:nt=Xd;break;case"scroll":nt=vd;break;case"wheel":nt=Zd;break;case"copy":case"cut":case"paste":nt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=Td}var st=(e&4)!==0,at=!st&&o==="scroll",ot=st?tt!==null?tt+"Capture":null:tt;st=[];for(var it=b,$;it!==null;){$=it;var et=$.stateNode;if($.tag===5&&et!==null&&($=et,ot!==null&&(et=Kb(it,ot),et!=null&&st.push(tf(it,et,$)))),at)break;it=it.return}0<st.length&&(tt=new nt(tt,_e,null,s,j),rt.push({event:tt,listeners:st}))}}if(!(e&7)){e:{if(tt=o==="mouseover"||o==="pointerover",nt=o==="mouseout"||o==="pointerout",tt&&s!==wb&&(_e=s.relatedTarget||s.fromElement)&&(Wc(_e)||_e[uf]))break e;if((nt||tt)&&(tt=j.window===j?j:(tt=j.ownerDocument)?tt.defaultView||tt.parentWindow:window,nt?(_e=s.relatedTarget||s.toElement,nt=b,_e=_e?Wc(_e):null,_e!==null&&(at=Vb(_e),_e!==at||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(nt=null,_e=b),nt!==_e)){if(st=Bd,et="onMouseLeave",ot="onMouseEnter",it="mouse",(o==="pointerout"||o==="pointerover")&&(st=Td,et="onPointerLeave",ot="onPointerEnter",it="pointer"),at=nt==null?tt:ue(nt),$=_e==null?tt:ue(_e),tt=new st(et,it+"leave",nt,s,j),tt.target=at,tt.relatedTarget=$,et=null,Wc(j)===b&&(st=new st(ot,it+"enter",_e,s,j),st.target=$,st.relatedTarget=at,et=st),at=et,nt&&_e)t:{for(st=nt,ot=_e,it=0,$=st;$;$=vf($))it++;for($=0,et=ot;et;et=vf(et))$++;for(;0<it-$;)st=vf(st),it--;for(;0<$-it;)ot=vf(ot),$--;for(;it--;){if(st===ot||ot!==null&&st===ot.alternate)break t;st=vf(st),ot=vf(ot)}st=null}else st=null;nt!==null&&wf(rt,tt,nt,st,!1),_e!==null&&at!==null&&wf(rt,at,_e,st,!0)}}e:{if(tt=b?ue(b):window,nt=tt.nodeName&&tt.nodeName.toLowerCase(),nt==="select"||nt==="input"&&tt.type==="file")var lt=ve;else if(me(tt))if(we)lt=Fe;else{lt=De;var ut=Ce}else(nt=tt.nodeName)&&nt.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(lt=Ee);if(lt&&(lt=lt(o,b))){ne(rt,lt,s,j);break e}ut&&ut(o,tt,b),o==="focusout"&&(ut=tt._wrapperState)&&ut.controlled&&tt.type==="number"&&cb(tt,"number",tt.value)}switch(ut=b?ue(b):window,o){case"focusin":(me(ut)||ut.contentEditable==="true")&&(Qe=ut,Re=b,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(rt,s,j);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(rt,s,j)}var dt;if(ae)e:{switch(o){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else ie?ge(o,s)&&(ct="onCompositionEnd"):o==="keydown"&&s.keyCode===229&&(ct="onCompositionStart");ct&&(de&&s.locale!=="ko"&&(ie||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&ie&&(dt=nd()):(kd=j,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ut=oe(b,ct),0<ut.length&&(ct=new Ld(ct,o,null,s,j),rt.push({event:ct,listeners:ut}),dt?ct.data=dt:(dt=he(s),dt!==null&&(ct.data=dt)))),(dt=ce?je(o,s):ke(o,s))&&(b=oe(b,"onBeforeInput"),0<b.length&&(j=new Ld("onBeforeInput","beforeinput",null,s,j),rt.push({event:j,listeners:b}),j.data=dt))}se(rt,e)})}function tf(o,e,s){return{instance:o,listener:e,currentTarget:s}}function oe(o,e){for(var s=e+"Capture",a=[];o!==null;){var c=o,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=Kb(o,s),h!=null&&a.unshift(tf(o,h,c)),h=Kb(o,e),h!=null&&a.push(tf(o,h,c))),o=o.return}return a}function vf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wf(o,e,s,a,c){for(var h=e._reactName,d=[];s!==null&&s!==a;){var g=s,_=g.alternate,b=g.stateNode;if(_!==null&&_===a)break;g.tag===5&&b!==null&&(g=b,c?(_=Kb(s,h),_!=null&&d.unshift(tf(s,_,g))):c||(_=Kb(s,h),_!=null&&d.push(tf(s,_,g)))),s=s.return}d.length!==0&&o.push({event:e,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(o){return(typeof o=="string"?o:""+o).replace(xf,`
`).replace(yf,"")}function Af(o,e,s){if(e=zf(e),zf(o)!==e&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(o,e){return o==="textarea"||o==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(o){return Hf.resolve(null).then(o).catch(If)}:Ff;function If(o){setTimeout(function(){throw o})}function Kf(o,e){var s=e,a=0;do{var c=s.nextSibling;if(o.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(a===0){o.removeChild(c),bd(e);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=c}while(s);bd(e)}function Lf(o){for(;o!=null;o=o.nextSibling){var e=o.nodeType;if(e===1||e===3)break;if(e===8){if(e=o.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return o}function Mf(o){o=o.previousSibling;for(var e=0;o;){if(o.nodeType===8){var s=o.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return o;e--}else s==="/$"&&e++}o=o.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(o){var e=o[Of];if(e)return e;for(var s=o.parentNode;s;){if(e=s[uf]||s[Of]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(o=Mf(o);o!==null;){if(s=o[Of])return s;o=Mf(o)}return e}o=s,s=o.parentNode}return null}function Cb(o){return o=o[Of]||o[uf],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p(33))}function Db(o){return o[Pf]||null}var Sf=[],Tf=-1;function Uf(o){return{current:o}}function E(o){0>Tf||(o.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(o,e){Tf++,Sf[Tf]=o.current,o.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(o,e){var s=o.type.contextTypes;if(!s)return Vf;var a=o.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in s)c[h]=e[h];return a&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=e,o.__reactInternalMemoizedMaskedChildContext=c),c}function Zf(o){return o=o.childContextTypes,o!=null}function $f(){E(Wf),E(H)}function ag(o,e,s){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,s)}function bg(o,e,s){var a=o.stateNode;if(e=e.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var c in a)if(!(c in e))throw Error(p(108,Ra(o)||"Unknown",c));return A({},s,a)}function cg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,o),G(Wf,Wf.current),!0}function dg(o,e,s){var a=o.stateNode;if(!a)throw Error(p(169));s?(o=bg(o,e,Xf),a.__reactInternalMemoizedMergedChildContext=o,E(Wf),E(H),G(H,o)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(o){eg===null?eg=[o]:eg.push(o)}function ig(o){fg=!0,hg(o)}function jg(){if(!gg&&eg!==null){gg=!0;var o=0,e=C;try{var s=eg;for(C=1;o<s.length;o++){var a=s[o];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(c){throw eg!==null&&(eg=eg.slice(o+1)),ac(fc,jg),c}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(o,e){kg[lg++]=ng,kg[lg++]=mg,mg=o,ng=e}function ug(o,e,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=o;var a=rg;o=sg;var c=32-oc(a)-1;a&=~(1<<c),s+=1;var h=32-oc(e)+c;if(30<h){var d=c-c%5;h=(a&(1<<d)-1).toString(32),a>>=d,c-=d,rg=1<<32-oc(e)+c|s<<c|a,sg=h+o}else rg=1<<h|s<<c|a,sg=o}function vg(o){o.return!==null&&(tg(o,1),ug(o,1,0))}function wg(o){for(;o===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;o===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(o,e){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=o,e=o.deletions,e===null?(o.deletions=[s],o.flags|=16):e.push(s)}function Cg(o,e){switch(o.tag){case 5:var s=o.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(o.stateNode=e,xg=o,yg=Lf(e.firstChild),!0):!1;case 6:return e=o.pendingProps===""||e.nodeType!==3?null:e,e!==null?(o.stateNode=e,xg=o,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=qg!==null?{id:rg,overflow:sg}:null,o.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=e,s.return=o,o.child=s,xg=o,yg=null,!0):!1;default:return!1}}function Dg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Eg(o){if(I){var e=yg;if(e){var s=e;if(!Cg(o,e)){if(Dg(o))throw Error(p(418));e=Lf(s.nextSibling);var a=xg;e&&Cg(o,e)?Ag(a,s):(o.flags=o.flags&-4097|2,I=!1,xg=o)}}else{if(Dg(o))throw Error(p(418));o.flags=o.flags&-4097|2,I=!1,xg=o}}}function Fg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xg=o}function Gg(o){if(o!==xg)return!1;if(!I)return Fg(o),I=!0,!1;var e;if((e=o.tag!==3)&&!(e=o.tag!==5)&&(e=o.type,e=e!=="head"&&e!=="body"&&!Ef(o.type,o.memoizedProps)),e&&(e=yg)){if(Dg(o))throw Hg(),Error(p(418));for(;e;)Ag(o,e),e=Lf(e.nextSibling)}if(Fg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p(317));e:{for(o=o.nextSibling,e=0;o;){if(o.nodeType===8){var s=o.data;if(s==="/$"){if(e===0){yg=Lf(o.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}o=o.nextSibling}yg=null}}else yg=xg?Lf(o.stateNode.nextSibling):null;return!0}function Hg(){for(var o=yg;o;)o=Lf(o.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(o){zg===null?zg=[o]:zg.push(o)}var Kg=ua.ReactCurrentBatchConfig;function Lg(o,e,s){if(o=s.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var a=s.stateNode}if(!a)throw Error(p(147,o));var c=a,h=""+o;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===h?e.ref:(e=function(d){var g=c.refs;d===null?delete g[h]:g[h]=d},e._stringRef=h,e)}if(typeof o!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,o))}return o}function Mg(o,e){throw o=Object.prototype.toString.call(e),Error(p(31,o==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":o))}function Ng(o){var e=o._init;return e(o._payload)}function Og(o){function e(ot,it){if(o){var $=ot.deletions;$===null?(ot.deletions=[it],ot.flags|=16):$.push(it)}}function s(ot,it){if(!o)return null;for(;it!==null;)e(ot,it),it=it.sibling;return null}function a(ot,it){for(ot=new Map;it!==null;)it.key!==null?ot.set(it.key,it):ot.set(it.index,it),it=it.sibling;return ot}function c(ot,it){return ot=Pg(ot,it),ot.index=0,ot.sibling=null,ot}function h(ot,it,$){return ot.index=$,o?($=ot.alternate,$!==null?($=$.index,$<it?(ot.flags|=2,it):$):(ot.flags|=2,it)):(ot.flags|=1048576,it)}function d(ot){return o&&ot.alternate===null&&(ot.flags|=2),ot}function g(ot,it,$,et){return it===null||it.tag!==6?(it=Qg($,ot.mode,et),it.return=ot,it):(it=c(it,$),it.return=ot,it)}function _(ot,it,$,et){var lt=$.type;return lt===ya?j(ot,it,$.props.children,et,$.key):it!==null&&(it.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ha&&Ng(lt)===it.type)?(et=c(it,$.props),et.ref=Lg(ot,it,$),et.return=ot,et):(et=Rg($.type,$.key,$.props,null,ot.mode,et),et.ref=Lg(ot,it,$),et.return=ot,et)}function b(ot,it,$,et){return it===null||it.tag!==4||it.stateNode.containerInfo!==$.containerInfo||it.stateNode.implementation!==$.implementation?(it=Sg($,ot.mode,et),it.return=ot,it):(it=c(it,$.children||[]),it.return=ot,it)}function j(ot,it,$,et,lt){return it===null||it.tag!==7?(it=Tg($,ot.mode,et,lt),it.return=ot,it):(it=c(it,$),it.return=ot,it)}function rt(ot,it,$){if(typeof it=="string"&&it!==""||typeof it=="number")return it=Qg(""+it,ot.mode,$),it.return=ot,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case va:return $=Rg(it.type,it.key,it.props,null,ot.mode,$),$.ref=Lg(ot,null,it),$.return=ot,$;case wa:return it=Sg(it,ot.mode,$),it.return=ot,it;case Ha:var et=it._init;return rt(ot,et(it._payload),$)}if(eb(it)||Ka(it))return it=Tg(it,ot.mode,$,null),it.return=ot,it;Mg(ot,it)}return null}function tt(ot,it,$,et){var lt=it!==null?it.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return lt!==null?null:g(ot,it,""+$,et);if(typeof $=="object"&&$!==null){switch($.$$typeof){case va:return $.key===lt?_(ot,it,$,et):null;case wa:return $.key===lt?b(ot,it,$,et):null;case Ha:return lt=$._init,tt(ot,it,lt($._payload),et)}if(eb($)||Ka($))return lt!==null?null:j(ot,it,$,et,null);Mg(ot,$)}return null}function nt(ot,it,$,et,lt){if(typeof et=="string"&&et!==""||typeof et=="number")return ot=ot.get($)||null,g(it,ot,""+et,lt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case va:return ot=ot.get(et.key===null?$:et.key)||null,_(it,ot,et,lt);case wa:return ot=ot.get(et.key===null?$:et.key)||null,b(it,ot,et,lt);case Ha:var ut=et._init;return nt(ot,it,$,ut(et._payload),lt)}if(eb(et)||Ka(et))return ot=ot.get($)||null,j(it,ot,et,lt,null);Mg(it,et)}return null}function _e(ot,it,$,et){for(var lt=null,ut=null,dt=it,ct=it=0,pt=null;dt!==null&&ct<$.length;ct++){dt.index>ct?(pt=dt,dt=null):pt=dt.sibling;var ht=tt(ot,dt,$[ct],et);if(ht===null){dt===null&&(dt=pt);break}o&&dt&&ht.alternate===null&&e(ot,dt),it=h(ht,it,ct),ut===null?lt=ht:ut.sibling=ht,ut=ht,dt=pt}if(ct===$.length)return s(ot,dt),I&&tg(ot,ct),lt;if(dt===null){for(;ct<$.length;ct++)dt=rt(ot,$[ct],et),dt!==null&&(it=h(dt,it,ct),ut===null?lt=dt:ut.sibling=dt,ut=dt);return I&&tg(ot,ct),lt}for(dt=a(ot,dt);ct<$.length;ct++)pt=nt(dt,ot,ct,$[ct],et),pt!==null&&(o&&pt.alternate!==null&&dt.delete(pt.key===null?ct:pt.key),it=h(pt,it,ct),ut===null?lt=pt:ut.sibling=pt,ut=pt);return o&&dt.forEach(function(gt){return e(ot,gt)}),I&&tg(ot,ct),lt}function st(ot,it,$,et){var lt=Ka($);if(typeof lt!="function")throw Error(p(150));if($=lt.call($),$==null)throw Error(p(151));for(var ut=lt=null,dt=it,ct=it=0,pt=null,ht=$.next();dt!==null&&!ht.done;ct++,ht=$.next()){dt.index>ct?(pt=dt,dt=null):pt=dt.sibling;var gt=tt(ot,dt,ht.value,et);if(gt===null){dt===null&&(dt=pt);break}o&&dt&&gt.alternate===null&&e(ot,dt),it=h(gt,it,ct),ut===null?lt=gt:ut.sibling=gt,ut=gt,dt=pt}if(ht.done)return s(ot,dt),I&&tg(ot,ct),lt;if(dt===null){for(;!ht.done;ct++,ht=$.next())ht=rt(ot,ht.value,et),ht!==null&&(it=h(ht,it,ct),ut===null?lt=ht:ut.sibling=ht,ut=ht);return I&&tg(ot,ct),lt}for(dt=a(ot,dt);!ht.done;ct++,ht=$.next())ht=nt(dt,ot,ct,ht.value,et),ht!==null&&(o&&ht.alternate!==null&&dt.delete(ht.key===null?ct:ht.key),it=h(ht,it,ct),ut===null?lt=ht:ut.sibling=ht,ut=ht);return o&&dt.forEach(function(yt){return e(ot,yt)}),I&&tg(ot,ct),lt}function at(ot,it,$,et){if(typeof $=="object"&&$!==null&&$.type===ya&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case va:e:{for(var lt=$.key,ut=it;ut!==null;){if(ut.key===lt){if(lt=$.type,lt===ya){if(ut.tag===7){s(ot,ut.sibling),it=c(ut,$.props.children),it.return=ot,ot=it;break e}}else if(ut.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ha&&Ng(lt)===ut.type){s(ot,ut.sibling),it=c(ut,$.props),it.ref=Lg(ot,ut,$),it.return=ot,ot=it;break e}s(ot,ut);break}else e(ot,ut);ut=ut.sibling}$.type===ya?(it=Tg($.props.children,ot.mode,et,$.key),it.return=ot,ot=it):(et=Rg($.type,$.key,$.props,null,ot.mode,et),et.ref=Lg(ot,it,$),et.return=ot,ot=et)}return d(ot);case wa:e:{for(ut=$.key;it!==null;){if(it.key===ut)if(it.tag===4&&it.stateNode.containerInfo===$.containerInfo&&it.stateNode.implementation===$.implementation){s(ot,it.sibling),it=c(it,$.children||[]),it.return=ot,ot=it;break e}else{s(ot,it);break}else e(ot,it);it=it.sibling}it=Sg($,ot.mode,et),it.return=ot,ot=it}return d(ot);case Ha:return ut=$._init,at(ot,it,ut($._payload),et)}if(eb($))return _e(ot,it,$,et);if(Ka($))return st(ot,it,$,et);Mg(ot,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,it!==null&&it.tag===6?(s(ot,it.sibling),it=c(it,$),it.return=ot,ot=it):(s(ot,it),it=Qg($,ot.mode,et),it.return=ot,ot=it),d(ot)):s(ot,it)}return at}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(o){var e=Wg.current;E(Wg),o._currentValue=e}function bh(o,e,s){for(;o!==null;){var a=o.alternate;if((o.childLanes&e)!==e?(o.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),o===s)break;o=o.return}}function ch(o,e){Xg=o,Zg=Yg=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&e&&(dh=!0),o.firstContext=null)}function eh(o){var e=o._currentValue;if(Zg!==o)if(o={context:o,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=o,Xg.dependencies={lanes:0,firstContext:o}}else Yg=Yg.next=o;return e}var fh=null;function gh(o){fh===null?fh=[o]:fh.push(o)}function hh(o,e,s,a){var c=e.interleaved;return c===null?(s.next=s,gh(e)):(s.next=c.next,c.next=s),e.interleaved=s,ih(o,a)}function ih(o,e){o.lanes|=e;var s=o.alternate;for(s!==null&&(s.lanes|=e),s=o,o=o.return;o!==null;)o.childLanes|=e,s=o.alternate,s!==null&&(s.childLanes|=e),s=o,o=o.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(o,e){o=o.updateQueue,e.updateQueue===o&&(e.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function mh(o,e){return{eventTime:o,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(o,e,s){var a=o.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var c=a.pending;return c===null?e.next=e:(e.next=c.next,c.next=e),a.pending=e,ih(o,s)}return c=a.interleaved,c===null?(e.next=e,gh(a)):(e.next=c.next,c.next=e),a.interleaved=e,ih(o,s)}function oh(o,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var a=e.lanes;a&=o.pendingLanes,s|=a,e.lanes=s,Cc(o,s)}}function ph(o,e){var s=o.updateQueue,a=o.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var c=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};h===null?c=h=d:h=h.next=d,s=s.next}while(s!==null);h===null?c=h=e:h=h.next=e}else c=h=e;s={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:a.shared,effects:a.effects},o.updateQueue=s;return}o=s.lastBaseUpdate,o===null?s.firstBaseUpdate=e:o.next=e,s.lastBaseUpdate=e}function qh(o,e,s,a){var c=o.updateQueue;jh=!1;var h=c.firstBaseUpdate,d=c.lastBaseUpdate,g=c.shared.pending;if(g!==null){c.shared.pending=null;var _=g,b=_.next;_.next=null,d===null?h=b:d.next=b,d=_;var j=o.alternate;j!==null&&(j=j.updateQueue,g=j.lastBaseUpdate,g!==d&&(g===null?j.firstBaseUpdate=b:g.next=b,j.lastBaseUpdate=_))}if(h!==null){var rt=c.baseState;d=0,j=b=_=null,g=h;do{var tt=g.lane,nt=g.eventTime;if((a&tt)===tt){j!==null&&(j=j.next={eventTime:nt,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var _e=o,st=g;switch(tt=e,nt=s,st.tag){case 1:if(_e=st.payload,typeof _e=="function"){rt=_e.call(nt,rt,tt);break e}rt=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=st.payload,tt=typeof _e=="function"?_e.call(nt,rt,tt):_e,tt==null)break e;rt=A({},rt,tt);break e;case 2:jh=!0}}g.callback!==null&&g.lane!==0&&(o.flags|=64,tt=c.effects,tt===null?c.effects=[g]:tt.push(g))}else nt={eventTime:nt,lane:tt,tag:g.tag,payload:g.payload,callback:g.callback,next:null},j===null?(b=j=nt,_=rt):j=j.next=nt,d|=tt;if(g=g.next,g===null){if(g=c.shared.pending,g===null)break;tt=g,g=tt.next,tt.next=null,c.lastBaseUpdate=tt,c.shared.pending=null}}while(!0);if(j===null&&(_=rt),c.baseState=_,c.firstBaseUpdate=b,c.lastBaseUpdate=j,e=c.shared.interleaved,e!==null){c=e;do d|=c.lane,c=c.next;while(c!==e)}else h===null&&(c.shared.lanes=0);rh|=d,o.lanes=d,o.memoizedState=rt}}function sh(o,e,s){if(o=e.effects,e.effects=null,o!==null)for(e=0;e<o.length;e++){var a=o[e],c=a.callback;if(c!==null){if(a.callback=null,a=s,typeof c!="function")throw Error(p(191,c));c.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(o){if(o===th)throw Error(p(174));return o}function yh(o,e){switch(G(wh,e),G(vh,o),G(uh,th),o=e.nodeType,o){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:o=o===8?e.parentNode:e,e=o.namespaceURI||null,o=o.tagName,e=lb(e,o)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(o){xh(wh.current);var e=xh(uh.current),s=lb(e,o.type);e!==s&&(G(vh,o),G(uh,s))}function Bh(o){vh.current===o&&(E(uh),E(vh))}var L=Uf(0);function Ch(o){for(var e=o;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var o=0;o<Dh.length;o++)Dh[o]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(o,e){if(e===null)return!1;for(var s=0;s<e.length&&s<o.length;s++)if(!He(o[s],e[s]))return!1;return!0}function Nh(o,e,s,a,c,h){if(Hh=h,M=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=o===null||o.memoizedState===null?Oh:Ph,o=s(a,c),Jh){h=0;do{if(Jh=!1,Kh=0,25<=h)throw Error(p(301));h+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,o=s(a,c)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,e)throw Error(p(300));return o}function Sh(){var o=Kh!==0;return Kh=0,o}function Th(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=o:O=O.next=o,O}function Uh(){if(N===null){var o=M.alternate;o=o!==null?o.memoizedState:null}else o=N.next;var e=O===null?M.memoizedState:O.next;if(e!==null)O=e,N=o;else{if(o===null)throw Error(p(310));N=o,o={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=o:O=O.next=o}return O}function Vh(o,e){return typeof e=="function"?e(o):e}function Wh(o){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=o;var a=N,c=a.baseQueue,h=s.pending;if(h!==null){if(c!==null){var d=c.next;c.next=h.next,h.next=d}a.baseQueue=c=h,s.pending=null}if(c!==null){h=c.next,a=a.baseState;var g=d=null,_=null,b=h;do{var j=b.lane;if((Hh&j)===j)_!==null&&(_=_.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),a=b.hasEagerState?b.eagerState:o(a,b.action);else{var rt={lane:j,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};_===null?(g=_=rt,d=a):_=_.next=rt,M.lanes|=j,rh|=j}b=b.next}while(b!==null&&b!==h);_===null?d=a:_.next=g,He(a,e.memoizedState)||(dh=!0),e.memoizedState=a,e.baseState=d,e.baseQueue=_,s.lastRenderedState=a}if(o=s.interleaved,o!==null){c=o;do h=c.lane,M.lanes|=h,rh|=h,c=c.next;while(c!==o)}else c===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Xh(o){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=o;var a=s.dispatch,c=s.pending,h=e.memoizedState;if(c!==null){s.pending=null;var d=c=c.next;do h=o(h,d.action),d=d.next;while(d!==c);He(h,e.memoizedState)||(dh=!0),e.memoizedState=h,e.baseQueue===null&&(e.baseState=h),s.lastRenderedState=h}return[h,a]}function Yh(){}function Zh(o,e){var s=M,a=Uh(),c=e(),h=!He(a.memoizedState,c);if(h&&(a.memoizedState=c,dh=!0),a=a.queue,$h(ai.bind(null,s,a,o),[o]),a.getSnapshot!==e||h||O!==null&&O.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,a,c,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(s,e,c)}return c}function di(o,e,s){o.flags|=16384,o={getSnapshot:e,value:s},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.stores=[o]):(s=e.stores,s===null?e.stores=[o]:s.push(o))}function ci(o,e,s,a){e.value=s,e.getSnapshot=a,ei(e)&&fi(o)}function ai(o,e,s){return s(function(){ei(e)&&fi(o)})}function ei(o){var e=o.getSnapshot;o=o.value;try{var s=e();return!He(o,s)}catch{return!0}}function fi(o){var e=ih(o,1);e!==null&&gi(e,o,1,-1)}function hi(o){var e=Th();return typeof o=="function"&&(o=o()),e.memoizedState=e.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:o},e.queue=o,o=o.dispatch=ii.bind(null,M,o),[e.memoizedState,o]}function bi(o,e,s,a){return o={tag:o,create:e,destroy:s,deps:a,next:null},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.lastEffect=o.next=o):(s=e.lastEffect,s===null?e.lastEffect=o.next=o:(a=s.next,s.next=o,o.next=a,e.lastEffect=o)),o}function ji(){return Uh().memoizedState}function ki(o,e,s,a){var c=Th();M.flags|=o,c.memoizedState=bi(1|e,s,void 0,a===void 0?null:a)}function li(o,e,s,a){var c=Uh();a=a===void 0?null:a;var h=void 0;if(N!==null){var d=N.memoizedState;if(h=d.destroy,a!==null&&Mh(a,d.deps)){c.memoizedState=bi(e,s,h,a);return}}M.flags|=o,c.memoizedState=bi(1|e,s,h,a)}function mi(o,e){return ki(8390656,8,o,e)}function $h(o,e){return li(2048,8,o,e)}function ni(o,e){return li(4,2,o,e)}function oi(o,e){return li(4,4,o,e)}function pi(o,e){if(typeof e=="function")return o=o(),e(o),function(){e(null)};if(e!=null)return o=o(),e.current=o,function(){e.current=null}}function qi(o,e,s){return s=s!=null?s.concat([o]):null,li(4,4,pi.bind(null,e,o),s)}function ri(){}function si(o,e){var s=Uh();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(s.memoizedState=[o,e],o)}function ti(o,e){var s=Uh();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(o=o(),s.memoizedState=[o,e],o)}function ui(o,e,s){return Hh&21?(He(s,e)||(s=yc(),M.lanes|=s,rh|=s,o.baseState=!0),e):(o.baseState&&(o.baseState=!1,dh=!0),o.memoizedState=s)}function vi(o,e){var s=C;C=s!==0&&4>s?s:4,o(!0);var a=Gh.transition;Gh.transition={};try{o(!1),e()}finally{C=s,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(o,e,s){var a=yi(o);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},zi(o))Ai(e,s);else if(s=hh(o,e,s,a),s!==null){var c=R();gi(s,o,a,c),Bi(s,e,a)}}function ii(o,e,s){var a=yi(o),c={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(o))Ai(e,c);else{var h=o.alternate;if(o.lanes===0&&(h===null||h.lanes===0)&&(h=e.lastRenderedReducer,h!==null))try{var d=e.lastRenderedState,g=h(d,s);if(c.hasEagerState=!0,c.eagerState=g,He(g,d)){var _=e.interleaved;_===null?(c.next=c,gh(e)):(c.next=_.next,_.next=c),e.interleaved=c;return}}catch{}finally{}s=hh(o,e,c,a),s!==null&&(c=R(),gi(s,o,a,c),Bi(s,e,a))}}function zi(o){var e=o.alternate;return o===M||e!==null&&e===M}function Ai(o,e){Jh=Ih=!0;var s=o.pending;s===null?e.next=e:(e.next=s.next,s.next=e),o.pending=e}function Bi(o,e,s){if(s&4194240){var a=e.lanes;a&=o.pendingLanes,s|=a,e.lanes=s,Cc(o,s)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(o,e){return Th().memoizedState=[o,e===void 0?null:e],o},useContext:eh,useEffect:mi,useImperativeHandle:function(o,e,s){return s=s!=null?s.concat([o]):null,ki(4194308,4,pi.bind(null,e,o),s)},useLayoutEffect:function(o,e){return ki(4194308,4,o,e)},useInsertionEffect:function(o,e){return ki(4,2,o,e)},useMemo:function(o,e){var s=Th();return e=e===void 0?null:e,o=o(),s.memoizedState=[o,e],o},useReducer:function(o,e,s){var a=Th();return e=s!==void 0?s(e):e,a.memoizedState=a.baseState=e,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:e},a.queue=o,o=o.dispatch=xi.bind(null,M,o),[a.memoizedState,o]},useRef:function(o){var e=Th();return o={current:o},e.memoizedState=o},useState:hi,useDebugValue:ri,useDeferredValue:function(o){return Th().memoizedState=o},useTransition:function(){var o=hi(!1),e=o[0];return o=vi.bind(null,o[1]),Th().memoizedState=o,[e,o]},useMutableSource:function(){},useSyncExternalStore:function(o,e,s){var a=M,c=Th();if(I){if(s===void 0)throw Error(p(407));s=s()}else{if(s=e(),Q===null)throw Error(p(349));Hh&30||di(a,e,s)}c.memoizedState=s;var h={value:s,getSnapshot:e};return c.queue=h,mi(ai.bind(null,a,h,o),[o]),a.flags|=2048,bi(9,ci.bind(null,a,h,s,e),void 0,null),s},useId:function(){var o=Th(),e=Q.identifierPrefix;if(I){var s=sg,a=rg;s=(a&~(1<<32-oc(a)-1)).toString(32)+s,e=":"+e+"R"+s,s=Kh++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Lh++,e=":"+e+"r"+s.toString(32)+":";return o.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var e=Uh();return ui(e,N.memoizedState,o)},useTransition:function(){var o=Wh(Vh)[0],e=Uh().memoizedState;return[o,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var e=Uh();return N===null?e.memoizedState=o:ui(e,N.memoizedState,o)},useTransition:function(){var o=Xh(Vh)[0],e=Uh().memoizedState;return[o,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(o,e){if(o&&o.defaultProps){e=A({},e),o=o.defaultProps;for(var s in o)e[s]===void 0&&(e[s]=o[s]);return e}return e}function Di(o,e,s,a){e=o.memoizedState,s=s(a,e),s=s==null?e:A({},e,s),o.memoizedState=s,o.lanes===0&&(o.updateQueue.baseState=s)}var Ei={isMounted:function(o){return(o=o._reactInternals)?Vb(o)===o:!1},enqueueSetState:function(o,e,s){o=o._reactInternals;var a=R(),c=yi(o),h=mh(a,c);h.payload=e,s!=null&&(h.callback=s),e=nh(o,h,c),e!==null&&(gi(e,o,c,a),oh(e,o,c))},enqueueReplaceState:function(o,e,s){o=o._reactInternals;var a=R(),c=yi(o),h=mh(a,c);h.tag=1,h.payload=e,s!=null&&(h.callback=s),e=nh(o,h,c),e!==null&&(gi(e,o,c,a),oh(e,o,c))},enqueueForceUpdate:function(o,e){o=o._reactInternals;var s=R(),a=yi(o),c=mh(s,a);c.tag=2,e!=null&&(c.callback=e),e=nh(o,c,a),e!==null&&(gi(e,o,a,s),oh(e,o,a))}};function Fi(o,e,s,a,c,h,d){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(a,h,d):e.prototype&&e.prototype.isPureReactComponent?!Ie(s,a)||!Ie(c,h):!0}function Gi(o,e,s){var a=!1,c=Vf,h=e.contextType;return typeof h=="object"&&h!==null?h=eh(h):(c=Zf(e)?Xf:H.current,a=e.contextTypes,h=(a=a!=null)?Yf(o,c):Vf),e=new e(s,h),o.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,o.stateNode=e,e._reactInternals=o,a&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=h),e}function Hi(o,e,s,a){o=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,a),e.state!==o&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(o,e,s,a){var c=o.stateNode;c.props=s,c.state=o.memoizedState,c.refs={},kh(o);var h=e.contextType;typeof h=="object"&&h!==null?c.context=eh(h):(h=Zf(e)?Xf:H.current,c.context=Yf(o,h)),c.state=o.memoizedState,h=e.getDerivedStateFromProps,typeof h=="function"&&(Di(o,e,h,s),c.state=o.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(e=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),e!==c.state&&Ei.enqueueReplaceState(c,c.state,null),qh(o,s,c,a),c.state=o.memoizedState),typeof c.componentDidMount=="function"&&(o.flags|=4194308)}function Ji(o,e){try{var s="",a=e;do s+=Pa(a),a=a.return;while(a);var c=s}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:o,source:e,stack:c,digest:null}}function Ki(o,e,s){return{value:o,source:null,stack:s??null,digest:e??null}}function Li(o,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(o,e,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var a=e.value;return s.callback=function(){Oi||(Oi=!0,Pi=a),Li(o,e)},s}function Qi(o,e,s){s=mh(-1,s),s.tag=3;var a=o.type.getDerivedStateFromError;if(typeof a=="function"){var c=e.value;s.payload=function(){return a(c)},s.callback=function(){Li(o,e)}}var h=o.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(s.callback=function(){Li(o,e),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),s}function Si(o,e,s){var a=o.pingCache;if(a===null){a=o.pingCache=new Mi;var c=new Set;a.set(e,c)}else c=a.get(e),c===void 0&&(c=new Set,a.set(e,c));c.has(s)||(c.add(s),o=Ti.bind(null,o,e,s),e.then(o,o))}function Ui(o){do{var e;if((e=o.tag===13)&&(e=o.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return o;o=o.return}while(o!==null);return null}function Vi(o,e,s,a,c){return o.mode&1?(o.flags|=65536,o.lanes=c,o):(o===e?o.flags|=65536:(o.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=mh(-1,1),e.tag=2,nh(s,e,1))),s.lanes|=1),o)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(o,e,s,a){e.child=o===null?Vg(e,null,s,a):Ug(e,o.child,s,a)}function Yi(o,e,s,a,c){s=s.render;var h=e.ref;return ch(e,c),a=Nh(o,e,s,a,h,c),s=Sh(),o!==null&&!dh?(e.updateQueue=o.updateQueue,e.flags&=-2053,o.lanes&=~c,Zi(o,e,c)):(I&&s&&vg(e),e.flags|=1,Xi(o,e,a,c),e.child)}function $i(o,e,s,a,c){if(o===null){var h=s.type;return typeof h=="function"&&!aj(h)&&h.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=h,bj(o,e,h,a,c)):(o=Rg(s.type,null,a,e,e.mode,c),o.ref=e.ref,o.return=e,e.child=o)}if(h=o.child,!(o.lanes&c)){var d=h.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(d,a)&&o.ref===e.ref)return Zi(o,e,c)}return e.flags|=1,o=Pg(h,a),o.ref=e.ref,o.return=e,e.child=o}function bj(o,e,s,a,c){if(o!==null){var h=o.memoizedProps;if(Ie(h,a)&&o.ref===e.ref)if(dh=!1,e.pendingProps=a=h,(o.lanes&c)!==0)o.flags&131072&&(dh=!0);else return e.lanes=o.lanes,Zi(o,e,c)}return cj(o,e,s,a,c)}function dj(o,e,s){var a=e.pendingProps,c=a.children,h=o!==null?o.memoizedState:null;if(a.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=s;else{if(!(s&1073741824))return o=h!==null?h.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:o,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=o,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:s,G(ej,fj),fj|=a}else h!==null?(a=h.baseLanes|s,e.memoizedState=null):a=s,G(ej,fj),fj|=a;return Xi(o,e,c,s),e.child}function gj(o,e){var s=e.ref;(o===null&&s!==null||o!==null&&o.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function cj(o,e,s,a,c){var h=Zf(s)?Xf:H.current;return h=Yf(e,h),ch(e,c),s=Nh(o,e,s,a,h,c),a=Sh(),o!==null&&!dh?(e.updateQueue=o.updateQueue,e.flags&=-2053,o.lanes&=~c,Zi(o,e,c)):(I&&a&&vg(e),e.flags|=1,Xi(o,e,s,c),e.child)}function hj(o,e,s,a,c){if(Zf(s)){var h=!0;cg(e)}else h=!1;if(ch(e,c),e.stateNode===null)ij(o,e),Gi(e,s,a),Ii(e,s,a,c),a=!0;else if(o===null){var d=e.stateNode,g=e.memoizedProps;d.props=g;var _=d.context,b=s.contextType;typeof b=="object"&&b!==null?b=eh(b):(b=Zf(s)?Xf:H.current,b=Yf(e,b));var j=s.getDerivedStateFromProps,rt=typeof j=="function"||typeof d.getSnapshotBeforeUpdate=="function";rt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==a||_!==b)&&Hi(e,d,a,b),jh=!1;var tt=e.memoizedState;d.state=tt,qh(e,a,d,c),_=e.memoizedState,g!==a||tt!==_||Wf.current||jh?(typeof j=="function"&&(Di(e,s,j,a),_=e.memoizedState),(g=jh||Fi(e,s,g,a,tt,_,b))?(rt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=_),d.props=a,d.state=_,d.context=b,a=g):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{d=e.stateNode,lh(o,e),g=e.memoizedProps,b=e.type===e.elementType?g:Ci(e.type,g),d.props=b,rt=e.pendingProps,tt=d.context,_=s.contextType,typeof _=="object"&&_!==null?_=eh(_):(_=Zf(s)?Xf:H.current,_=Yf(e,_));var nt=s.getDerivedStateFromProps;(j=typeof nt=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==rt||tt!==_)&&Hi(e,d,a,_),jh=!1,tt=e.memoizedState,d.state=tt,qh(e,a,d,c);var _e=e.memoizedState;g!==rt||tt!==_e||Wf.current||jh?(typeof nt=="function"&&(Di(e,s,nt,a),_e=e.memoizedState),(b=jh||Fi(e,s,b,a,tt,_e,_)||!1)?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,_e,_),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,_e,_)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===o.memoizedProps&&tt===o.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===o.memoizedProps&&tt===o.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=_e),d.props=a,d.state=_e,d.context=_,a=b):(typeof d.componentDidUpdate!="function"||g===o.memoizedProps&&tt===o.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===o.memoizedProps&&tt===o.memoizedState||(e.flags|=1024),a=!1)}return jj(o,e,s,a,h,c)}function jj(o,e,s,a,c,h){gj(o,e);var d=(e.flags&128)!==0;if(!a&&!d)return c&&dg(e,s,!1),Zi(o,e,h);a=e.stateNode,Wi.current=e;var g=d&&typeof s.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,o!==null&&d?(e.child=Ug(e,o.child,null,h),e.child=Ug(e,null,g,h)):Xi(o,e,g,h),e.memoizedState=a.state,c&&dg(e,s,!0),e.child}function kj(o){var e=o.stateNode;e.pendingContext?ag(o,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(o,e.context,!1),yh(o,e.containerInfo)}function lj(o,e,s,a,c){return Ig(),Jg(c),e.flags|=256,Xi(o,e,s,a),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(o){return{baseLanes:o,cachePool:null,transitions:null}}function oj(o,e,s){var a=e.pendingProps,c=L.current,h=!1,d=(e.flags&128)!==0,g;if((g=d)||(g=o!==null&&o.memoizedState===null?!1:(c&2)!==0),g?(h=!0,e.flags&=-129):(o===null||o.memoizedState!==null)&&(c|=1),G(L,c&1),o===null)return Eg(e),o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(e.mode&1?o.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=a.children,o=a.fallback,h?(a=e.mode,h=e.child,d={mode:"hidden",children:d},!(a&1)&&h!==null?(h.childLanes=0,h.pendingProps=d):h=pj(d,a,0,null),o=Tg(o,a,s,null),h.return=e,o.return=e,h.sibling=o,e.child=h,e.child.memoizedState=nj(s),e.memoizedState=mj,o):qj(e,d));if(c=o.memoizedState,c!==null&&(g=c.dehydrated,g!==null))return rj(o,e,d,a,g,c,s);if(h){h=a.fallback,d=e.mode,c=o.child,g=c.sibling;var _={mode:"hidden",children:a.children};return!(d&1)&&e.child!==c?(a=e.child,a.childLanes=0,a.pendingProps=_,e.deletions=null):(a=Pg(c,_),a.subtreeFlags=c.subtreeFlags&14680064),g!==null?h=Pg(g,h):(h=Tg(h,d,s,null),h.flags|=2),h.return=e,a.return=e,a.sibling=h,e.child=a,a=h,h=e.child,d=o.child.memoizedState,d=d===null?nj(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},h.memoizedState=d,h.childLanes=o.childLanes&~s,e.memoizedState=mj,a}return h=o.child,o=h.sibling,a=Pg(h,{mode:"visible",children:a.children}),!(e.mode&1)&&(a.lanes=s),a.return=e,a.sibling=null,o!==null&&(s=e.deletions,s===null?(e.deletions=[o],e.flags|=16):s.push(o)),e.child=a,e.memoizedState=null,a}function qj(o,e){return e=pj({mode:"visible",children:e},o.mode,0,null),e.return=o,o.child=e}function sj(o,e,s,a){return a!==null&&Jg(a),Ug(e,o.child,null,s),o=qj(e,e.pendingProps.children),o.flags|=2,e.memoizedState=null,o}function rj(o,e,s,a,c,h,d){if(s)return e.flags&256?(e.flags&=-257,a=Ki(Error(p(422))),sj(o,e,d,a)):e.memoizedState!==null?(e.child=o.child,e.flags|=128,null):(h=a.fallback,c=e.mode,a=pj({mode:"visible",children:a.children},c,0,null),h=Tg(h,c,d,null),h.flags|=2,a.return=e,h.return=e,a.sibling=h,e.child=a,e.mode&1&&Ug(e,o.child,null,d),e.child.memoizedState=nj(d),e.memoizedState=mj,h);if(!(e.mode&1))return sj(o,e,d,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var g=a.dgst;return a=g,h=Error(p(419)),a=Ki(h,a,void 0),sj(o,e,d,a)}if(g=(d&o.childLanes)!==0,dh||g){if(a=Q,a!==null){switch(d&-d){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|d)?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,ih(o,c),gi(a,o,c,-1))}return tj(),a=Ki(Error(p(421))),sj(o,e,d,a)}return c.data==="$?"?(e.flags|=128,e.child=o.child,e=uj.bind(null,o),c._reactRetry=e,null):(o=h.treeContext,yg=Lf(c.nextSibling),xg=e,I=!0,zg=null,o!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=o.id,sg=o.overflow,qg=e),e=qj(e,a.children),e.flags|=4096,e)}function vj(o,e,s){o.lanes|=e;var a=o.alternate;a!==null&&(a.lanes|=e),bh(o.return,e,s)}function wj(o,e,s,a,c){var h=o.memoizedState;h===null?o.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:c}:(h.isBackwards=e,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=s,h.tailMode=c)}function xj(o,e,s){var a=e.pendingProps,c=a.revealOrder,h=a.tail;if(Xi(o,e,a.children,s),a=L.current,a&2)a=a&1|2,e.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=e.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vj(o,s,e);else if(o.tag===19)vj(o,s,e);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}a&=1}if(G(L,a),!(e.mode&1))e.memoizedState=null;else switch(c){case"forwards":for(s=e.child,c=null;s!==null;)o=s.alternate,o!==null&&Ch(o)===null&&(c=s),s=s.sibling;s=c,s===null?(c=e.child,e.child=null):(c=s.sibling,s.sibling=null),wj(e,!1,c,s,h);break;case"backwards":for(s=null,c=e.child,e.child=null;c!==null;){if(o=c.alternate,o!==null&&Ch(o)===null){e.child=c;break}o=c.sibling,c.sibling=s,s=c,c=o}wj(e,!0,s,null,h);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(o,e){!(e.mode&1)&&o!==null&&(o.alternate=null,e.alternate=null,e.flags|=2)}function Zi(o,e,s){if(o!==null&&(e.dependencies=o.dependencies),rh|=e.lanes,!(s&e.childLanes))return null;if(o!==null&&e.child!==o.child)throw Error(p(153));if(e.child!==null){for(o=e.child,s=Pg(o,o.pendingProps),e.child=s,s.return=e;o.sibling!==null;)o=o.sibling,s=s.sibling=Pg(o,o.pendingProps),s.return=e;s.sibling=null}return e.child}function yj(o,e,s){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var a=e.type._context,c=e.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=c;break;case 13:if(a=e.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):s&e.child.childLanes?oj(o,e,s):(G(L,L.current&1),o=Zi(o,e,s),o!==null?o.sibling:null);G(L,L.current&1);break;case 19:if(a=(s&e.childLanes)!==0,o.flags&128){if(a)return xj(o,e,s);e.flags|=128}if(c=e.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return e.lanes=0,dj(o,e,s)}return Zi(o,e,s)}var zj,Aj,Bj,Cj;zj=function(o,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(o,e,s,a){var c=o.memoizedProps;if(c!==a){o=e.stateNode,xh(uh.current);var h=null;switch(s){case"input":c=Ya(o,c),a=Ya(o,a),h=[];break;case"select":c=A({},c,{value:void 0}),a=A({},a,{value:void 0}),h=[];break;case"textarea":c=gb(o,c),a=gb(o,a),h=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(o.onclick=Bf)}ub(s,a);var d;s=null;for(b in c)if(!a.hasOwnProperty(b)&&c.hasOwnProperty(b)&&c[b]!=null)if(b==="style"){var g=c[b];for(d in g)g.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ea.hasOwnProperty(b)?h||(h=[]):(h=h||[]).push(b,null));for(b in a){var _=a[b];if(g=c!=null?c[b]:void 0,a.hasOwnProperty(b)&&_!==g&&(_!=null||g!=null))if(b==="style")if(g){for(d in g)!g.hasOwnProperty(d)||_&&_.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in _)_.hasOwnProperty(d)&&g[d]!==_[d]&&(s||(s={}),s[d]=_[d])}else s||(h||(h=[]),h.push(b,s)),s=_;else b==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,g=g?g.__html:void 0,_!=null&&g!==_&&(h=h||[]).push(b,_)):b==="children"?typeof _!="string"&&typeof _!="number"||(h=h||[]).push(b,""+_):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(ea.hasOwnProperty(b)?(_!=null&&b==="onScroll"&&D("scroll",o),h||g===_||(h=[])):(h=h||[]).push(b,_))}s&&(h=h||[]).push("style",s);var b=h;(e.updateQueue=b)&&(e.flags|=4)}};Cj=function(o,e,s,a){s!==a&&(e.flags|=4)};function Dj(o,e){if(!I)switch(o.tailMode){case"hidden":e=o.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?o.tail=null:s.sibling=null;break;case"collapsed":s=o.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e||o.tail===null?o.tail=null:o.tail.sibling=null:a.sibling=null}}function S(o){var e=o.alternate!==null&&o.alternate.child===o.child,s=0,a=0;if(e)for(var c=o.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=o,c=c.sibling;else for(c=o.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=o,c=c.sibling;return o.subtreeFlags|=a,o.childLanes=s,e}function Ej(o,e,s){var a=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return a=e.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(o===null||o.child===null)&&(Gg(e)?e.flags|=4:o===null||o.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(o,e),S(e),null;case 5:Bh(e);var c=xh(wh.current);if(s=e.type,o!==null&&e.stateNode!=null)Bj(o,e,s,a,c),o.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!a){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(o=xh(uh.current),Gg(e)){a=e.stateNode,s=e.type;var h=e.memoizedProps;switch(a[Of]=e,a[Pf]=h,o=(e.mode&1)!==0,s){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(c=0;c<lf.length;c++)D(lf[c],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,h),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},D("invalid",a);break;case"textarea":hb(a,h),D("invalid",a)}ub(s,h),c=null;for(var d in h)if(h.hasOwnProperty(d)){var g=h[d];d==="children"?typeof g=="string"?a.textContent!==g&&(h.suppressHydrationWarning!==!0&&Af(a.textContent,g,o),c=["children",g]):typeof g=="number"&&a.textContent!==""+g&&(h.suppressHydrationWarning!==!0&&Af(a.textContent,g,o),c=["children",""+g]):ea.hasOwnProperty(d)&&g!=null&&d==="onScroll"&&D("scroll",a)}switch(s){case"input":Va(a),db(a,h,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=Bf)}a=c,e.updateQueue=a,a!==null&&(e.flags|=4)}else{d=c.nodeType===9?c:c.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kb(s)),o==="http://www.w3.org/1999/xhtml"?s==="script"?(o=d.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof a.is=="string"?o=d.createElement(s,{is:a.is}):(o=d.createElement(s),s==="select"&&(d=o,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):o=d.createElementNS(o,s),o[Of]=e,o[Pf]=a,zj(o,e,!1,!1),e.stateNode=o;e:{switch(d=vb(s,a),s){case"dialog":D("cancel",o),D("close",o),c=a;break;case"iframe":case"object":case"embed":D("load",o),c=a;break;case"video":case"audio":for(c=0;c<lf.length;c++)D(lf[c],o);c=a;break;case"source":D("error",o),c=a;break;case"img":case"image":case"link":D("error",o),D("load",o),c=a;break;case"details":D("toggle",o),c=a;break;case"input":Za(o,a),c=Ya(o,a),D("invalid",o);break;case"option":c=a;break;case"select":o._wrapperState={wasMultiple:!!a.multiple},c=A({},a,{value:void 0}),D("invalid",o);break;case"textarea":hb(o,a),c=gb(o,a),D("invalid",o);break;default:c=a}ub(s,c),g=c;for(h in g)if(g.hasOwnProperty(h)){var _=g[h];h==="style"?sb(o,_):h==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&nb(o,_)):h==="children"?typeof _=="string"?(s!=="textarea"||_!=="")&&ob(o,_):typeof _=="number"&&ob(o,""+_):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ea.hasOwnProperty(h)?_!=null&&h==="onScroll"&&D("scroll",o):_!=null&&ta(o,h,_,d))}switch(s){case"input":Va(o),db(o,a,!1);break;case"textarea":Va(o),jb(o);break;case"option":a.value!=null&&o.setAttribute("value",""+Sa(a.value));break;case"select":o.multiple=!!a.multiple,h=a.value,h!=null?fb(o,!!a.multiple,h,!1):a.defaultValue!=null&&fb(o,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(o.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(o&&e.stateNode!=null)Cj(o,e,o.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(p(166));if(s=xh(wh.current),xh(uh.current),Gg(e)){if(a=e.stateNode,s=e.memoizedProps,a[Of]=e,(h=a.nodeValue!==s)&&(o=xg,o!==null))switch(o.tag){case 3:Af(a.nodeValue,s,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,s,(o.mode&1)!==0)}h&&(e.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of]=e,e.stateNode=a}return S(e),null;case 13:if(E(L),a=e.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,h=!1;else if(h=Gg(e),a!==null&&a.dehydrated!==null){if(o===null){if(!h)throw Error(p(318));if(h=e.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(p(317));h[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),h=!1}else zg!==null&&(Fj(zg),zg=null),h=!0;if(!h)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(a=a!==null,a!==(o!==null&&o.memoizedState!==null)&&a&&(e.child.flags|=8192,e.mode&1&&(o===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(o,e),o===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),h=e.memoizedState,h===null)return S(e),null;if(a=(e.flags&128)!==0,d=h.rendering,d===null)if(a)Dj(h,!1);else{if(T!==0||o!==null&&o.flags&128)for(o=e.child;o!==null;){if(d=Ch(o),d!==null){for(e.flags|=128,Dj(h,!1),a=d.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),e.subtreeFlags=0,a=s,s=e.child;s!==null;)h=s,o=a,h.flags&=14680066,d=h.alternate,d===null?(h.childLanes=0,h.lanes=o,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=d.childLanes,h.lanes=d.lanes,h.child=d.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=d.memoizedProps,h.memoizedState=d.memoizedState,h.updateQueue=d.updateQueue,h.type=d.type,o=d.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s=s.sibling;return G(L,L.current&1|2),e.child}o=o.sibling}h.tail!==null&&B()>Gj&&(e.flags|=128,a=!0,Dj(h,!1),e.lanes=4194304)}else{if(!a)if(o=Ch(d),o!==null){if(e.flags|=128,a=!0,s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Dj(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!I)return S(e),null}else 2*B()-h.renderingStartTime>Gj&&s!==1073741824&&(e.flags|=128,a=!0,Dj(h,!1),e.lanes=4194304);h.isBackwards?(d.sibling=e.child,e.child=d):(s=h.last,s!==null?s.sibling=d:e.child=d,h.last=d)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=B(),e.sibling=null,s=L.current,G(L,a?s&1|2:s&1),e):(S(e),null);case 22:case 23:return Hj(),a=e.memoizedState!==null,o!==null&&o.memoizedState!==null!==a&&(e.flags|=8192),a&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(o,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),o=e.flags,o&65536?(e.flags=o&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),o=e.flags,o&65536&&!(o&128)?(e.flags=o&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),o=e.memoizedState,o!==null&&o.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return o=e.flags,o&65536?(e.flags=o&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(o,e){var s=o.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W(o,e,a)}else s.current=null}function Mj(o,e,s){try{s()}catch(a){W(o,e,a)}}var Nj=!1;function Oj(o,e){if(Cf=dd,o=Me(),Ne(o)){if("selectionStart"in o)var s={start:o.selectionStart,end:o.selectionEnd};else e:{s=(s=o.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var c=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var d=0,g=-1,_=-1,b=0,j=0,rt=o,tt=null;t:for(;;){for(var nt;rt!==s||c!==0&&rt.nodeType!==3||(g=d+c),rt!==h||a!==0&&rt.nodeType!==3||(_=d+a),rt.nodeType===3&&(d+=rt.nodeValue.length),(nt=rt.firstChild)!==null;)tt=rt,rt=nt;for(;;){if(rt===o)break t;if(tt===s&&++b===c&&(g=d),tt===h&&++j===a&&(_=d),(nt=rt.nextSibling)!==null)break;rt=tt,tt=rt.parentNode}rt=nt}s=g===-1||_===-1?null:{start:g,end:_}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:o,selectionRange:s},dd=!1,V=e;V!==null;)if(e=V,o=e.child,(e.subtreeFlags&1028)!==0&&o!==null)o.return=e,V=o;else for(;V!==null;){e=V;try{var _e=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var st=_e.memoizedProps,at=_e.memoizedState,ot=e.stateNode,it=ot.getSnapshotBeforeUpdate(e.elementType===e.type?st:Ci(e.type,st),at);ot.__reactInternalSnapshotBeforeUpdate=it}break;case 3:var $=e.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(et){W(e,e.return,et)}if(o=e.sibling,o!==null){o.return=e.return,V=o;break}V=e.return}return _e=Nj,Nj=!1,_e}function Pj(o,e,s){var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&o)===o){var h=c.destroy;c.destroy=void 0,h!==void 0&&Mj(e,s,h)}c=c.next}while(c!==a)}}function Qj(o,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&o)===o){var a=s.create;s.destroy=a()}s=s.next}while(s!==e)}}function Rj(o){var e=o.ref;if(e!==null){var s=o.stateNode;switch(o.tag){case 5:o=s;break;default:o=s}typeof e=="function"?e(o):e.current=o}}function Sj(o){var e=o.alternate;e!==null&&(o.alternate=null,Sj(e)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(e=o.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Tj(o){return o.tag===5||o.tag===3||o.tag===4}function Uj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Tj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Vj(o,e,s){var a=o.tag;if(a===5||a===6)o=o.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(o,e):s.insertBefore(o,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(o,s)):(e=s,e.appendChild(o)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Bf));else if(a!==4&&(o=o.child,o!==null))for(Vj(o,e,s),o=o.sibling;o!==null;)Vj(o,e,s),o=o.sibling}function Wj(o,e,s){var a=o.tag;if(a===5||a===6)o=o.stateNode,e?s.insertBefore(o,e):s.appendChild(o);else if(a!==4&&(o=o.child,o!==null))for(Wj(o,e,s),o=o.sibling;o!==null;)Wj(o,e,s),o=o.sibling}var X=null,Xj=!1;function Yj(o,e,s){for(s=s.child;s!==null;)Zj(o,e,s),s=s.sibling}function Zj(o,e,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Lj(s,e);case 6:var a=X,c=Xj;X=null,Yj(o,e,s),X=a,Xj=c,X!==null&&(Xj?(o=X,s=s.stateNode,o.nodeType===8?o.parentNode.removeChild(s):o.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Xj?(o=X,s=s.stateNode,o.nodeType===8?Kf(o.parentNode,s):o.nodeType===1&&Kf(o,s),bd(o)):Kf(X,s.stateNode));break;case 4:a=X,c=Xj,X=s.stateNode.containerInfo,Xj=!0,Yj(o,e,s),X=a,Xj=c;break;case 0:case 11:case 14:case 15:if(!U&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var h=c,d=h.destroy;h=h.tag,d!==void 0&&(h&2||h&4)&&Mj(s,e,d),c=c.next}while(c!==a)}Yj(o,e,s);break;case 1:if(!U&&(Lj(s,e),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(g){W(s,e,g)}Yj(o,e,s);break;case 21:Yj(o,e,s);break;case 22:s.mode&1?(U=(a=U)||s.memoizedState!==null,Yj(o,e,s),U=a):Yj(o,e,s);break;default:Yj(o,e,s)}}function ak(o){var e=o.updateQueue;if(e!==null){o.updateQueue=null;var s=o.stateNode;s===null&&(s=o.stateNode=new Kj),e.forEach(function(a){var c=bk.bind(null,o,a);s.has(a)||(s.add(a),a.then(c,c))})}}function ck(o,e){var s=e.deletions;if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];try{var h=o,d=e,g=d;e:for(;g!==null;){switch(g.tag){case 5:X=g.stateNode,Xj=!1;break e;case 3:X=g.stateNode.containerInfo,Xj=!0;break e;case 4:X=g.stateNode.containerInfo,Xj=!0;break e}g=g.return}if(X===null)throw Error(p(160));Zj(h,d,c),X=null,Xj=!1;var _=c.alternate;_!==null&&(_.return=null),c.return=null}catch(b){W(c,e,b)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,o),e=e.sibling}function dk(o,e){var s=o.alternate,a=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ck(e,o),ek(o),a&4){try{Pj(3,o,o.return),Qj(3,o)}catch(st){W(o,o.return,st)}try{Pj(5,o,o.return)}catch(st){W(o,o.return,st)}}break;case 1:ck(e,o),ek(o),a&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(e,o),ek(o),a&512&&s!==null&&Lj(s,s.return),o.flags&32){var c=o.stateNode;try{ob(c,"")}catch(st){W(o,o.return,st)}}if(a&4&&(c=o.stateNode,c!=null)){var h=o.memoizedProps,d=s!==null?s.memoizedProps:h,g=o.type,_=o.updateQueue;if(o.updateQueue=null,_!==null)try{g==="input"&&h.type==="radio"&&h.name!=null&&ab(c,h),vb(g,d);var b=vb(g,h);for(d=0;d<_.length;d+=2){var j=_[d],rt=_[d+1];j==="style"?sb(c,rt):j==="dangerouslySetInnerHTML"?nb(c,rt):j==="children"?ob(c,rt):ta(c,j,rt,b)}switch(g){case"input":bb(c,h);break;case"textarea":ib(c,h);break;case"select":var tt=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var nt=h.value;nt!=null?fb(c,!!h.multiple,nt,!1):tt!==!!h.multiple&&(h.defaultValue!=null?fb(c,!!h.multiple,h.defaultValue,!0):fb(c,!!h.multiple,h.multiple?[]:"",!1))}c[Pf]=h}catch(st){W(o,o.return,st)}}break;case 6:if(ck(e,o),ek(o),a&4){if(o.stateNode===null)throw Error(p(162));c=o.stateNode,h=o.memoizedProps;try{c.nodeValue=h}catch(st){W(o,o.return,st)}}break;case 3:if(ck(e,o),ek(o),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(st){W(o,o.return,st)}break;case 4:ck(e,o),ek(o);break;case 13:ck(e,o),ek(o),c=o.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(fk=B())),a&4&&ak(o);break;case 22:if(j=s!==null&&s.memoizedState!==null,o.mode&1?(U=(b=U)||j,ck(e,o),U=b):ck(e,o),ek(o),a&8192){if(b=o.memoizedState!==null,(o.stateNode.isHidden=b)&&!j&&o.mode&1)for(V=o,j=o.child;j!==null;){for(rt=V=j;V!==null;){switch(tt=V,nt=tt.child,tt.tag){case 0:case 11:case 14:case 15:Pj(4,tt,tt.return);break;case 1:Lj(tt,tt.return);var _e=tt.stateNode;if(typeof _e.componentWillUnmount=="function"){a=tt,s=tt.return;try{e=a,_e.props=e.memoizedProps,_e.state=e.memoizedState,_e.componentWillUnmount()}catch(st){W(a,s,st)}}break;case 5:Lj(tt,tt.return);break;case 22:if(tt.memoizedState!==null){gk(rt);continue}}nt!==null?(nt.return=tt,V=nt):gk(rt)}j=j.sibling}e:for(j=null,rt=o;;){if(rt.tag===5){if(j===null){j=rt;try{c=rt.stateNode,b?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(g=rt.stateNode,_=rt.memoizedProps.style,d=_!=null&&_.hasOwnProperty("display")?_.display:null,g.style.display=rb("display",d))}catch(st){W(o,o.return,st)}}}else if(rt.tag===6){if(j===null)try{rt.stateNode.nodeValue=b?"":rt.memoizedProps}catch(st){W(o,o.return,st)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===o)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===o)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===o)break e;j===rt&&(j=null),rt=rt.return}j===rt&&(j=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:ck(e,o),ek(o),a&4&&ak(o);break;case 21:break;default:ck(e,o),ek(o)}}function ek(o){var e=o.flags;if(e&2){try{e:{for(var s=o.return;s!==null;){if(Tj(s)){var a=s;break e}s=s.return}throw Error(p(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(ob(c,""),a.flags&=-33);var h=Uj(o);Wj(o,h,c);break;case 3:case 4:var d=a.stateNode.containerInfo,g=Uj(o);Vj(o,g,d);break;default:throw Error(p(161))}}catch(_){W(o,o.return,_)}o.flags&=-3}e&4096&&(o.flags&=-4097)}function hk(o,e,s){V=o,ik(o)}function ik(o,e,s){for(var a=(o.mode&1)!==0;V!==null;){var c=V,h=c.child;if(c.tag===22&&a){var d=c.memoizedState!==null||Jj;if(!d){var g=c.alternate,_=g!==null&&g.memoizedState!==null||U;g=Jj;var b=U;if(Jj=d,(U=_)&&!b)for(V=c;V!==null;)d=V,_=d.child,d.tag===22&&d.memoizedState!==null?jk(c):_!==null?(_.return=d,V=_):jk(c);for(;h!==null;)V=h,ik(h),h=h.sibling;V=c,Jj=g,U=b}kk(o)}else c.subtreeFlags&8772&&h!==null?(h.return=c,V=h):kk(o)}}function kk(o){for(;V!==null;){var e=V;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var a=e.stateNode;if(e.flags&4&&!U)if(s===null)a.componentDidMount();else{var c=e.elementType===e.type?s.memoizedProps:Ci(e.type,s.memoizedProps);a.componentDidUpdate(c,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=e.updateQueue;h!==null&&sh(e,h,a);break;case 3:var d=e.updateQueue;if(d!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}sh(e,d,s)}break;case 5:var g=e.stateNode;if(s===null&&e.flags&4){s=g;var _=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&s.focus();break;case"img":_.src&&(s.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var b=e.alternate;if(b!==null){var j=b.memoizedState;if(j!==null){var rt=j.dehydrated;rt!==null&&bd(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch(tt){W(e,e.return,tt)}}if(e===o){V=null;break}if(s=e.sibling,s!==null){s.return=e.return,V=s;break}V=e.return}}function gk(o){for(;V!==null;){var e=V;if(e===o){V=null;break}var s=e.sibling;if(s!==null){s.return=e.return,V=s;break}V=e.return}}function jk(o){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Qj(4,e)}catch(_){W(e,s,_)}break;case 1:var a=e.stateNode;if(typeof a.componentDidMount=="function"){var c=e.return;try{a.componentDidMount()}catch(_){W(e,c,_)}}var h=e.return;try{Rj(e)}catch(_){W(e,h,_)}break;case 5:var d=e.return;try{Rj(e)}catch(_){W(e,d,_)}}}catch(_){W(e,e.return,_)}if(e===o){V=null;break}var g=e.sibling;if(g!==null){g.return=e.return,V=g;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(o){return o.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(o=C,o!==0||(o=window.event,o=o===void 0?16:jd(o.type)),o):1}function gi(o,e,s,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(o,s,a),(!(K&2)||o!==Q)&&(o===Q&&(!(K&2)&&(qk|=s),T===4&&Ck(o,Z)),Dk(o,a),s===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(o,e){var s=o.callbackNode;wc(o,e);var a=uc(o,o===Q?Z:0);if(a===0)s!==null&&bc(s),o.callbackNode=null,o.callbackPriority=0;else if(e=a&-a,o.callbackPriority!==e){if(s!=null&&bc(s),e===1)o.tag===0?ig(Ek.bind(null,o)):hg(Ek.bind(null,o)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(a)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,o))}o.callbackPriority=e,o.callbackNode=s}}function Gk(o,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var s=o.callbackNode;if(Hk()&&o.callbackNode!==s)return null;var a=uc(o,o===Q?Z:0);if(a===0)return null;if(a&30||a&o.expiredLanes||e)e=Ik(o,a);else{e=a;var c=K;K|=2;var h=Jk();(Q!==o||Z!==e)&&(uk=null,Gj=B()+500,Kk(o,e));do try{Lk();break}catch(g){Mk(o,g)}while(!0);$g(),mk.current=h,K=c,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(c=xc(o),c!==0&&(a=c,e=Nk(o,c))),e===1)throw s=pk,Kk(o,0),Ck(o,a),Dk(o,B()),s;if(e===6)Ck(o,a);else{if(c=o.current.alternate,!(a&30)&&!Ok(c)&&(e=Ik(o,a),e===2&&(h=xc(o),h!==0&&(a=h,e=Nk(o,h))),e===1))throw s=pk,Kk(o,0),Ck(o,a),Dk(o,B()),s;switch(o.finishedWork=c,o.finishedLanes=a,e){case 0:case 1:throw Error(p(345));case 2:Pk(o,tk,uk);break;case 3:if(Ck(o,a),(a&130023424)===a&&(e=fk+500-B(),10<e)){if(uc(o,0)!==0)break;if(c=o.suspendedLanes,(c&a)!==a){R(),o.pingedLanes|=o.suspendedLanes&c;break}o.timeoutHandle=Ff(Pk.bind(null,o,tk,uk),e);break}Pk(o,tk,uk);break;case 4:if(Ck(o,a),(a&4194240)===a)break;for(e=o.eventTimes,c=-1;0<a;){var d=31-oc(a);h=1<<d,d=e[d],d>c&&(c=d),a&=~h}if(a=c,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){o.timeoutHandle=Ff(Pk.bind(null,o,tk,uk),a);break}Pk(o,tk,uk);break;case 5:Pk(o,tk,uk);break;default:throw Error(p(329))}}}return Dk(o,B()),o.callbackNode===s?Gk.bind(null,o):null}function Nk(o,e){var s=sk;return o.current.memoizedState.isDehydrated&&(Kk(o,e).flags|=256),o=Ik(o,e),o!==2&&(e=tk,tk=s,e!==null&&Fj(e)),o}function Fj(o){tk===null?tk=o:tk.push.apply(tk,o)}function Ok(o){for(var e=o;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var c=s[a],h=c.getSnapshot;c=c.value;try{if(!He(h(),c))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(o,e){for(e&=~rk,e&=~qk,o.suspendedLanes|=e,o.pingedLanes&=~e,o=o.expirationTimes;0<e;){var s=31-oc(e),a=1<<s;o[s]=-1,e&=~a}}function Ek(o){if(K&6)throw Error(p(327));Hk();var e=uc(o,0);if(!(e&1))return Dk(o,B()),null;var s=Ik(o,e);if(o.tag!==0&&s===2){var a=xc(o);a!==0&&(e=a,s=Nk(o,a))}if(s===1)throw s=pk,Kk(o,0),Ck(o,e),Dk(o,B()),s;if(s===6)throw Error(p(345));return o.finishedWork=o.current.alternate,o.finishedLanes=e,Pk(o,tk,uk),Dk(o,B()),null}function Qk(o,e){var s=K;K|=1;try{return o(e)}finally{K=s,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(o){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var s=ok.transition,a=C;try{if(ok.transition=null,C=1,o)return o()}finally{C=a,ok.transition=s,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(o,e){o.finishedWork=null,o.finishedLanes=0;var s=o.timeoutHandle;if(s!==-1&&(o.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var a=s;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q=o,Y=o=Pg(o.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(s=fh[e],a=s.interleaved,a!==null){s.interleaved=null;var c=a.next,h=s.pending;if(h!==null){var d=h.next;h.next=c,a.next=d}s.pending=a}fh=null}return o}function Mk(o,e){do{var s=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T=1,pk=e,Y=null;break}e:{var h=o,d=s.return,g=s,_=e;if(e=Z,g.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var b=_,j=g,rt=j.tag;if(!(j.mode&1)&&(rt===0||rt===11||rt===15)){var tt=j.alternate;tt?(j.updateQueue=tt.updateQueue,j.memoizedState=tt.memoizedState,j.lanes=tt.lanes):(j.updateQueue=null,j.memoizedState=null)}var nt=Ui(d);if(nt!==null){nt.flags&=-257,Vi(nt,d,g,h,e),nt.mode&1&&Si(h,b,e),e=nt,_=b;var _e=e.updateQueue;if(_e===null){var st=new Set;st.add(_),e.updateQueue=st}else _e.add(_);break e}else{if(!(e&1)){Si(h,b,e),tj();break e}_=Error(p(426))}}else if(I&&g.mode&1){var at=Ui(d);if(at!==null){!(at.flags&65536)&&(at.flags|=256),Vi(at,d,g,h,e),Jg(Ji(_,g));break e}}h=_=Ji(_,g),T!==4&&(T=2),sk===null?sk=[h]:sk.push(h),h=d;do{switch(h.tag){case 3:h.flags|=65536,e&=-e,h.lanes|=e;var ot=Ni(h,_,e);ph(h,ot);break e;case 1:g=_;var it=h.type,$=h.stateNode;if(!(h.flags&128)&&(typeof it.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Ri===null||!Ri.has($)))){h.flags|=65536,e&=-e,h.lanes|=e;var et=Qi(h,g,e);ph(h,et);break e}}h=h.return}while(h!==null)}Sk(s)}catch(lt){e=lt,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(!0)}function Jk(){var o=mk.current;return mk.current=Rh,o===null?Rh:o}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(o,e){var s=K;K|=2;var a=Jk();(Q!==o||Z!==e)&&(uk=null,Kk(o,e));do try{Tk();break}catch(c){Mk(o,c)}while(!0);if($g(),K=s,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(o){var e=Vk(o.alternate,o,fj);o.memoizedProps=o.pendingProps,e===null?Sk(o):Y=e,nk.current=null}function Sk(o){var e=o;do{var s=e.alternate;if(o=e.return,e.flags&32768){if(s=Ij(s,e),s!==null){s.flags&=32767,Y=s;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{T=6,Y=null;return}}else if(s=Ej(s,e,fj),s!==null){Y=s;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=o}while(e!==null);T===0&&(T=5)}function Pk(o,e,s){var a=C,c=ok.transition;try{ok.transition=null,C=1,Wk(o,e,s,a)}finally{ok.transition=c,C=a}return null}function Wk(o,e,s,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));s=o.finishedWork;var c=o.finishedLanes;if(s===null)return null;if(o.finishedWork=null,o.finishedLanes=0,s===o.current)throw Error(p(177));o.callbackNode=null,o.callbackPriority=0;var h=s.lanes|s.childLanes;if(Bc(o,h),o===Q&&(Y=Q=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),h=(s.flags&15990)!==0,s.subtreeFlags&15990||h){h=ok.transition,ok.transition=null;var d=C;C=1;var g=K;K|=4,nk.current=null,Oj(o,s),dk(s,o),Oe(Df),dd=!!Cf,Df=Cf=null,o.current=s,hk(s),dc(),K=g,C=d,ok.transition=h}else o.current=s;if(vk&&(vk=!1,wk=o,xk=c),h=o.pendingLanes,h===0&&(Ri=null),mc(s.stateNode),Dk(o,B()),e!==null)for(a=o.onRecoverableError,s=0;s<e.length;s++)c=e[s],a(c.value,{componentStack:c.stack,digest:c.digest});if(Oi)throw Oi=!1,o=Pi,Pi=null,o;return xk&1&&o.tag!==0&&Hk(),h=o.pendingLanes,h&1?o===zk?yk++:(yk=0,zk=o):yk=0,jg(),null}function Hk(){if(wk!==null){var o=Dc(xk),e=ok.transition,s=C;try{if(ok.transition=null,C=16>o?16:o,wk===null)var a=!1;else{if(o=wk,wk=null,xk=0,K&6)throw Error(p(331));var c=K;for(K|=4,V=o.current;V!==null;){var h=V,d=h.child;if(V.flags&16){var g=h.deletions;if(g!==null){for(var _=0;_<g.length;_++){var b=g[_];for(V=b;V!==null;){var j=V;switch(j.tag){case 0:case 11:case 15:Pj(8,j,h)}var rt=j.child;if(rt!==null)rt.return=j,V=rt;else for(;V!==null;){j=V;var tt=j.sibling,nt=j.return;if(Sj(j),j===b){V=null;break}if(tt!==null){tt.return=nt,V=tt;break}V=nt}}}var _e=h.alternate;if(_e!==null){var st=_e.child;if(st!==null){_e.child=null;do{var at=st.sibling;st.sibling=null,st=at}while(st!==null)}}V=h}}if(h.subtreeFlags&2064&&d!==null)d.return=h,V=d;else e:for(;V!==null;){if(h=V,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Pj(9,h,h.return)}var ot=h.sibling;if(ot!==null){ot.return=h.return,V=ot;break e}V=h.return}}var it=o.current;for(V=it;V!==null;){d=V;var $=d.child;if(d.subtreeFlags&2064&&$!==null)$.return=d,V=$;else e:for(d=it;V!==null;){if(g=V,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Qj(9,g)}}catch(lt){W(g,g.return,lt)}if(g===d){V=null;break e}var et=g.sibling;if(et!==null){et.return=g.return,V=et;break e}V=g.return}}if(K=c,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,o)}catch{}a=!0}return a}finally{C=s,ok.transition=e}}return!1}function Xk(o,e,s){e=Ji(s,e),e=Ni(o,e,1),o=nh(o,e,1),e=R(),o!==null&&(Ac(o,1,e),Dk(o,e))}function W(o,e,s){if(o.tag===3)Xk(o,o,s);else for(;e!==null;){if(e.tag===3){Xk(e,o,s);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){o=Ji(s,o),o=Qi(e,o,1),e=nh(e,o,1),o=R(),e!==null&&(Ac(e,1,o),Dk(e,o));break}}e=e.return}}function Ti(o,e,s){var a=o.pingCache;a!==null&&a.delete(e),e=R(),o.pingedLanes|=o.suspendedLanes&s,Q===o&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(o,0):rk|=s),Dk(o,e)}function Yk(o,e){e===0&&(o.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var s=R();o=ih(o,e),o!==null&&(Ac(o,e,s),Dk(o,s))}function uj(o){var e=o.memoizedState,s=0;e!==null&&(s=e.retryLane),Yk(o,s)}function bk(o,e){var s=0;switch(o.tag){case 13:var a=o.stateNode,c=o.memoizedState;c!==null&&(s=c.retryLane);break;case 19:a=o.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(e),Yk(o,s)}var Vk;Vk=function(o,e,s){if(o!==null)if(o.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(o.lanes&s)&&!(e.flags&128))return dh=!1,yj(o,e,s);dh=!!(o.flags&131072)}else dh=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var a=e.type;ij(o,e),o=e.pendingProps;var c=Yf(e,H.current);ch(e,s),c=Nh(null,e,a,o,c,s);var h=Sh();return e.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(a)?(h=!0,cg(e)):h=!1,e.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,kh(e),c.updater=Ei,e.stateNode=c,c._reactInternals=e,Ii(e,a,o,s),e=jj(null,e,a,!0,h,s)):(e.tag=0,I&&h&&vg(e),Xi(null,e,c,s),e=e.child),e;case 16:a=e.elementType;e:{switch(ij(o,e),o=e.pendingProps,c=a._init,a=c(a._payload),e.type=a,c=e.tag=Zk(a),o=Ci(a,o),c){case 0:e=cj(null,e,a,o,s);break e;case 1:e=hj(null,e,a,o,s);break e;case 11:e=Yi(null,e,a,o,s);break e;case 14:e=$i(null,e,a,Ci(a.type,o),s);break e}throw Error(p(306,a,""))}return e;case 0:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:Ci(a,c),cj(o,e,a,c,s);case 1:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:Ci(a,c),hj(o,e,a,c,s);case 3:e:{if(kj(e),o===null)throw Error(p(387));a=e.pendingProps,h=e.memoizedState,c=h.element,lh(o,e),qh(e,a,null,s);var d=e.memoizedState;if(a=d.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=h,e.memoizedState=h,e.flags&256){c=Ji(Error(p(423)),e),e=lj(o,e,a,s,c);break e}else if(a!==c){c=Ji(Error(p(424)),e),e=lj(o,e,a,s,c);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,s=Vg(e,null,a,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),a===c){e=Zi(o,e,s);break e}Xi(o,e,a,s)}e=e.child}return e;case 5:return Ah(e),o===null&&Eg(e),a=e.type,c=e.pendingProps,h=o!==null?o.memoizedProps:null,d=c.children,Ef(a,c)?d=null:h!==null&&Ef(a,h)&&(e.flags|=32),gj(o,e),Xi(o,e,d,s),e.child;case 6:return o===null&&Eg(e),null;case 13:return oj(o,e,s);case 4:return yh(e,e.stateNode.containerInfo),a=e.pendingProps,o===null?e.child=Ug(e,null,a,s):Xi(o,e,a,s),e.child;case 11:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:Ci(a,c),Yi(o,e,a,c,s);case 7:return Xi(o,e,e.pendingProps,s),e.child;case 8:return Xi(o,e,e.pendingProps.children,s),e.child;case 12:return Xi(o,e,e.pendingProps.children,s),e.child;case 10:e:{if(a=e.type._context,c=e.pendingProps,h=e.memoizedProps,d=c.value,G(Wg,a._currentValue),a._currentValue=d,h!==null)if(He(h.value,d)){if(h.children===c.children&&!Wf.current){e=Zi(o,e,s);break e}}else for(h=e.child,h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){d=h.child;for(var _=g.firstContext;_!==null;){if(_.context===a){if(h.tag===1){_=mh(-1,s&-s),_.tag=2;var b=h.updateQueue;if(b!==null){b=b.shared;var j=b.pending;j===null?_.next=_:(_.next=j.next,j.next=_),b.pending=_}}h.lanes|=s,_=h.alternate,_!==null&&(_.lanes|=s),bh(h.return,s,e),g.lanes|=s;break}_=_.next}}else if(h.tag===10)d=h.type===e.type?null:h.child;else if(h.tag===18){if(d=h.return,d===null)throw Error(p(341));d.lanes|=s,g=d.alternate,g!==null&&(g.lanes|=s),bh(d,s,e),d=h.sibling}else d=h.child;if(d!==null)d.return=h;else for(d=h;d!==null;){if(d===e){d=null;break}if(h=d.sibling,h!==null){h.return=d.return,d=h;break}d=d.return}h=d}Xi(o,e,c.children,s),e=e.child}return e;case 9:return c=e.type,a=e.pendingProps.children,ch(e,s),c=eh(c),a=a(c),e.flags|=1,Xi(o,e,a,s),e.child;case 14:return a=e.type,c=Ci(a,e.pendingProps),c=Ci(a.type,c),$i(o,e,a,c,s);case 15:return bj(o,e,e.type,e.pendingProps,s);case 17:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:Ci(a,c),ij(o,e),e.tag=1,Zf(a)?(o=!0,cg(e)):o=!1,ch(e,s),Gi(e,a,c),Ii(e,a,c,s),jj(null,e,a,!0,o,s);case 19:return xj(o,e,s);case 22:return dj(o,e,s)}throw Error(p(156,e.tag))};function Fk(o,e){return ac(o,e)}function $k(o,e,s,a){this.tag=o,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(o,e,s,a){return new $k(o,e,s,a)}function aj(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Zk(o){if(typeof o=="function")return aj(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Da)return 11;if(o===Ga)return 14}return 2}function Pg(o,e){var s=o.alternate;return s===null?(s=Bg(o.tag,e,o.key,o.mode),s.elementType=o.elementType,s.type=o.type,s.stateNode=o.stateNode,s.alternate=o,o.alternate=s):(s.pendingProps=e,s.type=o.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=o.flags&14680064,s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=o.sibling,s.index=o.index,s.ref=o.ref,s}function Rg(o,e,s,a,c,h){var d=2;if(a=o,typeof o=="function")aj(o)&&(d=1);else if(typeof o=="string")d=5;else e:switch(o){case ya:return Tg(s.children,c,h,e);case za:d=8,c|=8;break;case Aa:return o=Bg(12,s,e,c|2),o.elementType=Aa,o.lanes=h,o;case Ea:return o=Bg(13,s,e,c),o.elementType=Ea,o.lanes=h,o;case Fa:return o=Bg(19,s,e,c),o.elementType=Fa,o.lanes=h,o;case Ia:return pj(s,c,h,e);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,a=null;break e}throw Error(p(130,o==null?o:typeof o,""))}return e=Bg(d,s,e,c),e.elementType=o,e.type=a,e.lanes=h,e}function Tg(o,e,s,a){return o=Bg(7,o,a,e),o.lanes=s,o}function pj(o,e,s,a){return o=Bg(22,o,a,e),o.elementType=Ia,o.lanes=s,o.stateNode={isHidden:!1},o}function Qg(o,e,s){return o=Bg(6,o,null,e),o.lanes=s,o}function Sg(o,e,s){return e=Bg(4,o.children!==null?o.children:[],o.key,e),e.lanes=s,e.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},e}function al(o,e,s,a,c){this.tag=e,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function bl(o,e,s,a,c,h,d,g,_){return o=new al(o,e,s,g,_),e===1?(e=1,h===!0&&(e|=8)):e=0,h=Bg(3,null,null,e),o.current=h,h.stateNode=o,h.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(h),o}function cl(o,e,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:o,containerInfo:e,implementation:s}}function dl(o){if(!o)return Vf;o=o._reactInternals;e:{if(Vb(o)!==o||o.tag!==1)throw Error(p(170));var e=o;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(o.tag===1){var s=o.type;if(Zf(s))return bg(o,s,e)}return e}function el(o,e,s,a,c,h,d,g,_){return o=bl(s,a,!0,o,c,h,d,g,_),o.context=dl(null),s=o.current,a=R(),c=yi(s),h=mh(a,c),h.callback=e??null,nh(s,h,c),o.current.lanes=c,Ac(o,c,a),Dk(o,a),o}function fl(o,e,s,a){var c=e.current,h=R(),d=yi(c);return s=dl(s),e.context===null?e.context=s:e.pendingContext=s,e=mh(h,d),e.payload={element:o},a=a===void 0?null:a,a!==null&&(e.callback=a),o=nh(c,e,d),o!==null&&(gi(o,c,d,h),oh(o,c,d)),d}function gl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function hl(o,e){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var s=o.retryLane;o.retryLane=s!==0&&s<e?s:e}}function il(o,e){hl(o,e),(o=o.alternate)&&hl(o,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(o){console.error(o)};function ll(o){this._internalRoot=o}ml.prototype.render=ll.prototype.render=function(o){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(o,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var e=o.containerInfo;Rk(function(){fl(null,o,null,null)}),e[uf]=null}};function ml(o){this._internalRoot=o}ml.prototype.unstable_scheduleHydration=function(o){if(o){var e=Hc();o={blockedOn:null,target:o,priority:e};for(var s=0;s<Qc.length&&e!==0&&e<Qc[s].priority;s++);Qc.splice(s,0,o),s===0&&Vc(o)}};function nl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function ol(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(o,e,s,a,c){if(c){if(typeof a=="function"){var h=a;a=function(){var b=gl(d);h.call(b)}}var d=el(e,a,o,0,null,!1,!1,"",pl);return o._reactRootContainer=d,o[uf]=d.current,sf(o.nodeType===8?o.parentNode:o),Rk(),d}for(;c=o.lastChild;)o.removeChild(c);if(typeof a=="function"){var g=a;a=function(){var b=gl(_);g.call(b)}}var _=bl(o,0,!1,null,null,!1,!1,"",pl);return o._reactRootContainer=_,o[uf]=_.current,sf(o.nodeType===8?o.parentNode:o),Rk(function(){fl(e,_,s,a)}),_}function rl(o,e,s,a,c){var h=s._reactRootContainer;if(h){var d=h;if(typeof c=="function"){var g=c;c=function(){var _=gl(d);g.call(_)}}fl(e,d,o,c)}else d=ql(s,e,o,c,a);return gl(d)}Ec=function(o){switch(o.tag){case 3:var e=o.stateNode;if(e.current.memoizedState.isDehydrated){var s=tc(e.pendingLanes);s!==0&&(Cc(e,s|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(o,1);if(a!==null){var c=R();gi(a,o,1,c)}}),il(o,1)}};Fc=function(o){if(o.tag===13){var e=ih(o,134217728);if(e!==null){var s=R();gi(e,o,134217728,s)}il(o,134217728)}};Gc=function(o){if(o.tag===13){var e=yi(o),s=ih(o,e);if(s!==null){var a=R();gi(s,o,e,a)}il(o,e)}};Hc=function(){return C};Ic=function(o,e){var s=C;try{return C=o,e()}finally{C=s}};yb=function(o,e,s){switch(e){case"input":if(bb(o,s),e=s.name,s.type==="radio"&&e!=null){for(s=o;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var a=s[e];if(a!==o&&a.form===o.form){var c=Db(a);if(!c)throw Error(p(90));Wa(a),bb(a,c)}}}break;case"textarea":ib(o,s);break;case"select":e=s.value,e!=null&&fb(o,!!s.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb(o),o===null?null:o.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(o,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(o,e,null,s)};reactDom_production_min.createRoot=function(o,e){if(!nl(o))throw Error(p(299));var s=!1,a="",c=kl;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(c=e.onRecoverableError)),e=bl(o,1,!1,null,null,s,!1,a,c),o[uf]=e.current,sf(o.nodeType===8?o.parentNode:o),new ll(e)};reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var e=o._reactInternals;if(e===void 0)throw typeof o.render=="function"?Error(p(188)):(o=Object.keys(o).join(","),Error(p(268,o)));return o=Zb(e),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o){return Rk(o)};reactDom_production_min.hydrate=function(o,e,s){if(!ol(e))throw Error(p(200));return rl(null,o,e,!0,s)};reactDom_production_min.hydrateRoot=function(o,e,s){if(!nl(o))throw Error(p(405));var a=s!=null&&s.hydratedSources||null,c=!1,h="",d=kl;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),e=el(e,null,o,1,s??null,c,!1,h,d),o[uf]=e.current,sf(o),a)for(o=0;o<a.length;o++)s=a[o],c=s._getVersion,c=c(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,c]:e.mutableSourceEagerHydrationData.push(s,c);return new ml(e)};reactDom_production_min.render=function(o,e,s){if(!ol(e))throw Error(p(200));return rl(null,o,e,!1,s)};reactDom_production_min.unmountComponentAtNode=function(o){if(!ol(o))throw Error(p(40));return o._reactRootContainer?(Rk(function(){rl(null,null,o,!1,function(){o._reactRootContainer=null,o[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,e,s,a){if(!ol(s))throw Error(p(200));if(o==null||o._reactInternals===void 0)throw Error(p(38));return rl(o,e,s,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(o){console.error(o)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;var lib$1={exports:{}},_FullInternals={},_CoreInternals={},Global={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o._registerNode=o.Konva=o.glob=void 0;const e=Math.PI/180;function s(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}o.glob=typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},o.Konva={_global:o.glob,version:"9.3.22",isBrowser:s(),isUnminified:/param/.test((function(c){}).toString()),dblClickWindow:400,getAngle(c){return o.Konva.angleDeg?c*e:c},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return o.Konva.DD.isDragging},isTransforming(){var c;return(c=o.Konva.Transformer)===null||c===void 0?void 0:c.isTransforming()},isDragReady(){return!!o.Konva.DD.node},releaseCanvasOnDestroy:!0,document:o.glob.document,_injectGlobal(c){o.glob.Konva=c}};const a=c=>{o.Konva[c.prototype.getClassName()]=c};o._registerNode=a,o.Konva._injectGlobal(o.Konva)})(Global);var Util={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Util=o.Transform=void 0;const e=Global;class s{constructor(et=[1,0,0,1,0,0]){this.dirty=!1,this.m=et&&et.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new s(this.m)}copyInto(et){et.m[0]=this.m[0],et.m[1]=this.m[1],et.m[2]=this.m[2],et.m[3]=this.m[3],et.m[4]=this.m[4],et.m[5]=this.m[5]}point(et){const lt=this.m;return{x:lt[0]*et.x+lt[2]*et.y+lt[4],y:lt[1]*et.x+lt[3]*et.y+lt[5]}}translate(et,lt){return this.m[4]+=this.m[0]*et+this.m[2]*lt,this.m[5]+=this.m[1]*et+this.m[3]*lt,this}scale(et,lt){return this.m[0]*=et,this.m[1]*=et,this.m[2]*=lt,this.m[3]*=lt,this}rotate(et){const lt=Math.cos(et),ut=Math.sin(et),dt=this.m[0]*lt+this.m[2]*ut,ct=this.m[1]*lt+this.m[3]*ut,pt=this.m[0]*-ut+this.m[2]*lt,ht=this.m[1]*-ut+this.m[3]*lt;return this.m[0]=dt,this.m[1]=ct,this.m[2]=pt,this.m[3]=ht,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(et,lt){const ut=this.m[0]+this.m[2]*lt,dt=this.m[1]+this.m[3]*lt,ct=this.m[2]+this.m[0]*et,pt=this.m[3]+this.m[1]*et;return this.m[0]=ut,this.m[1]=dt,this.m[2]=ct,this.m[3]=pt,this}multiply(et){const lt=this.m[0]*et.m[0]+this.m[2]*et.m[1],ut=this.m[1]*et.m[0]+this.m[3]*et.m[1],dt=this.m[0]*et.m[2]+this.m[2]*et.m[3],ct=this.m[1]*et.m[2]+this.m[3]*et.m[3],pt=this.m[0]*et.m[4]+this.m[2]*et.m[5]+this.m[4],ht=this.m[1]*et.m[4]+this.m[3]*et.m[5]+this.m[5];return this.m[0]=lt,this.m[1]=ut,this.m[2]=dt,this.m[3]=ct,this.m[4]=pt,this.m[5]=ht,this}invert(){const et=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),lt=this.m[3]*et,ut=-this.m[1]*et,dt=-this.m[2]*et,ct=this.m[0]*et,pt=et*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),ht=et*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=lt,this.m[1]=ut,this.m[2]=dt,this.m[3]=ct,this.m[4]=pt,this.m[5]=ht,this}getMatrix(){return this.m}decompose(){const et=this.m[0],lt=this.m[1],ut=this.m[2],dt=this.m[3],ct=this.m[4],pt=this.m[5],ht=et*dt-lt*ut,gt={x:ct,y:pt,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(et!=0||lt!=0){const yt=Math.sqrt(et*et+lt*lt);gt.rotation=lt>0?Math.acos(et/yt):-Math.acos(et/yt),gt.scaleX=yt,gt.scaleY=ht/yt,gt.skewX=(et*ut+lt*dt)/ht,gt.skewY=0}else if(ut!=0||dt!=0){const yt=Math.sqrt(ut*ut+dt*dt);gt.rotation=Math.PI/2-(dt>0?Math.acos(-ut/yt):-Math.acos(ut/yt)),gt.scaleX=ht/yt,gt.scaleY=yt,gt.skewX=0,gt.skewY=(et*ut+lt*dt)/ht}return gt.rotation=o.Util._getRotation(gt.rotation),gt}}o.Transform=s;const a="[object Array]",c="[object Number]",h="[object String]",d="[object Boolean]",g=Math.PI/180,_=180/Math.PI,b="#",j="",rt="0",tt="Konva warning: ",nt="Konva error: ",_e="rgb(",st={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},at=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let ot=[];const it=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function($){setTimeout($,60)};o.Util={_isElement($){return!!($&&$.nodeType==1)},_isFunction($){return!!($&&$.constructor&&$.call&&$.apply)},_isPlainObject($){return!!$&&$.constructor===Object},_isArray($){return Object.prototype.toString.call($)===a},_isNumber($){return Object.prototype.toString.call($)===c&&!isNaN($)&&isFinite($)},_isString($){return Object.prototype.toString.call($)===h},_isBoolean($){return Object.prototype.toString.call($)===d},isObject($){return $ instanceof Object},isValidSelector($){if(typeof $!="string")return!1;const et=$[0];return et==="#"||et==="."||et===et.toUpperCase()},_sign($){return $===0||$>0?1:-1},requestAnimFrame($){ot.push($),ot.length===1&&it(function(){const et=ot;ot=[],et.forEach(function(lt){lt()})})},createCanvasElement(){const $=document.createElement("canvas");try{$.style=$.style||{}}catch{}return $},createImageElement(){return document.createElement("img")},_isInDocument($){for(;$=$.parentNode;)if($==document)return!0;return!1},_urlToImage($,et){const lt=o.Util.createImageElement();lt.onload=function(){et(lt)},lt.src=$},_rgbToHex($,et,lt){return((1<<24)+($<<16)+(et<<8)+lt).toString(16).slice(1)},_hexToRgb($){$=$.replace(b,j);const et=parseInt($,16);return{r:et>>16&255,g:et>>8&255,b:et&255}},getRandomColor(){let $=(Math.random()*16777215<<0).toString(16);for(;$.length<6;)$=rt+$;return b+$},getRGB($){let et;return $ in st?(et=st[$],{r:et[0],g:et[1],b:et[2]}):$[0]===b?this._hexToRgb($.substring(1)):$.substr(0,4)===_e?(et=at.exec($.replace(/ /g,"")),{r:parseInt(et[1],10),g:parseInt(et[2],10),b:parseInt(et[3],10)}):{r:0,g:0,b:0}},colorToRGBA($){return $=$||"black",o.Util._namedColorToRBA($)||o.Util._hex3ColorToRGBA($)||o.Util._hex4ColorToRGBA($)||o.Util._hex6ColorToRGBA($)||o.Util._hex8ColorToRGBA($)||o.Util._rgbColorToRGBA($)||o.Util._rgbaColorToRGBA($)||o.Util._hslColorToRGBA($)},_namedColorToRBA($){const et=st[$.toLowerCase()];return et?{r:et[0],g:et[1],b:et[2],a:1}:null},_rgbColorToRGBA($){if($.indexOf("rgb(")===0){$=$.match(/rgb\(([^)]+)\)/)[1];const et=$.split(/ *, */).map(Number);return{r:et[0],g:et[1],b:et[2],a:1}}},_rgbaColorToRGBA($){if($.indexOf("rgba(")===0){$=$.match(/rgba\(([^)]+)\)/)[1];const et=$.split(/ *, */).map((lt,ut)=>lt.slice(-1)==="%"?ut===3?parseInt(lt)/100:parseInt(lt)/100*255:Number(lt));return{r:et[0],g:et[1],b:et[2],a:et[3]}}},_hex8ColorToRGBA($){if($[0]==="#"&&$.length===9)return{r:parseInt($.slice(1,3),16),g:parseInt($.slice(3,5),16),b:parseInt($.slice(5,7),16),a:parseInt($.slice(7,9),16)/255}},_hex6ColorToRGBA($){if($[0]==="#"&&$.length===7)return{r:parseInt($.slice(1,3),16),g:parseInt($.slice(3,5),16),b:parseInt($.slice(5,7),16),a:1}},_hex4ColorToRGBA($){if($[0]==="#"&&$.length===5)return{r:parseInt($[1]+$[1],16),g:parseInt($[2]+$[2],16),b:parseInt($[3]+$[3],16),a:parseInt($[4]+$[4],16)/255}},_hex3ColorToRGBA($){if($[0]==="#"&&$.length===4)return{r:parseInt($[1]+$[1],16),g:parseInt($[2]+$[2],16),b:parseInt($[3]+$[3],16),a:1}},_hslColorToRGBA($){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test($)){const[et,...lt]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec($),ut=Number(lt[0])/360,dt=Number(lt[1])/100,ct=Number(lt[2])/100;let pt,ht,gt;if(dt===0)return gt=ct*255,{r:Math.round(gt),g:Math.round(gt),b:Math.round(gt),a:1};ct<.5?pt=ct*(1+dt):pt=ct+dt-ct*dt;const yt=2*ct-pt,St=[0,0,0];for(let Et=0;Et<3;Et++)ht=ut+1/3*-(Et-1),ht<0&&ht++,ht>1&&ht--,6*ht<1?gt=yt+(pt-yt)*6*ht:2*ht<1?gt=pt:3*ht<2?gt=yt+(pt-yt)*(2/3-ht)*6:gt=yt,St[Et]=gt*255;return{r:Math.round(St[0]),g:Math.round(St[1]),b:Math.round(St[2]),a:1}}},haveIntersection($,et){return!(et.x>$.x+$.width||et.x+et.width<$.x||et.y>$.y+$.height||et.y+et.height<$.y)},cloneObject($){const et={};for(const lt in $)this._isPlainObject($[lt])?et[lt]=this.cloneObject($[lt]):this._isArray($[lt])?et[lt]=this.cloneArray($[lt]):et[lt]=$[lt];return et},cloneArray($){return $.slice(0)},degToRad($){return $*g},radToDeg($){return $*_},_degToRad($){return o.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),o.Util.degToRad($)},_radToDeg($){return o.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),o.Util.radToDeg($)},_getRotation($){return e.Konva.angleDeg?o.Util.radToDeg($):$},_capitalize($){return $.charAt(0).toUpperCase()+$.slice(1)},throw($){throw new Error(nt+$)},error($){console.error(nt+$)},warn($){e.Konva.showWarnings&&console.warn(tt+$)},each($,et){for(const lt in $)et(lt,$[lt])},_inRange($,et,lt){return et<=$&&$<lt},_getProjectionToSegment($,et,lt,ut,dt,ct){let pt,ht,gt;const yt=($-lt)*($-lt)+(et-ut)*(et-ut);if(yt==0)pt=$,ht=et,gt=(dt-lt)*(dt-lt)+(ct-ut)*(ct-ut);else{const St=((dt-$)*(lt-$)+(ct-et)*(ut-et))/yt;St<0?(pt=$,ht=et,gt=($-dt)*($-dt)+(et-ct)*(et-ct)):St>1?(pt=lt,ht=ut,gt=(lt-dt)*(lt-dt)+(ut-ct)*(ut-ct)):(pt=$+St*(lt-$),ht=et+St*(ut-et),gt=(pt-dt)*(pt-dt)+(ht-ct)*(ht-ct))}return[pt,ht,gt]},_getProjectionToLine($,et,lt){const ut=o.Util.cloneObject($);let dt=Number.MAX_VALUE;return et.forEach(function(ct,pt){if(!lt&&pt===et.length-1)return;const ht=et[(pt+1)%et.length],gt=o.Util._getProjectionToSegment(ct.x,ct.y,ht.x,ht.y,$.x,$.y),yt=gt[0],St=gt[1],Et=gt[2];Et<dt&&(ut.x=yt,ut.y=St,dt=Et)}),ut},_prepareArrayForTween($,et,lt){const ut=[],dt=[];if($.length>et.length){const pt=et;et=$,$=pt}for(let pt=0;pt<$.length;pt+=2)ut.push({x:$[pt],y:$[pt+1]});for(let pt=0;pt<et.length;pt+=2)dt.push({x:et[pt],y:et[pt+1]});const ct=[];return dt.forEach(function(pt){const ht=o.Util._getProjectionToLine(pt,ut,lt);ct.push(ht.x),ct.push(ht.y)}),ct},_prepareToStringify($){let et;$.visitedByCircularReferenceRemoval=!0;for(const lt in $)if($.hasOwnProperty(lt)&&$[lt]&&typeof $[lt]=="object"){if(et=Object.getOwnPropertyDescriptor($,lt),$[lt].visitedByCircularReferenceRemoval||o.Util._isElement($[lt]))if(et.configurable)delete $[lt];else return null;else if(o.Util._prepareToStringify($[lt])===null)if(et.configurable)delete $[lt];else return null}return delete $.visitedByCircularReferenceRemoval,$},_assign($,et){for(const lt in et)$[lt]=et[lt];return $},_getFirstPointerId($){return $.touches?$.changedTouches[0].identifier:$.pointerId||999},releaseCanvas(...$){e.Konva.releaseCanvasOnDestroy&&$.forEach(et=>{et.width=0,et.height=0})},drawRoundedRectPath($,et,lt,ut){let dt=0,ct=0,pt=0,ht=0;typeof ut=="number"?dt=ct=pt=ht=Math.min(ut,et/2,lt/2):(dt=Math.min(ut[0]||0,et/2,lt/2),ct=Math.min(ut[1]||0,et/2,lt/2),ht=Math.min(ut[2]||0,et/2,lt/2),pt=Math.min(ut[3]||0,et/2,lt/2)),$.moveTo(dt,0),$.lineTo(et-ct,0),$.arc(et-ct,ct,ct,Math.PI*3/2,0,!1),$.lineTo(et,lt-ht),$.arc(et-ht,lt-ht,ht,0,Math.PI/2,!1),$.lineTo(pt,lt),$.arc(pt,lt-pt,pt,Math.PI/2,Math.PI,!1),$.lineTo(0,dt),$.arc(dt,dt,dt,Math.PI,Math.PI*3/2,!1)}}})(Util);var Node$1={},Canvas$1={},Context$1={};Object.defineProperty(Context$1,"__esModule",{value:!0});Context$1.HitContext=Context$1.SceneContext=Context$1.Context=void 0;const Util_1$f=Util,Global_1$p=Global;function simplifyArray(o){const e=[],s=o.length,a=Util_1$f.Util;for(let c=0;c<s;c++){let h=o[c];a._isNumber(h)?h=Math.round(h*1e3)/1e3:a._isString(h)||(h=h+""),e.push(h)}return e}const COMMA=",",OPEN_PAREN="(",CLOSE_PAREN=")",OPEN_PAREN_BRACKET="([",CLOSE_BRACKET_PAREN="])",SEMICOLON=";",DOUBLE_PAREN="()",EQUALS="=",CONTEXT_METHODS=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],CONTEXT_PROPERTIES=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],traceArrMax=100;class Context{constructor(e){this.canvas=e,Global_1$p.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,s){let a=this.traceArr,c=a.length,h="",d,g,_,b;for(d=0;d<c;d++)g=a[d],_=g.method,_?(b=g.args,h+=_,e?h+=DOUBLE_PAREN:Util_1$f.Util._isArray(b[0])?h+=OPEN_PAREN_BRACKET+b.join(COMMA)+CLOSE_BRACKET_PAREN:(s&&(b=b.map(j=>typeof j=="number"?Math.floor(j):j)),h+=OPEN_PAREN+b.join(COMMA)+CLOSE_PAREN)):(h+=g.property,e||(h+=EQUALS+g.val)),h+=SEMICOLON;return h}clearTrace(){this.traceArr=[]}_trace(e){let s=this.traceArr,a;s.push(e),a=s.length,a>=traceArrMax&&s.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const s=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,s.getWidth()/s.pixelRatio,s.getHeight()/s.pixelRatio)}_applyLineCap(e){const s=e.attrs.lineCap;s&&this.setAttr("lineCap",s)}_applyOpacity(e){const s=e.getAbsoluteOpacity();s!==1&&this.setAttr("globalAlpha",s)}_applyLineJoin(e){const s=e.attrs.lineJoin;s&&this.setAttr("lineJoin",s)}setAttr(e,s){this._context[e]=s}arc(e,s,a,c,h,d){this._context.arc(e,s,a,c,h,d)}arcTo(e,s,a,c,h){this._context.arcTo(e,s,a,c,h)}beginPath(){this._context.beginPath()}bezierCurveTo(e,s,a,c,h,d){this._context.bezierCurveTo(e,s,a,c,h,d)}clearRect(e,s,a,c){this._context.clearRect(e,s,a,c)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,s){const a=arguments;if(a.length===2)return this._context.createImageData(e,s);if(a.length===1)return this._context.createImageData(e)}createLinearGradient(e,s,a,c){return this._context.createLinearGradient(e,s,a,c)}createPattern(e,s){return this._context.createPattern(e,s)}createRadialGradient(e,s,a,c,h,d){return this._context.createRadialGradient(e,s,a,c,h,d)}drawImage(e,s,a,c,h,d,g,_,b){const j=arguments,rt=this._context;j.length===3?rt.drawImage(e,s,a):j.length===5?rt.drawImage(e,s,a,c,h):j.length===9&&rt.drawImage(e,s,a,c,h,d,g,_,b)}ellipse(e,s,a,c,h,d,g,_){this._context.ellipse(e,s,a,c,h,d,g,_)}isPointInPath(e,s,a,c){return a?this._context.isPointInPath(a,e,s,c):this._context.isPointInPath(e,s,c)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,s,a,c){this._context.fillRect(e,s,a,c)}strokeRect(e,s,a,c){this._context.strokeRect(e,s,a,c)}fillText(e,s,a,c){c?this._context.fillText(e,s,a,c):this._context.fillText(e,s,a)}measureText(e){return this._context.measureText(e)}getImageData(e,s,a,c){return this._context.getImageData(e,s,a,c)}lineTo(e,s){this._context.lineTo(e,s)}moveTo(e,s){this._context.moveTo(e,s)}rect(e,s,a,c){this._context.rect(e,s,a,c)}roundRect(e,s,a,c,h){this._context.roundRect(e,s,a,c,h)}putImageData(e,s,a){this._context.putImageData(e,s,a)}quadraticCurveTo(e,s,a,c){this._context.quadraticCurveTo(e,s,a,c)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,s){this._context.scale(e,s)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,s,a,c,h,d){this._context.setTransform(e,s,a,c,h,d)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,s,a,c){this._context.strokeText(e,s,a,c)}transform(e,s,a,c,h,d){this._context.transform(e,s,a,c,h,d)}translate(e,s){this._context.translate(e,s)}_enableTrace(){let e=this,s=CONTEXT_METHODS.length,a=this.setAttr,c,h;const d=function(g){let _=e[g],b;e[g]=function(){return h=simplifyArray(Array.prototype.slice.call(arguments,0)),b=_.apply(e,arguments),e._trace({method:g,args:h}),b}};for(c=0;c<s;c++)d(CONTEXT_METHODS[c]);e.setAttr=function(){a.apply(e,arguments);const g=arguments[0];let _=arguments[1];(g==="shadowOffsetX"||g==="shadowOffsetY"||g==="shadowBlur")&&(_=_/this.canvas.getPixelRatio()),e._trace({property:g,val:_})}}_applyGlobalCompositeOperation(e){const s=e.attrs.globalCompositeOperation;!s||s==="source-over"||this.setAttr("globalCompositeOperation",s)}}Context$1.Context=Context;CONTEXT_PROPERTIES.forEach(function(o){Object.defineProperty(Context.prototype,o,{get(){return this._context[o]},set(e){this._context[o]=e}})});class SceneContext extends Context{constructor(e,{willReadFrequently:s=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:s})}_fillColor(e){const s=e.fill();this.setAttr("fillStyle",s),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const s=e._getLinearGradient();s&&(this.setAttr("fillStyle",s),e._fillFunc(this))}_fillRadialGradient(e){const s=e._getRadialGradient();s&&(this.setAttr("fillStyle",s),e._fillFunc(this))}_fill(e){const s=e.fill(),a=e.getFillPriority();if(s&&a==="color"){this._fillColor(e);return}const c=e.getFillPatternImage();if(c&&a==="pattern"){this._fillPattern(e);return}const h=e.getFillLinearGradientColorStops();if(h&&a==="linear-gradient"){this._fillLinearGradient(e);return}const d=e.getFillRadialGradientColorStops();if(d&&a==="radial-gradient"){this._fillRadialGradient(e);return}s?this._fillColor(e):c?this._fillPattern(e):h?this._fillLinearGradient(e):d&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const s=e.getStrokeLinearGradientStartPoint(),a=e.getStrokeLinearGradientEndPoint(),c=e.getStrokeLinearGradientColorStops(),h=this.createLinearGradient(s.x,s.y,a.x,a.y);if(c){for(let d=0;d<c.length;d+=2)h.addColorStop(c[d],c[d+1]);this.setAttr("strokeStyle",h)}}_stroke(e){const s=e.dash(),a=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!a){this.save();const h=this.getCanvas().getPixelRatio();this.setTransform(h,0,0,h,0,0)}this._applyLineCap(e),s&&e.dashEnabled()&&(this.setLineDash(s),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),a||this.restore()}}_applyShadow(e){var s,a,c;const h=(s=e.getShadowRGBA())!==null&&s!==void 0?s:"black",d=(a=e.getShadowBlur())!==null&&a!==void 0?a:5,g=(c=e.getShadowOffset())!==null&&c!==void 0?c:{x:0,y:0},_=e.getAbsoluteScale(),b=this.canvas.getPixelRatio(),j=_.x*b,rt=_.y*b;this.setAttr("shadowColor",h),this.setAttr("shadowBlur",d*Math.min(Math.abs(j),Math.abs(rt))),this.setAttr("shadowOffsetX",g.x*j),this.setAttr("shadowOffsetY",g.y*rt)}}Context$1.SceneContext=SceneContext;class HitContext extends Context{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const s=e.getStrokeScaleEnabled();if(!s){this.save();const h=this.getCanvas().getPixelRatio();this.setTransform(h,0,0,h,0,0)}this._applyLineCap(e);const a=e.hitStrokeWidth(),c=a==="auto"?e.strokeWidth():a;this.setAttr("lineWidth",c),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),s||this.restore()}}}Context$1.HitContext=HitContext;Object.defineProperty(Canvas$1,"__esModule",{value:!0});Canvas$1.HitCanvas=Canvas$1.SceneCanvas=Canvas$1.Canvas=void 0;const Util_1$e=Util,Context_1=Context$1,Global_1$o=Global;let _pixelRatio;function getDevicePixelRatio(){if(_pixelRatio)return _pixelRatio;const o=Util_1$e.Util.createCanvasElement(),e=o.getContext("2d");return _pixelRatio=function(){const s=Global_1$o.Konva._global.devicePixelRatio||1,a=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return s/a}(),Util_1$e.Util.releaseCanvas(o),_pixelRatio}class Canvas{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const a=(e||{}).pixelRatio||Global_1$o.Konva.pixelRatio||getDevicePixelRatio();this.pixelRatio=a,this._canvas=Util_1$e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const s=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/s,this.getHeight()/s)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const s=this.pixelRatio;this.getContext()._context.scale(s,s)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const s=this.pixelRatio;this.getContext()._context.scale(s,s)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,s){this.setWidth(e||0),this.setHeight(s||0)}toDataURL(e,s){try{return this._canvas.toDataURL(e,s)}catch{try{return this._canvas.toDataURL()}catch(c){return Util_1$e.Util.error("Unable to get data URL. "+c.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Canvas$1.Canvas=Canvas;class SceneCanvas extends Canvas{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new Context_1.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Canvas$1.SceneCanvas=SceneCanvas;class HitCanvas extends Canvas{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new Context_1.HitContext(this),this.setSize(e.width,e.height)}}Canvas$1.HitCanvas=HitCanvas;var DragAndDrop={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.DD=void 0;const e=Global,s=Util;o.DD={get isDragging(){let a=!1;return o.DD._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(a=!0)}),a},justDragged:!1,get node(){let a;return o.DD._dragElements.forEach(c=>{a=c.node}),a},_dragElements:new Map,_drag(a){const c=[];o.DD._dragElements.forEach((h,d)=>{const{node:g}=h,_=g.getStage();_.setPointersPositions(a),h.pointerId===void 0&&(h.pointerId=s.Util._getFirstPointerId(a));const b=_._changedPointerPositions.find(j=>j.id===h.pointerId);if(b){if(h.dragStatus!=="dragging"){const j=g.dragDistance();if(Math.max(Math.abs(b.x-h.startPointerPos.x),Math.abs(b.y-h.startPointerPos.y))<j||(g.startDrag({evt:a}),!g.isDragging()))return}g._setDragPosition(a,h),c.push(g)}}),c.forEach(h=>{h.fire("dragmove",{type:"dragmove",target:h,evt:a},!0)})},_endDragBefore(a){const c=[];o.DD._dragElements.forEach(h=>{const{node:d}=h,g=d.getStage();if(a&&g.setPointersPositions(a),!g._changedPointerPositions.find(j=>j.id===h.pointerId))return;(h.dragStatus==="dragging"||h.dragStatus==="stopped")&&(o.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,h.dragStatus="stopped");const b=h.node.getLayer()||h.node instanceof e.Konva.Stage&&h.node;b&&c.indexOf(b)===-1&&c.push(b)}),c.forEach(h=>{h.draw()})},_endDragAfter(a){o.DD._dragElements.forEach((c,h)=>{c.dragStatus==="stopped"&&c.node.fire("dragend",{type:"dragend",target:c.node,evt:a},!0),c.dragStatus!=="dragging"&&o.DD._dragElements.delete(h)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",o.DD._endDragBefore,!0),window.addEventListener("touchend",o.DD._endDragBefore,!0),window.addEventListener("touchcancel",o.DD._endDragBefore,!0),window.addEventListener("mousemove",o.DD._drag),window.addEventListener("touchmove",o.DD._drag),window.addEventListener("mouseup",o.DD._endDragAfter,!1),window.addEventListener("touchend",o.DD._endDragAfter,!1),window.addEventListener("touchcancel",o.DD._endDragAfter,!1))})(DragAndDrop);var Factory={},Validators={};Object.defineProperty(Validators,"__esModule",{value:!0});Validators.RGBComponent=RGBComponent;Validators.alphaComponent=alphaComponent;Validators.getNumberValidator=getNumberValidator;Validators.getNumberOrArrayOfNumbersValidator=getNumberOrArrayOfNumbersValidator;Validators.getNumberOrAutoValidator=getNumberOrAutoValidator;Validators.getStringValidator=getStringValidator;Validators.getStringOrGradientValidator=getStringOrGradientValidator;Validators.getFunctionValidator=getFunctionValidator;Validators.getNumberArrayValidator=getNumberArrayValidator;Validators.getBooleanValidator=getBooleanValidator;Validators.getComponentValidator=getComponentValidator;const Global_1$n=Global,Util_1$d=Util;function _formatValue(o){return Util_1$d.Util._isString(o)?'"'+o+'"':Object.prototype.toString.call(o)==="[object Number]"||Util_1$d.Util._isBoolean(o)?o:Object.prototype.toString.call(o)}function RGBComponent(o){return o>255?255:o<0?0:Math.round(o)}function alphaComponent(o){return o>1?1:o<1e-4?1e-4:o}function getNumberValidator(){if(Global_1$n.Konva.isUnminified)return function(o,e){return Util_1$d.Util._isNumber(o)||Util_1$d.Util.warn(_formatValue(o)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),o}}function getNumberOrArrayOfNumbersValidator(o){if(Global_1$n.Konva.isUnminified)return function(e,s){let a=Util_1$d.Util._isNumber(e),c=Util_1$d.Util._isArray(e)&&e.length==o;return!a&&!c&&Util_1$d.Util.warn(_formatValue(e)+' is a not valid value for "'+s+'" attribute. The value should be a number or Array<number>('+o+")"),e}}function getNumberOrAutoValidator(){if(Global_1$n.Konva.isUnminified)return function(o,e){return Util_1$d.Util._isNumber(o)||o==="auto"||Util_1$d.Util.warn(_formatValue(o)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),o}}function getStringValidator(){if(Global_1$n.Konva.isUnminified)return function(o,e){return Util_1$d.Util._isString(o)||Util_1$d.Util.warn(_formatValue(o)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),o}}function getStringOrGradientValidator(){if(Global_1$n.Konva.isUnminified)return function(o,e){const s=Util_1$d.Util._isString(o),a=Object.prototype.toString.call(o)==="[object CanvasGradient]"||o&&o.addColorStop;return s||a||Util_1$d.Util.warn(_formatValue(o)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),o}}function getFunctionValidator(){if(Global_1$n.Konva.isUnminified)return function(o,e){return Util_1$d.Util._isFunction(o)||Util_1$d.Util.warn(_formatValue(o)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),o}}function getNumberArrayValidator(){if(Global_1$n.Konva.isUnminified)return function(o,e){const s=Int8Array?Object.getPrototypeOf(Int8Array):null;return s&&o instanceof s||(Util_1$d.Util._isArray(o)?o.forEach(function(a){Util_1$d.Util._isNumber(a)||Util_1$d.Util.warn('"'+e+'" attribute has non numeric element '+a+". Make sure that all elements are numbers.")}):Util_1$d.Util.warn(_formatValue(o)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),o}}function getBooleanValidator(){if(Global_1$n.Konva.isUnminified)return function(o,e){return o===!0||o===!1||Util_1$d.Util.warn(_formatValue(o)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),o}}function getComponentValidator(o){if(Global_1$n.Konva.isUnminified)return function(e,s){return e==null||Util_1$d.Util.isObject(e)||Util_1$d.Util.warn(_formatValue(e)+' is a not valid value for "'+s+'" attribute. The value should be an object with properties '+o),e}}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Factory=void 0;const e=Util,s=Validators,a="get",c="set";o.Factory={addGetterSetter(h,d,g,_,b){o.Factory.addGetter(h,d,g),o.Factory.addSetter(h,d,_,b),o.Factory.addOverloadedGetterSetter(h,d)},addGetter(h,d,g){const _=a+e.Util._capitalize(d);h.prototype[_]=h.prototype[_]||function(){const b=this.attrs[d];return b===void 0?g:b}},addSetter(h,d,g,_){const b=c+e.Util._capitalize(d);h.prototype[b]||o.Factory.overWriteSetter(h,d,g,_)},overWriteSetter(h,d,g,_){const b=c+e.Util._capitalize(d);h.prototype[b]=function(j){return g&&j!==void 0&&j!==null&&(j=g.call(this,j,d)),this._setAttr(d,j),_&&_.call(this),this}},addComponentsGetterSetter(h,d,g,_,b){const j=g.length,rt=e.Util._capitalize,tt=a+rt(d),nt=c+rt(d);h.prototype[tt]=function(){const st={};for(let at=0;at<j;at++){const ot=g[at];st[ot]=this.getAttr(d+rt(ot))}return st};const _e=(0,s.getComponentValidator)(g);h.prototype[nt]=function(st){const at=this.attrs[d];_&&(st=_.call(this,st,d)),_e&&_e.call(this,st,d);for(const ot in st)st.hasOwnProperty(ot)&&this._setAttr(d+rt(ot),st[ot]);return st||g.forEach(ot=>{this._setAttr(d+rt(ot),void 0)}),this._fireChangeEvent(d,at,st),b&&b.call(this),this},o.Factory.addOverloadedGetterSetter(h,d)},addOverloadedGetterSetter(h,d){const g=e.Util._capitalize(d),_=c+g,b=a+g;h.prototype[d]=function(){return arguments.length?(this[_](arguments[0]),this):this[b]()}},addDeprecatedGetterSetter(h,d,g,_){e.Util.error("Adding deprecated "+d);const b=a+e.Util._capitalize(d),j=d+" property is deprecated and will be removed soon. Look at Konva change log for more information.";h.prototype[b]=function(){e.Util.error(j);const rt=this.attrs[d];return rt===void 0?g:rt},o.Factory.addSetter(h,d,_,function(){e.Util.error(j)}),o.Factory.addOverloadedGetterSetter(h,d)},backCompat(h,d){e.Util.each(d,function(g,_){const b=h.prototype[_],j=a+e.Util._capitalize(g),rt=c+e.Util._capitalize(g);function tt(){b.apply(this,arguments),e.Util.error('"'+g+'" method is deprecated and will be removed soon. Use ""'+_+'" instead.')}h.prototype[g]=tt,h.prototype[j]=tt,h.prototype[rt]=tt})},afterSetFilter(){this._filterUpToDate=!1}}})(Factory);Object.defineProperty(Node$1,"__esModule",{value:!0});Node$1.Node=void 0;const Canvas_1$1=Canvas$1,DragAndDrop_1=DragAndDrop,Factory_1$y=Factory,Global_1$m=Global,Util_1$c=Util,Validators_1$x=Validators,ABSOLUTE_OPACITY="absoluteOpacity",ALL_LISTENERS="allEventListeners",ABSOLUTE_TRANSFORM="absoluteTransform",ABSOLUTE_SCALE="absoluteScale",CANVAS="canvas",CHANGE="Change",CHILDREN="children",KONVA="konva",LISTENING="listening",MOUSEENTER="mouseenter",MOUSELEAVE="mouseleave",POINTERENTER="pointerenter",POINTERLEAVE="pointerleave",TOUCHENTER="touchenter",TOUCHLEAVE="touchleave",SET="set",SHAPE="Shape",SPACE$1=" ",STAGE="stage",TRANSFORM="transform",UPPER_STAGE="Stage",VISIBLE="visible",TRANSFORM_CHANGE_STR$1=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(SPACE$1);let idCounter=1;class Node{constructor(e){this._id=idCounter++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===TRANSFORM||e===ABSOLUTE_TRANSFORM)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,s){let a=this._cache.get(e);return(a===void 0||(e===TRANSFORM||e===ABSOLUTE_TRANSFORM)&&a.dirty===!0)&&(a=s.call(this),this._cache.set(e,a)),a}_calculate(e,s,a){if(!this._attachedDepsListeners.get(e)){const c=s.map(h=>h+"Change.konva").join(SPACE$1);this.on(c,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,a)}_getCanvasCache(){return this._cache.get(CANVAS)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===ABSOLUTE_TRANSFORM&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(CANVAS)){const{scene:e,filter:s,hit:a,buffer:c}=this._cache.get(CANVAS);Util_1$c.Util.releaseCanvas(e,s,a,c),this._cache.delete(CANVAS)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const s=e||{};let a={};(s.x===void 0||s.y===void 0||s.width===void 0||s.height===void 0)&&(a=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let c=Math.ceil(s.width||a.width),h=Math.ceil(s.height||a.height),d=s.pixelRatio,g=s.x===void 0?Math.floor(a.x):s.x,_=s.y===void 0?Math.floor(a.y):s.y,b=s.offset||0,j=s.drawBorder||!1,rt=s.hitCanvasPixelRatio||1;if(!c||!h){Util_1$c.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const tt=Math.abs(Math.round(a.x)-g)>.5?1:0,nt=Math.abs(Math.round(a.y)-_)>.5?1:0;c+=b*2+tt,h+=b*2+nt,g-=b,_-=b;const _e=new Canvas_1$1.SceneCanvas({pixelRatio:d,width:c,height:h}),st=new Canvas_1$1.SceneCanvas({pixelRatio:d,width:0,height:0,willReadFrequently:!0}),at=new Canvas_1$1.HitCanvas({pixelRatio:rt,width:c,height:h}),ot=_e.getContext(),it=at.getContext(),$=new Canvas_1$1.SceneCanvas({width:_e.width/_e.pixelRatio+Math.abs(g),height:_e.height/_e.pixelRatio+Math.abs(_),pixelRatio:_e.pixelRatio}),et=$.getContext();return at.isCache=!0,_e.isCache=!0,this._cache.delete(CANVAS),this._filterUpToDate=!1,s.imageSmoothingEnabled===!1&&(_e.getContext()._context.imageSmoothingEnabled=!1,st.getContext()._context.imageSmoothingEnabled=!1),ot.save(),it.save(),et.save(),ot.translate(-g,-_),it.translate(-g,-_),et.translate(-g,-_),$.x=g,$.y=_,this._isUnderCache=!0,this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this.drawScene(_e,this,$),this.drawHit(at,this),this._isUnderCache=!1,ot.restore(),it.restore(),j&&(ot.save(),ot.beginPath(),ot.rect(0,0,c,h),ot.closePath(),ot.setAttr("strokeStyle","red"),ot.setAttr("lineWidth",5),ot.stroke(),ot.restore()),this._cache.set(CANVAS,{scene:_e,filter:st,hit:at,buffer:$,x:g,y:_}),this._requestDraw(),this}isCached(){return this._cache.has(CANVAS)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,s){const a=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let c=1/0,h=1/0,d=-1/0,g=-1/0;const _=this.getAbsoluteTransform(s);return a.forEach(function(b){const j=_.point(b);c===void 0&&(c=d=j.x,h=g=j.y),c=Math.min(c,j.x),h=Math.min(h,j.y),d=Math.max(d,j.x),g=Math.max(g,j.y)}),{x:c,y:h,width:d-c,height:g-h}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const s=this._getCanvasCache();e.translate(s.x,s.y);const a=this._getCachedSceneCanvas(),c=a.pixelRatio;e.drawImage(a._canvas,0,0,a.width/c,a.height/c),e.restore()}_drawCachedHitCanvas(e){const s=this._getCanvasCache(),a=s.hit;e.save(),e.translate(s.x,s.y),e.drawImage(a._canvas,0,0,a.width/a.pixelRatio,a.height/a.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),s=this._getCanvasCache(),a=s.scene,c=s.filter,h=c.getContext(),d,g,_,b;if(e){if(!this._filterUpToDate){const j=a.pixelRatio;c.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio);try{for(d=e.length,h.clear(),h.drawImage(a._canvas,0,0,a.getWidth()/j,a.getHeight()/j),g=h.getImageData(0,0,c.getWidth(),c.getHeight()),_=0;_<d;_++){if(b=e[_],typeof b!="function"){Util_1$c.Util.error("Filter should be type of function, but got "+typeof b+" instead. Please check correct filters");continue}b.call(this,g),h.putImageData(g,0,0)}}catch(rt){Util_1$c.Util.error("Unable to apply filter. "+rt.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return c}return a}on(e,s){if(this._cache&&this._cache.delete(ALL_LISTENERS),arguments.length===3)return this._delegate.apply(this,arguments);const a=e.split(SPACE$1);for(let c=0;c<a.length;c++){const d=a[c].split("."),g=d[0],_=d[1]||"";this.eventListeners[g]||(this.eventListeners[g]=[]),this.eventListeners[g].push({name:_,handler:s})}return this}off(e,s){let a=(e||"").split(SPACE$1),c=a.length,h,d,g,_,b,j;if(this._cache&&this._cache.delete(ALL_LISTENERS),!e)for(d in this.eventListeners)this._off(d);for(h=0;h<c;h++)if(g=a[h],_=g.split("."),b=_[0],j=_[1],b)this.eventListeners[b]&&this._off(b,j,s);else for(d in this.eventListeners)this._off(d,j,s);return this}dispatchEvent(e){const s={target:this,type:e.type,evt:e};return this.fire(e.type,s),this}addEventListener(e,s){return this.on(e,function(a){s.call(this,a.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,s,a){const c=this;this.on(e,function(h){const d=h.target.findAncestors(s,!0,c);for(let g=0;g<d.length;g++)h=Util_1$c.Util.cloneObject(h),h.currentTarget=d[g],a.call(d[g],h)})}remove(){return this.isDragging()&&this.stopDrag(),DragAndDrop_1.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this._clearSelfAndDescendantCache(STAGE),this._clearSelfAndDescendantCache(VISIBLE),this._clearSelfAndDescendantCache(LISTENING)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const s="get"+Util_1$c.Util._capitalize(e);return Util_1$c.Util._isFunction(this[s])?this[s]():this.attrs[e]}getAncestors(){let e=this.getParent(),s=[];for(;e;)s.push(e),e=e.getParent();return s}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let s,a;if(!e)return this;for(s in e)s!==CHILDREN&&(a=SET+Util_1$c.Util._capitalize(s),Util_1$c.Util._isFunction(this[a])?this[a](e[s]):this._setAttr(s,e[s]))}),this}isListening(){return this._getCache(LISTENING,this._isListening)}_isListening(e){if(!this.listening())return!1;const a=this.getParent();return a&&a!==e&&this!==e?a._isListening(e):!0}isVisible(){return this._getCache(VISIBLE,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const a=this.getParent();return a&&a!==e&&this!==e?a._isVisible(e):!0}shouldDrawHit(e,s=!1){if(e)return this._isVisible(e)&&this._isListening(e);const a=this.getLayer();let c=!1;DragAndDrop_1.DD._dragElements.forEach(d=>{d.dragStatus==="dragging"&&(d.node.nodeType==="Stage"||d.node.getLayer()===a)&&(c=!0)});const h=!s&&!Global_1$m.Konva.hitOnDragEnabled&&(c||Global_1$m.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!h}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),s=this,a=0,c,h,d,g;function _(j){for(c=[],h=j.length,d=0;d<h;d++)g=j[d],a++,g.nodeType!==SHAPE&&(c=c.concat(g.getChildren().slice())),g._id===s._id&&(d=h);c.length>0&&c[0].getDepth()<=e&&_(c)}const b=this.getStage();return s.nodeType!==UPPER_STAGE&&b&&_(b.getChildren()),a}getDepth(){let e=0,s=this.parent;for(;s;)e++,s=s.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const s=e.getPointerPosition();if(!s)return null;const a=this.getAbsoluteTransform().copy();return a.invert(),a.point(s)}getAbsolutePosition(e){let s=!1,a=this.parent;for(;a;){if(a.isCached()){s=!0;break}a=a.parent}s&&!e&&(e=!0);const c=this.getAbsoluteTransform(e).getMatrix(),h=new Util_1$c.Transform,d=this.offset();return h.m=c.slice(),h.translate(d.x,d.y),h.getTranslation()}setAbsolutePosition(e){const{x:s,y:a,...c}=this._clearTransform();this.attrs.x=s,this.attrs.y=a,this._clearCache(TRANSFORM);const h=this._getAbsoluteTransform().copy();return h.invert(),h.translate(e.x,e.y),e={x:this.attrs.x+h.getTranslation().x,y:this.attrs.y+h.getTranslation().y},this._setTransform(c),this.setPosition({x:e.x,y:e.y}),this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this}_setTransform(e){let s;for(s in e)this.attrs[s]=e[s]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let s=e.x,a=e.y,c=this.x(),h=this.y();return s!==void 0&&(c+=s),a!==void 0&&(h+=a),this.setPosition({x:c,y:h}),this}_eachAncestorReverse(e,s){let a=[],c=this.getParent(),h,d;if(!(s&&s._id===this._id)){for(a.unshift(this);c&&(!s||c._id!==s._id);)a.unshift(c),c=c.parent;for(h=a.length,d=0;d<h;d++)e(a[d])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Util_1$c.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,s=this.parent.getChildren().length;return e<s-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Util_1$c.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,s=this.parent.getChildren().length;return e<s-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Util_1$c.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Util_1$c.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Util_1$c.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Util_1$c.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const s=this.index;return this.parent.children.splice(s,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ABSOLUTE_OPACITY,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const s=this.getParent();return s&&!s._isUnderCache&&(e*=s.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),s,a,c,h,d;const g={attrs:{},className:this.getClassName()};for(s in e)a=e[s],d=Util_1$c.Util.isObject(a)&&!Util_1$c.Util._isPlainObject(a)&&!Util_1$c.Util._isArray(a),!d&&(c=typeof this[s]=="function"&&this[s],delete e[s],h=c?c.call(this):null,e[s]=a,h!==a&&(g.attrs[s]=a));return Util_1$c.Util._prepareToStringify(g)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,s,a){const c=[];s&&this._isMatch(e)&&c.push(this);let h=this.parent;for(;h;){if(h===a)return c;h._isMatch(e)&&c.push(h),h=h.parent}return c}isAncestorOf(e){return!1}findAncestor(e,s,a){return this.findAncestors(e,s,a)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let s=e.replace(/ /g,"").split(","),a=s.length,c,h;for(c=0;c<a;c++)if(h=s[c],Util_1$c.Util.isValidSelector(h)||(Util_1$c.Util.warn('Selector "'+h+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Util_1$c.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Util_1$c.Util.warn("Konva is awesome, right?")),h.charAt(0)==="#"){if(this.id()===h.slice(1))return!0}else if(h.charAt(0)==="."){if(this.hasName(h.slice(1)))return!0}else if(this.className===h||this.nodeType===h)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(STAGE,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,s={},a){return s.target=s.target||this,a?this._fireAndBubble(e,s):this._fire(e,s),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(ABSOLUTE_TRANSFORM,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let s;if(e)return s=new Util_1$c.Transform,this._eachAncestorReverse(function(a){const c=a.transformsEnabled();c==="all"?s.multiply(a.getTransform()):c==="position"&&s.translate(a.x()-a.offsetX(),a.y()-a.offsetY())},e),s;{s=this._cache.get(ABSOLUTE_TRANSFORM)||new Util_1$c.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(s):s.reset();const a=this.transformsEnabled();if(a==="all")s.multiply(this.getTransform());else if(a==="position"){const c=this.attrs.x||0,h=this.attrs.y||0,d=this.attrs.offsetX||0,g=this.attrs.offsetY||0;s.translate(c-d,h-g)}return s.dirty=!1,s}}getAbsoluteScale(e){let s=this;for(;s;)s._isUnderCache&&(e=s),s=s.getParent();const c=this.getAbsoluteTransform(e).decompose();return{x:c.scaleX,y:c.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(TRANSFORM,this._getTransform)}_getTransform(){var e,s;const a=this._cache.get(TRANSFORM)||new Util_1$c.Transform;a.reset();const c=this.x(),h=this.y(),d=Global_1$m.Konva.getAngle(this.rotation()),g=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,_=(s=this.attrs.scaleY)!==null&&s!==void 0?s:1,b=this.attrs.skewX||0,j=this.attrs.skewY||0,rt=this.attrs.offsetX||0,tt=this.attrs.offsetY||0;return(c!==0||h!==0)&&a.translate(c,h),d!==0&&a.rotate(d),(b!==0||j!==0)&&a.skew(b,j),(g!==1||_!==1)&&a.scale(g,_),(rt!==0||tt!==0)&&a.translate(-1*rt,-1*tt),a.dirty=!1,a}clone(e){let s=Util_1$c.Util.cloneObject(this.attrs),a,c,h,d,g;for(a in e)s[a]=e[a];const _=new this.constructor(s);for(a in this.eventListeners)for(c=this.eventListeners[a],h=c.length,d=0;d<h;d++)g=c[d],g.name.indexOf(KONVA)<0&&(_.eventListeners[a]||(_.eventListeners[a]=[]),_.eventListeners[a].push(g));return _}_toKonvaCanvas(e){e=e||{};const s=this.getClientRect(),a=this.getStage(),c=e.x!==void 0?e.x:Math.floor(s.x),h=e.y!==void 0?e.y:Math.floor(s.y),d=e.pixelRatio||1,g=new Canvas_1$1.SceneCanvas({width:e.width||Math.ceil(s.width)||(a?a.width():0),height:e.height||Math.ceil(s.height)||(a?a.height():0),pixelRatio:d}),_=g.getContext(),b=new Canvas_1$1.SceneCanvas({width:g.width/g.pixelRatio+Math.abs(c),height:g.height/g.pixelRatio+Math.abs(h),pixelRatio:g.pixelRatio});return e.imageSmoothingEnabled===!1&&(_._context.imageSmoothingEnabled=!1),_.save(),(c||h)&&_.translate(-1*c,-1*h),this.drawScene(g,void 0,b),_.restore(),g}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const s=e.mimeType||null,a=e.quality||null,c=this._toKonvaCanvas(e).toDataURL(s,a);return e.callback&&e.callback(c),c}toImage(e){return new Promise((s,a)=>{try{const c=e==null?void 0:e.callback;c&&delete e.callback,Util_1$c.Util._urlToImage(this.toDataURL(e),function(h){s(h),c==null||c(h)})}catch(c){a(c)}})}toBlob(e){return new Promise((s,a)=>{try{const c=e==null?void 0:e.callback;c&&delete e.callback,this.toCanvas(e).toBlob(h=>{s(h),c==null||c(h)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(c){a(c)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Global_1$m.Konva.dragDistance}_off(e,s,a){let c=this.eventListeners[e],h,d,g;for(h=0;h<c.length;h++)if(d=c[h].name,g=c[h].handler,(d!=="konva"||s==="konva")&&(!s||d===s)&&(!a||a===g)){if(c.splice(h,1),c.length===0){delete this.eventListeners[e];break}h--}}_fireChangeEvent(e,s,a){this._fire(e+CHANGE,{oldVal:s,newVal:a})}addName(e){if(!this.hasName(e)){const s=this.name(),a=s?s+" "+e:e;this.name(a)}return this}hasName(e){if(!e)return!1;const s=this.name();return s?(s||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const s=(this.name()||"").split(/\s/g),a=s.indexOf(e);return a!==-1&&(s.splice(a,1),this.name(s.join(" "))),this}setAttr(e,s){const a=this[SET+Util_1$c.Util._capitalize(e)];return Util_1$c.Util._isFunction(a)?a.call(this,s):this._setAttr(e,s),this}_requestDraw(){if(Global_1$m.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,s){const a=this.attrs[e];a===s&&!Util_1$c.Util.isObject(s)||(s==null?delete this.attrs[e]:this.attrs[e]=s,this._shouldFireChangeEvents&&this._fireChangeEvent(e,a,s),this._requestDraw())}_setComponentAttr(e,s,a){let c;a!==void 0&&(c=this.attrs[e],c||(this.attrs[e]=this.getAttr(e)),this.attrs[e][s]=a,this._fireChangeEvent(e,c,a))}_fireAndBubble(e,s,a){s&&this.nodeType===SHAPE&&(s.target=this);const c=[MOUSEENTER,MOUSELEAVE,POINTERENTER,POINTERLEAVE,TOUCHENTER,TOUCHLEAVE];if(!(c.indexOf(e)!==-1&&(a&&(this===a||this.isAncestorOf&&this.isAncestorOf(a))||this.nodeType==="Stage"&&!a))){this._fire(e,s);const d=c.indexOf(e)!==-1&&a&&a.isAncestorOf&&a.isAncestorOf(this)&&!a.isAncestorOf(this.parent);(s&&!s.cancelBubble||!s)&&this.parent&&this.parent.isListening()&&!d&&(a&&a.parent?this._fireAndBubble.call(this.parent,e,s,a):this._fireAndBubble.call(this.parent,e,s))}}_getProtoListeners(e){var s,a,c;const h=(s=this._cache.get(ALL_LISTENERS))!==null&&s!==void 0?s:{};let d=h==null?void 0:h[e];if(d===void 0){d=[];let g=Object.getPrototypeOf(this);for(;g;){const _=(c=(a=g.eventListeners)===null||a===void 0?void 0:a[e])!==null&&c!==void 0?c:[];d.push(..._),g=Object.getPrototypeOf(g)}h[e]=d,this._cache.set(ALL_LISTENERS,h)}return d}_fire(e,s){s=s||{},s.currentTarget=this,s.type=e;const a=this._getProtoListeners(e);if(a)for(let h=0;h<a.length;h++)a[h].handler.call(this,s);const c=this.eventListeners[e];if(c)for(let h=0;h<c.length;h++)c[h].handler.call(this,s)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const s=e?e.pointerId:void 0,a=this.getStage(),c=this.getAbsolutePosition();if(!a)return;const h=a._getPointerById(s)||a._changedPointerPositions[0]||c;DragAndDrop_1.DD._dragElements.set(this._id,{node:this,startPointerPos:h,offset:{x:h.x-c.x,y:h.y-c.y},dragStatus:"ready",pointerId:s})}startDrag(e,s=!0){DragAndDrop_1.DD._dragElements.has(this._id)||this._createDragElement(e);const a=DragAndDrop_1.DD._dragElements.get(this._id);a.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},s)}_setDragPosition(e,s){const a=this.getStage()._getPointerById(s.pointerId);if(!a)return;let c={x:a.x-s.offset.x,y:a.y-s.offset.y};const h=this.dragBoundFunc();if(h!==void 0){const d=h.call(this,c,e);d?c=d:Util_1$c.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==c.x||this._lastPos.y!==c.y)&&(this.setAbsolutePosition(c),this._requestDraw()),this._lastPos=c}stopDrag(e){const s=DragAndDrop_1.DD._dragElements.get(this._id);s&&(s.dragStatus="stopped"),DragAndDrop_1.DD._endDragBefore(e),DragAndDrop_1.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=DragAndDrop_1.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||Global_1$m.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let c=!1;DragAndDrop_1.DD._dragElements.forEach(h=>{this.isAncestorOf(h.node)&&(c=!0)}),c||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const s=DragAndDrop_1.DD._dragElements.get(this._id),a=s&&s.dragStatus==="dragging",c=s&&s.dragStatus==="ready";a?this.stopDrag():c&&DragAndDrop_1.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const s=this.getStage();if(!s)return!1;const a={x:-e.x,y:-e.y,width:s.width()+2*e.x,height:s.height()+2*e.y};return Util_1$c.Util.haveIntersection(a,this.getClientRect())}static create(e,s){return Util_1$c.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,s)}static _createNode(e,s){let a=Node.prototype.getClassName.call(e),c=e.children,h,d,g;s&&(e.attrs.container=s),Global_1$m.Konva[a]||(Util_1$c.Util.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape");const _=Global_1$m.Konva[a];if(h=new _(e.attrs),c)for(d=c.length,g=0;g<d;g++)h.add(Node._createNode(c[g]));return h}}Node$1.Node=Node;Node.prototype.nodeType="Node";Node.prototype._attrsAffectingSize=[];Node.prototype.eventListeners={};Node.prototype.on.call(Node.prototype,TRANSFORM_CHANGE_STR$1,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)});Node.prototype.on.call(Node.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(VISIBLE)});Node.prototype.on.call(Node.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(LISTENING)});Node.prototype.on.call(Node.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY)});const addGetterSetter=Factory_1$y.Factory.addGetterSetter;addGetterSetter(Node,"zIndex");addGetterSetter(Node,"absolutePosition");addGetterSetter(Node,"position");addGetterSetter(Node,"x",0,(0,Validators_1$x.getNumberValidator)());addGetterSetter(Node,"y",0,(0,Validators_1$x.getNumberValidator)());addGetterSetter(Node,"globalCompositeOperation","source-over",(0,Validators_1$x.getStringValidator)());addGetterSetter(Node,"opacity",1,(0,Validators_1$x.getNumberValidator)());addGetterSetter(Node,"name","",(0,Validators_1$x.getStringValidator)());addGetterSetter(Node,"id","",(0,Validators_1$x.getStringValidator)());addGetterSetter(Node,"rotation",0,(0,Validators_1$x.getNumberValidator)());Factory_1$y.Factory.addComponentsGetterSetter(Node,"scale",["x","y"]);addGetterSetter(Node,"scaleX",1,(0,Validators_1$x.getNumberValidator)());addGetterSetter(Node,"scaleY",1,(0,Validators_1$x.getNumberValidator)());Factory_1$y.Factory.addComponentsGetterSetter(Node,"skew",["x","y"]);addGetterSetter(Node,"skewX",0,(0,Validators_1$x.getNumberValidator)());addGetterSetter(Node,"skewY",0,(0,Validators_1$x.getNumberValidator)());Factory_1$y.Factory.addComponentsGetterSetter(Node,"offset",["x","y"]);addGetterSetter(Node,"offsetX",0,(0,Validators_1$x.getNumberValidator)());addGetterSetter(Node,"offsetY",0,(0,Validators_1$x.getNumberValidator)());addGetterSetter(Node,"dragDistance",void 0,(0,Validators_1$x.getNumberValidator)());addGetterSetter(Node,"width",0,(0,Validators_1$x.getNumberValidator)());addGetterSetter(Node,"height",0,(0,Validators_1$x.getNumberValidator)());addGetterSetter(Node,"listening",!0,(0,Validators_1$x.getBooleanValidator)());addGetterSetter(Node,"preventDefault",!0,(0,Validators_1$x.getBooleanValidator)());addGetterSetter(Node,"filters",void 0,function(o){return this._filterUpToDate=!1,o});addGetterSetter(Node,"visible",!0,(0,Validators_1$x.getBooleanValidator)());addGetterSetter(Node,"transformsEnabled","all",(0,Validators_1$x.getStringValidator)());addGetterSetter(Node,"size");addGetterSetter(Node,"dragBoundFunc");addGetterSetter(Node,"draggable",!1,(0,Validators_1$x.getBooleanValidator)());Factory_1$y.Factory.backCompat(Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Container$1={};Object.defineProperty(Container$1,"__esModule",{value:!0});Container$1.Container=void 0;const Factory_1$x=Factory,Node_1$h=Node$1,Validators_1$w=Validators;class Container extends Node_1$h.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){const s=this.children||[];return e?s.filter(e):s}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let a=0;a<e.length;a++)this.add(e[a]);return this}const s=e[0];return s.getParent()?(s.moveTo(this),this):(this._validateAdd(s),s.index=this.getChildren().length,s.parent=this,s._clearCaches(),this.getChildren().push(s),this._fire("add",{child:s}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const s=this._generalFind(e,!0);return s.length>0?s[0]:void 0}_generalFind(e,s){const a=[];return this._descendants(c=>{const h=c._isMatch(e);return h&&a.push(c),!!(h&&s)}),a}_descendants(e){let s=!1;const a=this.getChildren();for(const c of a){if(s=e(c),s)return!0;if(c.hasChildren()&&(s=c._descendants(e),s))return!0}return!1}toObject(){const e=Node_1$h.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(s=>{e.children.push(s.toObject())}),e}isAncestorOf(e){let s=e.getParent();for(;s;){if(s._id===this._id)return!0;s=s.getParent()}return!1}clone(e){const s=Node_1$h.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(a){s.add(a.clone())}),s}getAllIntersections(e){const s=[];return this.find("Shape").forEach(a=>{a.isVisible()&&a.intersects(e)&&s.push(a)}),s}_clearSelfAndDescendantCache(e){var s;super._clearSelfAndDescendantCache(e),!this.isCached()&&((s=this.children)===null||s===void 0||s.forEach(function(a){a._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(s,a){s.index=a}),this._requestDraw()}drawScene(e,s,a){const c=this.getLayer(),h=e||c&&c.getCanvas(),d=h&&h.getContext(),g=this._getCanvasCache(),_=g&&g.scene,b=h&&h.isCache;if(!this.isVisible()&&!b)return this;if(_){d.save();const j=this.getAbsoluteTransform(s).getMatrix();d.transform(j[0],j[1],j[2],j[3],j[4],j[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",h,s,a);return this}drawHit(e,s){if(!this.shouldDrawHit(s))return this;const a=this.getLayer(),c=e||a&&a.hitCanvas,h=c&&c.getContext(),d=this._getCanvasCache();if(d&&d.hit){h.save();const _=this.getAbsoluteTransform(s).getMatrix();h.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedHitCanvas(h),h.restore()}else this._drawChildren("drawHit",c,s);return this}_drawChildren(e,s,a,c){var h;const d=s&&s.getContext(),g=this.clipWidth(),_=this.clipHeight(),b=this.clipFunc(),j=typeof g=="number"&&typeof _=="number"||b,rt=a===this;if(j){d.save();const nt=this.getAbsoluteTransform(a);let _e=nt.getMatrix();d.transform(_e[0],_e[1],_e[2],_e[3],_e[4],_e[5]),d.beginPath();let st;if(b)st=b.call(this,d,this);else{const at=this.clipX(),ot=this.clipY();d.rect(at||0,ot||0,g,_)}d.clip.apply(d,st),_e=nt.copy().invert().getMatrix(),d.transform(_e[0],_e[1],_e[2],_e[3],_e[4],_e[5])}const tt=!rt&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";tt&&(d.save(),d._applyGlobalCompositeOperation(this)),(h=this.children)===null||h===void 0||h.forEach(function(nt){nt[e](s,a,c)}),tt&&d.restore(),j&&d.restore()}getClientRect(e={}){var s;const a=e.skipTransform,c=e.relativeTo;let h,d,g,_,b={x:1/0,y:1/0,width:0,height:0};const j=this;(s=this.children)===null||s===void 0||s.forEach(function(nt){if(!nt.visible())return;const _e=nt.getClientRect({relativeTo:j,skipShadow:e.skipShadow,skipStroke:e.skipStroke});_e.width===0&&_e.height===0||(h===void 0?(h=_e.x,d=_e.y,g=_e.x+_e.width,_=_e.y+_e.height):(h=Math.min(h,_e.x),d=Math.min(d,_e.y),g=Math.max(g,_e.x+_e.width),_=Math.max(_,_e.y+_e.height)))});const rt=this.find("Shape");let tt=!1;for(let nt=0;nt<rt.length;nt++)if(rt[nt]._isVisible(this)){tt=!0;break}return tt&&h!==void 0?b={x:h,y:d,width:g-h,height:_-d}:b={x:0,y:0,width:0,height:0},a?b:this._transformedRect(b,c)}}Container$1.Container=Container;Factory_1$x.Factory.addComponentsGetterSetter(Container,"clip",["x","y","width","height"]);Factory_1$x.Factory.addGetterSetter(Container,"clipX",void 0,(0,Validators_1$w.getNumberValidator)());Factory_1$x.Factory.addGetterSetter(Container,"clipY",void 0,(0,Validators_1$w.getNumberValidator)());Factory_1$x.Factory.addGetterSetter(Container,"clipWidth",void 0,(0,Validators_1$w.getNumberValidator)());Factory_1$x.Factory.addGetterSetter(Container,"clipHeight",void 0,(0,Validators_1$w.getNumberValidator)());Factory_1$x.Factory.addGetterSetter(Container,"clipFunc");var Stage={},PointerEvents={};Object.defineProperty(PointerEvents,"__esModule",{value:!0});PointerEvents.getCapturedShape=getCapturedShape;PointerEvents.createEvent=createEvent;PointerEvents.hasPointerCapture=hasPointerCapture;PointerEvents.setPointerCapture=setPointerCapture;PointerEvents.releaseCapture=releaseCapture;const Global_1$l=Global,Captures=new Map,SUPPORT_POINTER_EVENTS=Global_1$l.Konva._global.PointerEvent!==void 0;function getCapturedShape(o){return Captures.get(o)}function createEvent(o){return{evt:o,pointerId:o.pointerId}}function hasPointerCapture(o,e){return Captures.get(o)===e}function setPointerCapture(o,e){releaseCapture(o),e.getStage()&&(Captures.set(o,e),SUPPORT_POINTER_EVENTS&&e._fire("gotpointercapture",createEvent(new PointerEvent("gotpointercapture"))))}function releaseCapture(o,e){const s=Captures.get(o);if(!s)return;const a=s.getStage();a&&a.content,Captures.delete(o),SUPPORT_POINTER_EVENTS&&s._fire("lostpointercapture",createEvent(new PointerEvent("lostpointercapture")))}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Stage=o.stages=void 0;const e=Util,s=Factory,a=Container$1,c=Global,h=Canvas$1,d=DragAndDrop,g=Global,_=PointerEvents,b="Stage",j="string",rt="px",tt="mouseout",nt="mouseleave",_e="mouseover",st="mouseenter",at="mousemove",ot="mousedown",it="mouseup",$="pointermove",et="pointerdown",lt="pointerup",ut="pointercancel",dt="lostpointercapture",ct="pointerout",pt="pointerleave",ht="pointerover",gt="pointerenter",yt="contextmenu",St="touchstart",Et="touchend",kt="touchmove",Pt="touchcancel",bt="wheel",mt=5,Ct=[[st,"_pointerenter"],[ot,"_pointerdown"],[at,"_pointermove"],[it,"_pointerup"],[nt,"_pointerleave"],[St,"_pointerdown"],[kt,"_pointermove"],[Et,"_pointerup"],[Pt,"_pointercancel"],[_e,"_pointerover"],[bt,"_wheel"],[yt,"_contextmenu"],[et,"_pointerdown"],[$,"_pointermove"],[lt,"_pointerup"],[ut,"_pointercancel"],[pt,"_pointerleave"],[dt,"_lostpointercapture"]],vt={mouse:{[ct]:tt,[pt]:nt,[ht]:_e,[gt]:st,[$]:at,[et]:ot,[lt]:it,[ut]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[ct]:"touchout",[pt]:"touchleave",[ht]:"touchover",[gt]:"touchenter",[$]:kt,[et]:St,[lt]:Et,[ut]:Pt,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[ct]:ct,[pt]:pt,[ht]:ht,[gt]:gt,[$]:$,[et]:et,[lt]:lt,[ut]:ut,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},wt=Ft=>Ft.indexOf("pointer")>=0?"pointer":Ft.indexOf("touch")>=0?"touch":"mouse",xt=Ft=>{const ft=wt(Ft);if(ft==="pointer")return c.Konva.pointerEventsEnabled&&vt.pointer;if(ft==="touch")return vt.touch;if(ft==="mouse")return vt.mouse};function $t(Ft={}){return(Ft.clipFunc||Ft.clipWidth||Ft.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Ft}const Ot="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";o.stages=[];class Mt extends a.Container{constructor(ft){super($t(ft)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),o.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{$t(this.attrs)}),this._checkVisibility()}_validateAdd(ft){const _t=ft.getType()==="Layer",Tt=ft.getType()==="FastLayer";_t||Tt||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const ft=this.visible()?"":"none";this.content.style.display=ft}setContainer(ft){if(typeof ft===j){let _t;if(ft.charAt(0)==="."){const Tt=ft.slice(1);ft=document.getElementsByClassName(Tt)[0]}else ft.charAt(0)!=="#"?_t=ft:_t=ft.slice(1),ft=document.getElementById(_t);if(!ft)throw"Can not find container in document with id "+_t}return this._setAttr("container",ft),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),ft.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const ft=this.children,_t=ft.length;for(let Tt=0;Tt<_t;Tt++)ft[Tt].clear();return this}clone(ft){return ft||(ft={}),ft.container=typeof document<"u"&&document.createElement("div"),a.Container.prototype.clone.call(this,ft)}destroy(){super.destroy();const ft=this.content;ft&&e.Util._isInDocument(ft)&&this.container().removeChild(ft);const _t=o.stages.indexOf(this);return _t>-1&&o.stages.splice(_t,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const ft=this._pointerPositions[0]||this._changedPointerPositions[0];return ft?{x:ft.x,y:ft.y}:(e.Util.warn(Ot),null)}_getPointerById(ft){return this._pointerPositions.find(_t=>_t.id===ft)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(ft){ft=ft||{},ft.x=ft.x||0,ft.y=ft.y||0,ft.width=ft.width||this.width(),ft.height=ft.height||this.height();const _t=new h.SceneCanvas({width:ft.width,height:ft.height,pixelRatio:ft.pixelRatio||1}),Tt=_t.getContext()._context,Nt=this.children;return(ft.x||ft.y)&&Tt.translate(-1*ft.x,-1*ft.y),Nt.forEach(function(At){if(!At.isVisible())return;const Lt=At._toKonvaCanvas(ft);Tt.drawImage(Lt._canvas,ft.x,ft.y,Lt.getWidth()/Lt.getPixelRatio(),Lt.getHeight()/Lt.getPixelRatio())}),_t}getIntersection(ft){if(!ft)return null;const _t=this.children,Tt=_t.length,Nt=Tt-1;for(let At=Nt;At>=0;At--){const Lt=_t[At].getIntersection(ft);if(Lt)return Lt}return null}_resizeDOM(){const ft=this.width(),_t=this.height();this.content&&(this.content.style.width=ft+rt,this.content.style.height=_t+rt),this.bufferCanvas.setSize(ft,_t),this.bufferHitCanvas.setSize(ft,_t),this.children.forEach(Tt=>{Tt.setSize({width:ft,height:_t}),Tt.draw()})}add(ft,..._t){if(arguments.length>1){for(let Nt=0;Nt<arguments.length;Nt++)this.add(arguments[Nt]);return this}super.add(ft);const Tt=this.children.length;return Tt>mt&&e.Util.warn("The stage has "+Tt+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),ft.setSize({width:this.width(),height:this.height()}),ft.draw(),c.Konva.isBrowser&&this.content.appendChild(ft.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(ft){return _.hasPointerCapture(ft,this)}setPointerCapture(ft){_.setPointerCapture(ft,this)}releaseCapture(ft){_.releaseCapture(ft,this)}getLayers(){return this.children}_bindContentEvents(){c.Konva.isBrowser&&Ct.forEach(([ft,_t])=>{this.content.addEventListener(ft,Tt=>{this[_t](Tt)},{passive:!1})})}_pointerenter(ft){this.setPointersPositions(ft);const _t=xt(ft.type);_t&&this._fire(_t.pointerenter,{evt:ft,target:this,currentTarget:this})}_pointerover(ft){this.setPointersPositions(ft);const _t=xt(ft.type);_t&&this._fire(_t.pointerover,{evt:ft,target:this,currentTarget:this})}_getTargetShape(ft){let _t=this[ft+"targetShape"];return _t&&!_t.getStage()&&(_t=null),_t}_pointerleave(ft){const _t=xt(ft.type),Tt=wt(ft.type);if(!_t)return;this.setPointersPositions(ft);const Nt=this._getTargetShape(Tt),At=!(c.Konva.isDragging()||c.Konva.isTransforming())||c.Konva.hitOnDragEnabled;Nt&&At?(Nt._fireAndBubble(_t.pointerout,{evt:ft}),Nt._fireAndBubble(_t.pointerleave,{evt:ft}),this._fire(_t.pointerleave,{evt:ft,target:this,currentTarget:this}),this[Tt+"targetShape"]=null):At&&(this._fire(_t.pointerleave,{evt:ft,target:this,currentTarget:this}),this._fire(_t.pointerout,{evt:ft,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(ft){const _t=xt(ft.type),Tt=wt(ft.type);if(!_t)return;this.setPointersPositions(ft);let Nt=!1;this._changedPointerPositions.forEach(At=>{const Lt=this.getIntersection(At);if(d.DD.justDragged=!1,c.Konva["_"+Tt+"ListenClick"]=!0,!Lt||!Lt.isListening()){this[Tt+"ClickStartShape"]=void 0;return}c.Konva.capturePointerEventsEnabled&&Lt.setPointerCapture(At.id),this[Tt+"ClickStartShape"]=Lt,Lt._fireAndBubble(_t.pointerdown,{evt:ft,pointerId:At.id}),Nt=!0;const Dt=ft.type.indexOf("touch")>=0;Lt.preventDefault()&&ft.cancelable&&Dt&&ft.preventDefault()}),Nt||this._fire(_t.pointerdown,{evt:ft,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(ft){const _t=xt(ft.type),Tt=wt(ft.type);if(!_t||(c.Konva.isDragging()&&d.DD.node.preventDefault()&&ft.cancelable&&ft.preventDefault(),this.setPointersPositions(ft),!(!(c.Konva.isDragging()||c.Konva.isTransforming())||c.Konva.hitOnDragEnabled)))return;const At={};let Lt=!1;const Dt=this._getTargetShape(Tt);this._changedPointerPositions.forEach(Gt=>{const Rt=_.getCapturedShape(Gt.id)||this.getIntersection(Gt),Ut=Gt.id,It={evt:ft,pointerId:Ut},Vt=Dt!==Rt;if(Vt&&Dt&&(Dt._fireAndBubble(_t.pointerout,{...It},Rt),Dt._fireAndBubble(_t.pointerleave,{...It},Rt)),Rt){if(At[Rt._id])return;At[Rt._id]=!0}Rt&&Rt.isListening()?(Lt=!0,Vt&&(Rt._fireAndBubble(_t.pointerover,{...It},Dt),Rt._fireAndBubble(_t.pointerenter,{...It},Dt),this[Tt+"targetShape"]=Rt),Rt._fireAndBubble(_t.pointermove,{...It})):Dt&&(this._fire(_t.pointerover,{evt:ft,target:this,currentTarget:this,pointerId:Ut}),this[Tt+"targetShape"]=null)}),Lt||this._fire(_t.pointermove,{evt:ft,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(ft){const _t=xt(ft.type),Tt=wt(ft.type);if(!_t)return;this.setPointersPositions(ft);const Nt=this[Tt+"ClickStartShape"],At=this[Tt+"ClickEndShape"],Lt={};let Dt=!1;this._changedPointerPositions.forEach(Gt=>{const Rt=_.getCapturedShape(Gt.id)||this.getIntersection(Gt);if(Rt){if(Rt.releaseCapture(Gt.id),Lt[Rt._id])return;Lt[Rt._id]=!0}const Ut=Gt.id,It={evt:ft,pointerId:Ut};let Vt=!1;c.Konva["_"+Tt+"InDblClickWindow"]?(Vt=!0,clearTimeout(this[Tt+"DblTimeout"])):d.DD.justDragged||(c.Konva["_"+Tt+"InDblClickWindow"]=!0,clearTimeout(this[Tt+"DblTimeout"])),this[Tt+"DblTimeout"]=setTimeout(function(){c.Konva["_"+Tt+"InDblClickWindow"]=!1},c.Konva.dblClickWindow),Rt&&Rt.isListening()?(Dt=!0,this[Tt+"ClickEndShape"]=Rt,Rt._fireAndBubble(_t.pointerup,{...It}),c.Konva["_"+Tt+"ListenClick"]&&Nt&&Nt===Rt&&(Rt._fireAndBubble(_t.pointerclick,{...It}),Vt&&At&&At===Rt&&Rt._fireAndBubble(_t.pointerdblclick,{...It}))):(this[Tt+"ClickEndShape"]=null,c.Konva["_"+Tt+"ListenClick"]&&this._fire(_t.pointerclick,{evt:ft,target:this,currentTarget:this,pointerId:Ut}),Vt&&this._fire(_t.pointerdblclick,{evt:ft,target:this,currentTarget:this,pointerId:Ut}))}),Dt||this._fire(_t.pointerup,{evt:ft,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),c.Konva["_"+Tt+"ListenClick"]=!1,ft.cancelable&&Tt!=="touch"&&Tt!=="pointer"&&ft.preventDefault()}_contextmenu(ft){this.setPointersPositions(ft);const _t=this.getIntersection(this.getPointerPosition());_t&&_t.isListening()?_t._fireAndBubble(yt,{evt:ft}):this._fire(yt,{evt:ft,target:this,currentTarget:this})}_wheel(ft){this.setPointersPositions(ft);const _t=this.getIntersection(this.getPointerPosition());_t&&_t.isListening()?_t._fireAndBubble(bt,{evt:ft}):this._fire(bt,{evt:ft,target:this,currentTarget:this})}_pointercancel(ft){this.setPointersPositions(ft);const _t=_.getCapturedShape(ft.pointerId)||this.getIntersection(this.getPointerPosition());_t&&_t._fireAndBubble(lt,_.createEvent(ft)),_.releaseCapture(ft.pointerId)}_lostpointercapture(ft){_.releaseCapture(ft.pointerId)}setPointersPositions(ft){const _t=this._getContentPosition();let Tt=null,Nt=null;ft=ft||window.event,ft.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(ft.touches,At=>{this._pointerPositions.push({id:At.identifier,x:(At.clientX-_t.left)/_t.scaleX,y:(At.clientY-_t.top)/_t.scaleY})}),Array.prototype.forEach.call(ft.changedTouches||ft.touches,At=>{this._changedPointerPositions.push({id:At.identifier,x:(At.clientX-_t.left)/_t.scaleX,y:(At.clientY-_t.top)/_t.scaleY})})):(Tt=(ft.clientX-_t.left)/_t.scaleX,Nt=(ft.clientY-_t.top)/_t.scaleY,this.pointerPos={x:Tt,y:Nt},this._pointerPositions=[{x:Tt,y:Nt,id:e.Util._getFirstPointerId(ft)}],this._changedPointerPositions=[{x:Tt,y:Nt,id:e.Util._getFirstPointerId(ft)}])}_setPointerPosition(ft){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(ft)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const ft=this.content.getBoundingClientRect();return{top:ft.top,left:ft.left,scaleX:ft.width/this.content.clientWidth||1,scaleY:ft.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new h.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new h.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!c.Konva.isBrowser)return;const ft=this.container();if(!ft)throw"Stage has no container. A container is required.";ft.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),ft.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(ft){ft.batchDraw()}),this}}o.Stage=Mt,Mt.prototype.nodeType=b,(0,g._registerNode)(Mt),s.Factory.addGetterSetter(Mt,"container"),c.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{o.stages.forEach(Ft=>{Ft.batchDraw()})})})(Stage);var Layer$1={},Shape={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Shape=o.shapes=void 0;const e=Global,s=Util,a=Factory,c=Node$1,h=Validators,d=Global,g=PointerEvents,_="hasShadow",b="shadowRGBA",j="patternImage",rt="linearGradient",tt="radialGradient";let nt;function _e(){return nt||(nt=s.Util.createCanvasElement().getContext("2d"),nt)}o.shapes={};function st(pt){const ht=this.attrs.fillRule;ht?pt.fill(ht):pt.fill()}function at(pt){pt.stroke()}function ot(pt){const ht=this.attrs.fillRule;ht?pt.fill(ht):pt.fill()}function it(pt){pt.stroke()}function $(){this._clearCache(_)}function et(){this._clearCache(b)}function lt(){this._clearCache(j)}function ut(){this._clearCache(rt)}function dt(){this._clearCache(tt)}class ct extends c.Node{constructor(ht){super(ht);let gt;for(;gt=s.Util.getRandomColor(),!(gt&&!(gt in o.shapes)););this.colorKey=gt,o.shapes[gt]=this}getContext(){return s.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return s.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(_,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(j,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const gt=_e().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(gt&&gt.setTransform){const yt=new s.Transform;yt.translate(this.fillPatternX(),this.fillPatternY()),yt.rotate(e.Konva.getAngle(this.fillPatternRotation())),yt.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),yt.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const St=yt.getMatrix(),Et=typeof DOMMatrix>"u"?{a:St[0],b:St[1],c:St[2],d:St[3],e:St[4],f:St[5]}:new DOMMatrix(St);gt.setTransform(Et)}return gt}}_getLinearGradient(){return this._getCache(rt,this.__getLinearGradient)}__getLinearGradient(){const ht=this.fillLinearGradientColorStops();if(ht){const gt=_e(),yt=this.fillLinearGradientStartPoint(),St=this.fillLinearGradientEndPoint(),Et=gt.createLinearGradient(yt.x,yt.y,St.x,St.y);for(let kt=0;kt<ht.length;kt+=2)Et.addColorStop(ht[kt],ht[kt+1]);return Et}}_getRadialGradient(){return this._getCache(tt,this.__getRadialGradient)}__getRadialGradient(){const ht=this.fillRadialGradientColorStops();if(ht){const gt=_e(),yt=this.fillRadialGradientStartPoint(),St=this.fillRadialGradientEndPoint(),Et=gt.createRadialGradient(yt.x,yt.y,this.fillRadialGradientStartRadius(),St.x,St.y,this.fillRadialGradientEndRadius());for(let kt=0;kt<ht.length;kt+=2)Et.addColorStop(ht[kt],ht[kt+1]);return Et}}getShadowRGBA(){return this._getCache(b,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const ht=s.Util.colorToRGBA(this.shadowColor());if(ht)return"rgba("+ht.r+","+ht.g+","+ht.b+","+ht.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const ht=this.hitStrokeWidth();return ht==="auto"?this.hasStroke():this.strokeEnabled()&&!!ht}intersects(ht){const gt=this.getStage();if(!gt)return!1;const yt=gt.bufferHitCanvas;return yt.getContext().clear(),this.drawHit(yt,void 0,!0),yt.context.getImageData(Math.round(ht.x),Math.round(ht.y),1,1).data[3]>0}destroy(){return c.Node.prototype.destroy.call(this),delete o.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(ht){var gt;if(!((gt=this.attrs.perfectDrawEnabled)!==null&&gt!==void 0?gt:!0))return!1;const St=ht||this.hasFill(),Et=this.hasStroke(),kt=this.getAbsoluteOpacity()!==1;if(St&&Et&&kt)return!0;const Pt=this.hasShadow(),bt=this.shadowForStrokeEnabled();return!!(St&&Et&&Pt&&bt)}setStrokeHitEnabled(ht){s.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),ht?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const ht=this.size();return{x:this._centroid?-ht.width/2:0,y:this._centroid?-ht.height/2:0,width:ht.width,height:ht.height}}getClientRect(ht={}){let gt=!1,yt=this.getParent();for(;yt;){if(yt.isCached()){gt=!0;break}yt=yt.getParent()}const St=ht.skipTransform,Et=ht.relativeTo||gt&&this.getStage()||void 0,kt=this.getSelfRect(),bt=!ht.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,mt=kt.width+bt,Ct=kt.height+bt,vt=!ht.skipShadow&&this.hasShadow(),wt=vt?this.shadowOffsetX():0,xt=vt?this.shadowOffsetY():0,$t=mt+Math.abs(wt),Ot=Ct+Math.abs(xt),Mt=vt&&this.shadowBlur()||0,Ft=$t+Mt*2,ft=Ot+Mt*2,_t={width:Ft,height:ft,x:-(bt/2+Mt)+Math.min(wt,0)+kt.x,y:-(bt/2+Mt)+Math.min(xt,0)+kt.y};return St?_t:this._transformedRect(_t,Et)}drawScene(ht,gt,yt){const St=this.getLayer(),Et=ht||St.getCanvas(),kt=Et.getContext(),Pt=this._getCanvasCache(),bt=this.getSceneFunc(),mt=this.hasShadow();let Ct;const vt=gt===this;if(!this.isVisible()&&!vt)return this;if(Pt){kt.save();const wt=this.getAbsoluteTransform(gt).getMatrix();return kt.transform(wt[0],wt[1],wt[2],wt[3],wt[4],wt[5]),this._drawCachedSceneCanvas(kt),kt.restore(),this}if(!bt)return this;if(kt.save(),this._useBufferCanvas()){Ct=this.getStage();const wt=yt||Ct.bufferCanvas,xt=wt.getContext();xt.clear(),xt.save(),xt._applyLineJoin(this);const $t=this.getAbsoluteTransform(gt).getMatrix();xt.transform($t[0],$t[1],$t[2],$t[3],$t[4],$t[5]),bt.call(this,xt,this),xt.restore();const Ot=wt.pixelRatio;mt&&kt._applyShadow(this),kt._applyOpacity(this),kt._applyGlobalCompositeOperation(this),kt.drawImage(wt._canvas,wt.x||0,wt.y||0,wt.width/Ot,wt.height/Ot)}else{if(kt._applyLineJoin(this),!vt){const wt=this.getAbsoluteTransform(gt).getMatrix();kt.transform(wt[0],wt[1],wt[2],wt[3],wt[4],wt[5]),kt._applyOpacity(this),kt._applyGlobalCompositeOperation(this)}mt&&kt._applyShadow(this),bt.call(this,kt,this)}return kt.restore(),this}drawHit(ht,gt,yt=!1){if(!this.shouldDrawHit(gt,yt))return this;const St=this.getLayer(),Et=ht||St.hitCanvas,kt=Et&&Et.getContext(),Pt=this.hitFunc()||this.sceneFunc(),bt=this._getCanvasCache(),mt=bt&&bt.hit;if(this.colorKey||s.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),mt){kt.save();const vt=this.getAbsoluteTransform(gt).getMatrix();return kt.transform(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5]),this._drawCachedHitCanvas(kt),kt.restore(),this}if(!Pt)return this;if(kt.save(),kt._applyLineJoin(this),!(this===gt)){const vt=this.getAbsoluteTransform(gt).getMatrix();kt.transform(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5])}return Pt.call(this,kt,this),kt.restore(),this}drawHitFromCache(ht=0){const gt=this._getCanvasCache(),yt=this._getCachedSceneCanvas(),St=gt.hit,Et=St.getContext(),kt=St.getWidth(),Pt=St.getHeight();Et.clear(),Et.drawImage(yt._canvas,0,0,kt,Pt);try{const bt=Et.getImageData(0,0,kt,Pt),mt=bt.data,Ct=mt.length,vt=s.Util._hexToRgb(this.colorKey);for(let wt=0;wt<Ct;wt+=4)mt[wt+3]>ht?(mt[wt]=vt.r,mt[wt+1]=vt.g,mt[wt+2]=vt.b,mt[wt+3]=255):mt[wt+3]=0;Et.putImageData(bt,0,0)}catch(bt){s.Util.error("Unable to draw hit graph from cached scene canvas. "+bt.message)}return this}hasPointerCapture(ht){return g.hasPointerCapture(ht,this)}setPointerCapture(ht){g.setPointerCapture(ht,this)}releaseCapture(ht){g.releaseCapture(ht,this)}}o.Shape=ct,ct.prototype._fillFunc=st,ct.prototype._strokeFunc=at,ct.prototype._fillFuncHit=ot,ct.prototype._strokeFuncHit=it,ct.prototype._centroid=!1,ct.prototype.nodeType="Shape",(0,d._registerNode)(ct),ct.prototype.eventListeners={},ct.prototype.on.call(ct.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",$),ct.prototype.on.call(ct.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",et),ct.prototype.on.call(ct.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",lt),ct.prototype.on.call(ct.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",ut),ct.prototype.on.call(ct.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",dt),a.Factory.addGetterSetter(ct,"stroke",void 0,(0,h.getStringOrGradientValidator)()),a.Factory.addGetterSetter(ct,"strokeWidth",2,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(ct,"fillAfterStrokeEnabled",!1),a.Factory.addGetterSetter(ct,"hitStrokeWidth","auto",(0,h.getNumberOrAutoValidator)()),a.Factory.addGetterSetter(ct,"strokeHitEnabled",!0,(0,h.getBooleanValidator)()),a.Factory.addGetterSetter(ct,"perfectDrawEnabled",!0,(0,h.getBooleanValidator)()),a.Factory.addGetterSetter(ct,"shadowForStrokeEnabled",!0,(0,h.getBooleanValidator)()),a.Factory.addGetterSetter(ct,"lineJoin"),a.Factory.addGetterSetter(ct,"lineCap"),a.Factory.addGetterSetter(ct,"sceneFunc"),a.Factory.addGetterSetter(ct,"hitFunc"),a.Factory.addGetterSetter(ct,"dash"),a.Factory.addGetterSetter(ct,"dashOffset",0,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(ct,"shadowColor",void 0,(0,h.getStringValidator)()),a.Factory.addGetterSetter(ct,"shadowBlur",0,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(ct,"shadowOpacity",1,(0,h.getNumberValidator)()),a.Factory.addComponentsGetterSetter(ct,"shadowOffset",["x","y"]),a.Factory.addGetterSetter(ct,"shadowOffsetX",0,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(ct,"shadowOffsetY",0,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(ct,"fillPatternImage"),a.Factory.addGetterSetter(ct,"fill",void 0,(0,h.getStringOrGradientValidator)()),a.Factory.addGetterSetter(ct,"fillPatternX",0,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(ct,"fillPatternY",0,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(ct,"fillLinearGradientColorStops"),a.Factory.addGetterSetter(ct,"strokeLinearGradientColorStops"),a.Factory.addGetterSetter(ct,"fillRadialGradientStartRadius",0),a.Factory.addGetterSetter(ct,"fillRadialGradientEndRadius",0),a.Factory.addGetterSetter(ct,"fillRadialGradientColorStops"),a.Factory.addGetterSetter(ct,"fillPatternRepeat","repeat"),a.Factory.addGetterSetter(ct,"fillEnabled",!0),a.Factory.addGetterSetter(ct,"strokeEnabled",!0),a.Factory.addGetterSetter(ct,"shadowEnabled",!0),a.Factory.addGetterSetter(ct,"dashEnabled",!0),a.Factory.addGetterSetter(ct,"strokeScaleEnabled",!0),a.Factory.addGetterSetter(ct,"fillPriority","color"),a.Factory.addComponentsGetterSetter(ct,"fillPatternOffset",["x","y"]),a.Factory.addGetterSetter(ct,"fillPatternOffsetX",0,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(ct,"fillPatternOffsetY",0,(0,h.getNumberValidator)()),a.Factory.addComponentsGetterSetter(ct,"fillPatternScale",["x","y"]),a.Factory.addGetterSetter(ct,"fillPatternScaleX",1,(0,h.getNumberValidator)()),a.Factory.addGetterSetter(ct,"fillPatternScaleY",1,(0,h.getNumberValidator)()),a.Factory.addComponentsGetterSetter(ct,"fillLinearGradientStartPoint",["x","y"]),a.Factory.addComponentsGetterSetter(ct,"strokeLinearGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(ct,"fillLinearGradientStartPointX",0),a.Factory.addGetterSetter(ct,"strokeLinearGradientStartPointX",0),a.Factory.addGetterSetter(ct,"fillLinearGradientStartPointY",0),a.Factory.addGetterSetter(ct,"strokeLinearGradientStartPointY",0),a.Factory.addComponentsGetterSetter(ct,"fillLinearGradientEndPoint",["x","y"]),a.Factory.addComponentsGetterSetter(ct,"strokeLinearGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(ct,"fillLinearGradientEndPointX",0),a.Factory.addGetterSetter(ct,"strokeLinearGradientEndPointX",0),a.Factory.addGetterSetter(ct,"fillLinearGradientEndPointY",0),a.Factory.addGetterSetter(ct,"strokeLinearGradientEndPointY",0),a.Factory.addComponentsGetterSetter(ct,"fillRadialGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(ct,"fillRadialGradientStartPointX",0),a.Factory.addGetterSetter(ct,"fillRadialGradientStartPointY",0),a.Factory.addComponentsGetterSetter(ct,"fillRadialGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(ct,"fillRadialGradientEndPointX",0),a.Factory.addGetterSetter(ct,"fillRadialGradientEndPointY",0),a.Factory.addGetterSetter(ct,"fillPatternRotation",0),a.Factory.addGetterSetter(ct,"fillRule",void 0,(0,h.getStringValidator)()),a.Factory.backCompat(ct,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Shape);Object.defineProperty(Layer$1,"__esModule",{value:!0});Layer$1.Layer=void 0;const Util_1$b=Util,Container_1$1=Container$1,Node_1$g=Node$1,Factory_1$w=Factory,Canvas_1=Canvas$1,Validators_1$v=Validators,Shape_1$g=Shape,Global_1$k=Global,HASH="#",BEFORE_DRAW="beforeDraw",DRAW="draw",INTERSECTION_OFFSETS=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],INTERSECTION_OFFSETS_LEN=INTERSECTION_OFFSETS.length;class Layer extends Container_1$1.Container{constructor(e){super(e),this.canvas=new Canvas_1.SceneCanvas,this.hitCanvas=new Canvas_1.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const s=this.getStage();return s&&s.content&&(s.content.removeChild(this.getNativeCanvasElement()),e<s.children.length-1?s.content.insertBefore(this.getNativeCanvasElement(),s.children[e+1].getCanvas()._canvas):s.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Node_1$g.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Node_1$g.Node.prototype.moveUp.call(this))return!1;const s=this.getStage();return!s||!s.content?!1:(s.content.removeChild(this.getNativeCanvasElement()),this.index<s.children.length-1?s.content.insertBefore(this.getNativeCanvasElement(),s.children[this.index+1].getCanvas()._canvas):s.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Node_1$g.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const s=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),s[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Node_1$g.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const s=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),s[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return Node_1$g.Node.prototype.remove.call(this),e&&e.parentNode&&Util_1$b.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:s}){return this.canvas.setSize(e,s),this.hitCanvas.setSize(e,s),this._setSmoothEnabled(),this}_validateAdd(e){const s=e.getType();s!=="Group"&&s!=="Shape"&&Util_1$b.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Node_1$g.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Util_1$b.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Util_1$b.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Util_1$b.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let s=1,a=!1;for(;;){for(let c=0;c<INTERSECTION_OFFSETS_LEN;c++){const h=INTERSECTION_OFFSETS[c],d=this._getIntersection({x:e.x+h.x*s,y:e.y+h.y*s}),g=d.shape;if(g)return g;if(a=!!d.antialiased,!d.antialiased)break}if(a)s+=1;else return null}}_getIntersection(e){const s=this.hitCanvas.pixelRatio,a=this.hitCanvas.context.getImageData(Math.round(e.x*s),Math.round(e.y*s),1,1).data,c=a[3];if(c===255){const h=Util_1$b.Util._rgbToHex(a[0],a[1],a[2]),d=Shape_1$g.shapes[HASH+h];return d?{shape:d}:{antialiased:!0}}else if(c>0)return{antialiased:!0};return{}}drawScene(e,s,a){const c=this.getLayer(),h=e||c&&c.getCanvas();return this._fire(BEFORE_DRAW,{node:this}),this.clearBeforeDraw()&&h.getContext().clear(),Container_1$1.Container.prototype.drawScene.call(this,h,s,a),this._fire(DRAW,{node:this}),this}drawHit(e,s){const a=this.getLayer(),c=e||a&&a.hitCanvas;return a&&a.clearBeforeDraw()&&a.getHitCanvas().getContext().clear(),Container_1$1.Container.prototype.drawHit.call(this,c,s),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Util_1$b.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Util_1$b.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return Util_1$b.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Layer$1.Layer=Layer;Layer.prototype.nodeType="Layer";(0,Global_1$k._registerNode)(Layer);Factory_1$w.Factory.addGetterSetter(Layer,"imageSmoothingEnabled",!0);Factory_1$w.Factory.addGetterSetter(Layer,"clearBeforeDraw",!0);Factory_1$w.Factory.addGetterSetter(Layer,"hitGraphEnabled",!0,(0,Validators_1$v.getBooleanValidator)());var FastLayer$1={};Object.defineProperty(FastLayer$1,"__esModule",{value:!0});FastLayer$1.FastLayer=void 0;const Util_1$a=Util,Layer_1=Layer$1,Global_1$j=Global;class FastLayer extends Layer_1.Layer{constructor(e){super(e),this.listening(!1),Util_1$a.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}FastLayer$1.FastLayer=FastLayer;FastLayer.prototype.nodeType="FastLayer";(0,Global_1$j._registerNode)(FastLayer);var Group$1={};Object.defineProperty(Group$1,"__esModule",{value:!0});Group$1.Group=void 0;const Util_1$9=Util,Container_1=Container$1,Global_1$i=Global;class Group extends Container_1.Container{_validateAdd(e){const s=e.getType();s!=="Group"&&s!=="Shape"&&Util_1$9.Util.throw("You may only add groups and shapes to groups.")}}Group$1.Group=Group;Group.prototype.nodeType="Group";(0,Global_1$i._registerNode)(Group);var Animation$1={};Object.defineProperty(Animation$1,"__esModule",{value:!0});Animation$1.Animation=void 0;const Global_1$h=Global,Util_1$8=Util,now=function(){return Global_1$h.glob.performance&&Global_1$h.glob.performance.now?function(){return Global_1$h.glob.performance.now()}:function(){return new Date().getTime()}}();class Animation{constructor(e,s){this.id=Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:now(),frameRate:0},this.func=e,this.setLayers(s)}setLayers(e){let s=[];return e&&(s=Array.isArray(e)?e:[e]),this.layers=s,this}getLayers(){return this.layers}addLayer(e){const s=this.layers,a=s.length;for(let c=0;c<a;c++)if(s[c]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const s=Animation.animations,a=s.length;for(let c=0;c<a;c++)if(s[c].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=now(),Animation._addAnimation(this),this}stop(){return Animation._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const s=e.id,a=this.animations,c=a.length;for(let h=0;h<c;h++)if(a[h].id===s){this.animations.splice(h,1);break}}static _runFrames(){const e={},s=this.animations;for(let a=0;a<s.length;a++){const c=s[a],h=c.layers,d=c.func;c._updateFrameObject(now());const g=h.length;let _;if(d?_=d.call(c,c.frame)!==!1:_=!0,!!_)for(let b=0;b<g;b++){const j=h[b];j._id!==void 0&&(e[j._id]=j)}}for(const a in e)e.hasOwnProperty(a)&&e[a].batchDraw()}static _animationLoop(){const e=Animation;e.animations.length?(e._runFrames(),Util_1$8.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Util_1$8.Util.requestAnimFrame(this._animationLoop))}}Animation$1.Animation=Animation;Animation.animations=[];Animation.animIdCounter=0;Animation.animRunning=!1;var Tween={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Easings=o.Tween=void 0;const e=Util,s=Animation$1,a=Node$1,c=Global,h={node:1,duration:1,easing:1,onFinish:1,yoyo:1},d=1,g=2,_=3,b=["fill","stroke","shadowColor"];let j=0;class rt{constructor(_e,st,at,ot,it,$,et){this.prop=_e,this.propFunc=st,this.begin=ot,this._pos=ot,this.duration=$,this._change=0,this.prevPos=0,this.yoyo=et,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=at,this._change=it-this.begin,this.pause()}fire(_e){const st=this[_e];st&&st()}setTime(_e){_e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():_e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=_e,this.update())}getTime(){return this._time}setPosition(_e){this.prevPos=this._pos,this.propFunc(_e),this._pos=_e}getPosition(_e){return _e===void 0&&(_e=this._time),this.func(_e,this.begin,this._change,this.duration)}play(){this.state=g,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=_,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(_e){this.pause(),this._time=_e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const _e=this.getTimer()-this._startTime;this.state===g?this.setTime(_e):this.state===_&&this.setTime(this.duration-_e)}pause(){this.state=d,this.fire("onPause")}getTimer(){return new Date().getTime()}}class tt{constructor(_e){const st=this,at=_e.node,ot=at._id,it=_e.easing||o.Easings.Linear,$=!!_e.yoyo;let et,lt;typeof _e.duration>"u"?et=.3:_e.duration===0?et=.001:et=_e.duration,this.node=at,this._id=j++;const ut=at.getLayer()||(at instanceof c.Konva.Stage?at.getLayers():null);ut||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new s.Animation(function(){st.tween.onEnterFrame()},ut),this.tween=new rt(lt,function(dt){st._tweenFunc(dt)},it,0,1,et*1e3,$),this._addListeners(),tt.attrs[ot]||(tt.attrs[ot]={}),tt.attrs[ot][this._id]||(tt.attrs[ot][this._id]={}),tt.tweens[ot]||(tt.tweens[ot]={});for(lt in _e)h[lt]===void 0&&this._addAttr(lt,_e[lt]);this.reset(),this.onFinish=_e.onFinish,this.onReset=_e.onReset,this.onUpdate=_e.onUpdate}_addAttr(_e,st){const at=this.node,ot=at._id;let it,$,et,lt,ut;const dt=tt.tweens[ot][_e];dt&&delete tt.attrs[ot][dt][_e];let ct=at.getAttr(_e);if(e.Util._isArray(st))if(it=[],$=Math.max(st.length,ct.length),_e==="points"&&st.length!==ct.length&&(st.length>ct.length?(lt=ct,ct=e.Util._prepareArrayForTween(ct,st,at.closed())):(et=st,st=e.Util._prepareArrayForTween(st,ct,at.closed()))),_e.indexOf("fill")===0)for(let pt=0;pt<$;pt++)if(pt%2===0)it.push(st[pt]-ct[pt]);else{const ht=e.Util.colorToRGBA(ct[pt]);ut=e.Util.colorToRGBA(st[pt]),ct[pt]=ht,it.push({r:ut.r-ht.r,g:ut.g-ht.g,b:ut.b-ht.b,a:ut.a-ht.a})}else for(let pt=0;pt<$;pt++)it.push(st[pt]-ct[pt]);else b.indexOf(_e)!==-1?(ct=e.Util.colorToRGBA(ct),ut=e.Util.colorToRGBA(st),it={r:ut.r-ct.r,g:ut.g-ct.g,b:ut.b-ct.b,a:ut.a-ct.a}):it=st-ct;tt.attrs[ot][this._id][_e]={start:ct,diff:it,end:st,trueEnd:et,trueStart:lt},tt.tweens[ot][_e]=this._id}_tweenFunc(_e){const st=this.node,at=tt.attrs[st._id][this._id];let ot,it,$,et,lt,ut,dt,ct;for(ot in at){if(it=at[ot],$=it.start,et=it.diff,ct=it.end,e.Util._isArray($))if(lt=[],dt=Math.max($.length,ct.length),ot.indexOf("fill")===0)for(ut=0;ut<dt;ut++)ut%2===0?lt.push(($[ut]||0)+et[ut]*_e):lt.push("rgba("+Math.round($[ut].r+et[ut].r*_e)+","+Math.round($[ut].g+et[ut].g*_e)+","+Math.round($[ut].b+et[ut].b*_e)+","+($[ut].a+et[ut].a*_e)+")");else for(ut=0;ut<dt;ut++)lt.push(($[ut]||0)+et[ut]*_e);else b.indexOf(ot)!==-1?lt="rgba("+Math.round($.r+et.r*_e)+","+Math.round($.g+et.g*_e)+","+Math.round($.b+et.b*_e)+","+($.a+et.a*_e)+")":lt=$+et*_e;st.setAttr(ot,lt)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const _e=this.node,st=tt.attrs[_e._id][this._id];st.points&&st.points.trueEnd&&_e.setAttr("points",st.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const _e=this.node,st=tt.attrs[_e._id][this._id];st.points&&st.points.trueStart&&_e.points(st.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(_e){return this.tween.seek(_e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const _e=this.node._id,st=this._id,at=tt.tweens[_e];this.pause(),this.anim&&this.anim.stop();for(const ot in at)delete tt.tweens[_e][ot];delete tt.attrs[_e][st],tt.tweens[_e]&&(Object.keys(tt.tweens[_e]).length===0&&delete tt.tweens[_e],Object.keys(tt.attrs[_e]).length===0&&delete tt.attrs[_e])}}o.Tween=tt,tt.attrs={},tt.tweens={},a.Node.prototype.to=function(nt){const _e=nt.onFinish;nt.node=this,nt.onFinish=function(){this.destroy(),_e&&_e()},new tt(nt).play()},o.Easings={BackEaseIn(nt,_e,st,at){return st*(nt/=at)*nt*((1.70158+1)*nt-1.70158)+_e},BackEaseOut(nt,_e,st,at){return st*((nt=nt/at-1)*nt*((1.70158+1)*nt+1.70158)+1)+_e},BackEaseInOut(nt,_e,st,at){let ot=1.70158;return(nt/=at/2)<1?st/2*(nt*nt*(((ot*=1.525)+1)*nt-ot))+_e:st/2*((nt-=2)*nt*(((ot*=1.525)+1)*nt+ot)+2)+_e},ElasticEaseIn(nt,_e,st,at,ot,it){let $=0;return nt===0?_e:(nt/=at)===1?_e+st:(it||(it=at*.3),!ot||ot<Math.abs(st)?(ot=st,$=it/4):$=it/(2*Math.PI)*Math.asin(st/ot),-(ot*Math.pow(2,10*(nt-=1))*Math.sin((nt*at-$)*(2*Math.PI)/it))+_e)},ElasticEaseOut(nt,_e,st,at,ot,it){let $=0;return nt===0?_e:(nt/=at)===1?_e+st:(it||(it=at*.3),!ot||ot<Math.abs(st)?(ot=st,$=it/4):$=it/(2*Math.PI)*Math.asin(st/ot),ot*Math.pow(2,-10*nt)*Math.sin((nt*at-$)*(2*Math.PI)/it)+st+_e)},ElasticEaseInOut(nt,_e,st,at,ot,it){let $=0;return nt===0?_e:(nt/=at/2)===2?_e+st:(it||(it=at*(.3*1.5)),!ot||ot<Math.abs(st)?(ot=st,$=it/4):$=it/(2*Math.PI)*Math.asin(st/ot),nt<1?-.5*(ot*Math.pow(2,10*(nt-=1))*Math.sin((nt*at-$)*(2*Math.PI)/it))+_e:ot*Math.pow(2,-10*(nt-=1))*Math.sin((nt*at-$)*(2*Math.PI)/it)*.5+st+_e)},BounceEaseOut(nt,_e,st,at){return(nt/=at)<1/2.75?st*(7.5625*nt*nt)+_e:nt<2/2.75?st*(7.5625*(nt-=1.5/2.75)*nt+.75)+_e:nt<2.5/2.75?st*(7.5625*(nt-=2.25/2.75)*nt+.9375)+_e:st*(7.5625*(nt-=2.625/2.75)*nt+.984375)+_e},BounceEaseIn(nt,_e,st,at){return st-o.Easings.BounceEaseOut(at-nt,0,st,at)+_e},BounceEaseInOut(nt,_e,st,at){return nt<at/2?o.Easings.BounceEaseIn(nt*2,0,st,at)*.5+_e:o.Easings.BounceEaseOut(nt*2-at,0,st,at)*.5+st*.5+_e},EaseIn(nt,_e,st,at){return st*(nt/=at)*nt+_e},EaseOut(nt,_e,st,at){return-st*(nt/=at)*(nt-2)+_e},EaseInOut(nt,_e,st,at){return(nt/=at/2)<1?st/2*nt*nt+_e:-st/2*(--nt*(nt-2)-1)+_e},StrongEaseIn(nt,_e,st,at){return st*(nt/=at)*nt*nt*nt*nt+_e},StrongEaseOut(nt,_e,st,at){return st*((nt=nt/at-1)*nt*nt*nt*nt+1)+_e},StrongEaseInOut(nt,_e,st,at){return(nt/=at/2)<1?st/2*nt*nt*nt*nt*nt+_e:st/2*((nt-=2)*nt*nt*nt*nt+2)+_e},Linear(nt,_e,st,at){return st*nt/at+_e}}})(Tween);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Konva=void 0;const e=Global,s=Util,a=Node$1,c=Container$1,h=Stage,d=Layer$1,g=FastLayer$1,_=Group$1,b=DragAndDrop,j=Shape,rt=Animation$1,tt=Tween,nt=Context$1,_e=Canvas$1;o.Konva=s.Util._assign(e.Konva,{Util:s.Util,Transform:s.Transform,Node:a.Node,Container:c.Container,Stage:h.Stage,stages:h.stages,Layer:d.Layer,FastLayer:g.FastLayer,Group:_.Group,DD:b.DD,Shape:j.Shape,shapes:j.shapes,Animation:rt.Animation,Tween:tt.Tween,Easings:tt.Easings,Context:nt.Context,Canvas:_e.Canvas}),o.default=o.Konva})(_CoreInternals);var Arc$1={};Object.defineProperty(Arc$1,"__esModule",{value:!0});Arc$1.Arc=void 0;const Factory_1$v=Factory,Shape_1$f=Shape,Global_1$g=Global,Validators_1$u=Validators,Global_2$3=Global;class Arc extends Shape_1$f.Shape{_sceneFunc(e){const s=Global_1$g.Konva.getAngle(this.angle()),a=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,s,a),e.arc(0,0,this.innerRadius(),s,0,!a),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),s=this.outerRadius(),a=this.clockwise(),c=Global_1$g.Konva.getAngle(a?360-this.angle():this.angle()),h=Math.cos(Math.min(c,Math.PI)),d=1,g=Math.sin(Math.min(Math.max(Math.PI,c),3*Math.PI/2)),_=Math.sin(Math.min(c,Math.PI/2)),b=h*(h>0?e:s),j=d*s,rt=g*(g>0?e:s),tt=_*(_>0?s:e);return{x:b,y:a?-1*tt:rt,width:j-b,height:tt-rt}}}Arc$1.Arc=Arc;Arc.prototype._centroid=!0;Arc.prototype.className="Arc";Arc.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];(0,Global_2$3._registerNode)(Arc);Factory_1$v.Factory.addGetterSetter(Arc,"innerRadius",0,(0,Validators_1$u.getNumberValidator)());Factory_1$v.Factory.addGetterSetter(Arc,"outerRadius",0,(0,Validators_1$u.getNumberValidator)());Factory_1$v.Factory.addGetterSetter(Arc,"angle",0,(0,Validators_1$u.getNumberValidator)());Factory_1$v.Factory.addGetterSetter(Arc,"clockwise",!1,(0,Validators_1$u.getBooleanValidator)());var Arrow$1={},Line$1={};Object.defineProperty(Line$1,"__esModule",{value:!0});Line$1.Line=void 0;const Factory_1$u=Factory,Global_1$f=Global,Shape_1$e=Shape,Validators_1$t=Validators;function getControlPoints(o,e,s,a,c,h,d){const g=Math.sqrt(Math.pow(s-o,2)+Math.pow(a-e,2)),_=Math.sqrt(Math.pow(c-s,2)+Math.pow(h-a,2)),b=d*g/(g+_),j=d*_/(g+_),rt=s-b*(c-o),tt=a-b*(h-e),nt=s+j*(c-o),_e=a+j*(h-e);return[rt,tt,nt,_e]}function expandPoints(o,e){const s=o.length,a=[];for(let c=2;c<s-2;c+=2){const h=getControlPoints(o[c-2],o[c-1],o[c],o[c+1],o[c+2],o[c+3],e);isNaN(h[0])||(a.push(h[0]),a.push(h[1]),a.push(o[c]),a.push(o[c+1]),a.push(h[2]),a.push(h[3]))}return a}class Line extends Shape_1$e.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const s=this.points(),a=s.length,c=this.tension(),h=this.closed(),d=this.bezier();if(!a)return;let g=0;if(e.beginPath(),e.moveTo(s[0],s[1]),c!==0&&a>4){const _=this.getTensionPoints(),b=_.length;for(g=h?0:4,h||e.quadraticCurveTo(_[0],_[1],_[2],_[3]);g<b-2;)e.bezierCurveTo(_[g++],_[g++],_[g++],_[g++],_[g++],_[g++]);h||e.quadraticCurveTo(_[b-2],_[b-1],s[a-2],s[a-1])}else if(d)for(g=2;g<a;)e.bezierCurveTo(s[g++],s[g++],s[g++],s[g++],s[g++],s[g++]);else for(g=2;g<a;g+=2)e.lineTo(s[g],s[g+1]);h?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():expandPoints(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),s=e.length,a=this.tension(),c=getControlPoints(e[s-2],e[s-1],e[0],e[1],e[2],e[3],a),h=getControlPoints(e[s-4],e[s-3],e[s-2],e[s-1],e[0],e[1],a),d=expandPoints(e,a);return[c[2],c[3]].concat(d).concat([h[0],h[1],e[s-2],e[s-1],h[2],h[3],c[0],c[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let s=e[0],a=e[0],c=e[1],h=e[1],d,g;for(let _=0;_<e.length/2;_++)d=e[_*2],g=e[_*2+1],s=Math.min(s,d),a=Math.max(a,d),c=Math.min(c,g),h=Math.max(h,g);return{x:s,y:c,width:a-s,height:h-c}}}Line$1.Line=Line;Line.prototype.className="Line";Line.prototype._attrsAffectingSize=["points","bezier","tension"];(0,Global_1$f._registerNode)(Line);Factory_1$u.Factory.addGetterSetter(Line,"closed",!1);Factory_1$u.Factory.addGetterSetter(Line,"bezier",!1);Factory_1$u.Factory.addGetterSetter(Line,"tension",0,(0,Validators_1$t.getNumberValidator)());Factory_1$u.Factory.addGetterSetter(Line,"points",[],(0,Validators_1$t.getNumberArrayValidator)());var Path$1={},BezierFunctions={};(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.t2length=o.getQuadraticArcLength=o.getCubicArcLength=o.binomialCoefficients=o.cValues=o.tValues=void 0,o.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],o.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],o.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(d,g,_)=>{let b,j;const tt=_/2;b=0;for(let nt=0;nt<20;nt++)j=tt*o.tValues[20][nt]+tt,b+=o.cValues[20][nt]*a(d,g,j);return tt*b};o.getCubicArcLength=e;const s=(d,g,_)=>{_===void 0&&(_=1);const b=d[0]-2*d[1]+d[2],j=g[0]-2*g[1]+g[2],rt=2*d[1]-2*d[0],tt=2*g[1]-2*g[0],nt=4*(b*b+j*j),_e=4*(b*rt+j*tt),st=rt*rt+tt*tt;if(nt===0)return _*Math.sqrt(Math.pow(d[2]-d[0],2)+Math.pow(g[2]-g[0],2));const at=_e/(2*nt),ot=st/nt,it=_+at,$=ot-at*at,et=it*it+$>0?Math.sqrt(it*it+$):0,lt=at*at+$>0?Math.sqrt(at*at+$):0,ut=at+Math.sqrt(at*at+$)!==0?$*Math.log(Math.abs((it+et)/(at+lt))):0;return Math.sqrt(nt)/2*(it*et-at*lt+ut)};o.getQuadraticArcLength=s;function a(d,g,_){const b=c(1,_,d),j=c(1,_,g),rt=b*b+j*j;return Math.sqrt(rt)}const c=(d,g,_)=>{const b=_.length-1;let j,rt;if(b===0)return 0;if(d===0){rt=0;for(let tt=0;tt<=b;tt++)rt+=o.binomialCoefficients[b][tt]*Math.pow(1-g,b-tt)*Math.pow(g,tt)*_[tt];return rt}else{j=new Array(b);for(let tt=0;tt<b;tt++)j[tt]=b*(_[tt+1]-_[tt]);return c(d-1,g,j)}},h=(d,g,_)=>{let b=1,j=d/g,rt=(d-_(j))/g,tt=0;for(;b>.001;){const nt=_(j+rt),_e=Math.abs(d-nt)/g;if(_e<b)b=_e,j+=rt;else{const st=_(j-rt),at=Math.abs(d-st)/g;at<b?(b=at,j-=rt):rt/=2}if(tt++,tt>500)break}return j};o.t2length=h})(BezierFunctions);Object.defineProperty(Path$1,"__esModule",{value:!0});Path$1.Path=void 0;const Factory_1$t=Factory,Global_1$e=Global,Shape_1$d=Shape,BezierFunctions_1=BezierFunctions;class Path extends Shape_1$d.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Path.parsePathData(this.data()),this.pathLength=Path.getPathLength(this.dataArray)}_sceneFunc(e){const s=this.dataArray;e.beginPath();let a=!1;for(let c=0;c<s.length;c++){const h=s[c].command,d=s[c].points;switch(h){case"L":e.lineTo(d[0],d[1]);break;case"M":e.moveTo(d[0],d[1]);break;case"C":e.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5]);break;case"Q":e.quadraticCurveTo(d[0],d[1],d[2],d[3]);break;case"A":const g=d[0],_=d[1],b=d[2],j=d[3],rt=d[4],tt=d[5],nt=d[6],_e=d[7],st=b>j?b:j,at=b>j?1:b/j,ot=b>j?j/b:1;e.translate(g,_),e.rotate(nt),e.scale(at,ot),e.arc(0,0,st,rt,rt+tt,1-_e),e.scale(1/at,1/ot),e.rotate(-nt),e.translate(-g,-_);break;case"z":a=!0,e.closePath();break}}!a&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(_){if(_.command==="A"){const b=_.points[4],j=_.points[5],rt=_.points[4]+j;let tt=Math.PI/180;if(Math.abs(b-rt)<tt&&(tt=Math.abs(b-rt)),j<0)for(let nt=b-tt;nt>rt;nt-=tt){const _e=Path.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],nt,0);e.push(_e.x,_e.y)}else for(let nt=b+tt;nt<rt;nt+=tt){const _e=Path.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],nt,0);e.push(_e.x,_e.y)}}else if(_.command==="C")for(let b=0;b<=1;b+=.01){const j=Path.getPointOnCubicBezier(b,_.start.x,_.start.y,_.points[0],_.points[1],_.points[2],_.points[3],_.points[4],_.points[5]);e.push(j.x,j.y)}else e=e.concat(_.points)});let s=e[0],a=e[0],c=e[1],h=e[1],d,g;for(let _=0;_<e.length/2;_++)d=e[_*2],g=e[_*2+1],isNaN(d)||(s=Math.min(s,d),a=Math.max(a,d)),isNaN(g)||(c=Math.min(c,g),h=Math.max(h,g));return{x:s,y:c,width:a-s,height:h-c}}getLength(){return this.pathLength}getPointAtLength(e){return Path.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,s,a,c){return Math.sqrt((a-e)*(a-e)+(c-s)*(c-s))}static getPathLength(e){let s=0;for(let a=0;a<e.length;++a)s+=e[a].pathLength;return s}static getPointAtLengthOfDataArray(e,s){let a,c=0,h=s.length;if(!h)return null;for(;c<h&&e>s[c].pathLength;)e-=s[c].pathLength,++c;if(c===h)return a=s[c-1].points.slice(-2),{x:a[0],y:a[1]};if(e<.01)return s[c].command==="M"?(a=s[c].points.slice(0,2),{x:a[0],y:a[1]}):{x:s[c].start.x,y:s[c].start.y};const d=s[c],g=d.points;switch(d.command){case"L":return Path.getPointOnLine(e,d.start.x,d.start.y,g[0],g[1]);case"C":return Path.getPointOnCubicBezier((0,BezierFunctions_1.t2length)(e,Path.getPathLength(s),st=>(0,BezierFunctions_1.getCubicArcLength)([d.start.x,g[0],g[2],g[4]],[d.start.y,g[1],g[3],g[5]],st)),d.start.x,d.start.y,g[0],g[1],g[2],g[3],g[4],g[5]);case"Q":return Path.getPointOnQuadraticBezier((0,BezierFunctions_1.t2length)(e,Path.getPathLength(s),st=>(0,BezierFunctions_1.getQuadraticArcLength)([d.start.x,g[0],g[2]],[d.start.y,g[1],g[3]],st)),d.start.x,d.start.y,g[0],g[1],g[2],g[3]);case"A":const _=g[0],b=g[1],j=g[2],rt=g[3],tt=g[5],nt=g[6];let _e=g[4];return _e+=tt*e/d.pathLength,Path.getPointOnEllipticalArc(_,b,j,rt,_e,nt)}return null}static getPointOnLine(e,s,a,c,h,d,g){d=d??s,g=g??a;const _=this.getLineLength(s,a,c,h);if(_<1e-10)return{x:s,y:a};if(c===s)return{x:d,y:g+(h>a?e:-e)};const b=(h-a)/(c-s),j=Math.sqrt(e*e/(1+b*b))*(c<s?-1:1),rt=b*j;if(Math.abs(g-a-b*(d-s))<1e-10)return{x:d+j,y:g+rt};const tt=((d-s)*(c-s)+(g-a)*(h-a))/(_*_),nt=s+tt*(c-s),_e=a+tt*(h-a),st=this.getLineLength(d,g,nt,_e),at=Math.sqrt(e*e-st*st),ot=Math.sqrt(at*at/(1+b*b))*(c<s?-1:1),it=b*ot;return{x:nt+ot,y:_e+it}}static getPointOnCubicBezier(e,s,a,c,h,d,g,_,b){function j(at){return at*at*at}function rt(at){return 3*at*at*(1-at)}function tt(at){return 3*at*(1-at)*(1-at)}function nt(at){return(1-at)*(1-at)*(1-at)}const _e=_*j(e)+d*rt(e)+c*tt(e)+s*nt(e),st=b*j(e)+g*rt(e)+h*tt(e)+a*nt(e);return{x:_e,y:st}}static getPointOnQuadraticBezier(e,s,a,c,h,d,g){function _(nt){return nt*nt}function b(nt){return 2*nt*(1-nt)}function j(nt){return(1-nt)*(1-nt)}const rt=d*_(e)+c*b(e)+s*j(e),tt=g*_(e)+h*b(e)+a*j(e);return{x:rt,y:tt}}static getPointOnEllipticalArc(e,s,a,c,h,d){const g=Math.cos(d),_=Math.sin(d),b={x:a*Math.cos(h),y:c*Math.sin(h)};return{x:e+(b.x*g-b.y*_),y:s+(b.x*_+b.y*g)}}static parsePathData(e){if(!e)return[];let s=e;const a=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];s=s.replace(new RegExp(" ","g"),",");for(let rt=0;rt<a.length;rt++)s=s.replace(new RegExp(a[rt],"g"),"|"+a[rt]);const c=s.split("|"),h=[],d=[];let g=0,_=0;const b=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let j;for(let rt=1;rt<c.length;rt++){let tt=c[rt],nt=tt.charAt(0);for(tt=tt.slice(1),d.length=0;j=b.exec(tt);)d.push(j[0]);const _e=[];for(let st=0,at=d.length;st<at;st++){if(d[st]==="00"){_e.push(0,0);continue}const ot=parseFloat(d[st]);isNaN(ot)?_e.push(0):_e.push(ot)}for(;_e.length>0&&!isNaN(_e[0]);){let st="",at=[];const ot=g,it=_;let $,et,lt,ut,dt,ct,pt,ht,gt,yt;switch(nt){case"l":g+=_e.shift(),_+=_e.shift(),st="L",at.push(g,_);break;case"L":g=_e.shift(),_=_e.shift(),at.push(g,_);break;case"m":const St=_e.shift(),Et=_e.shift();if(g+=St,_+=Et,st="M",h.length>2&&h[h.length-1].command==="z"){for(let kt=h.length-2;kt>=0;kt--)if(h[kt].command==="M"){g=h[kt].points[0]+St,_=h[kt].points[1]+Et;break}}at.push(g,_),nt="l";break;case"M":g=_e.shift(),_=_e.shift(),st="M",at.push(g,_),nt="L";break;case"h":g+=_e.shift(),st="L",at.push(g,_);break;case"H":g=_e.shift(),st="L",at.push(g,_);break;case"v":_+=_e.shift(),st="L",at.push(g,_);break;case"V":_=_e.shift(),st="L",at.push(g,_);break;case"C":at.push(_e.shift(),_e.shift(),_e.shift(),_e.shift()),g=_e.shift(),_=_e.shift(),at.push(g,_);break;case"c":at.push(g+_e.shift(),_+_e.shift(),g+_e.shift(),_+_e.shift()),g+=_e.shift(),_+=_e.shift(),st="C",at.push(g,_);break;case"S":et=g,lt=_,$=h[h.length-1],$.command==="C"&&(et=g+(g-$.points[2]),lt=_+(_-$.points[3])),at.push(et,lt,_e.shift(),_e.shift()),g=_e.shift(),_=_e.shift(),st="C",at.push(g,_);break;case"s":et=g,lt=_,$=h[h.length-1],$.command==="C"&&(et=g+(g-$.points[2]),lt=_+(_-$.points[3])),at.push(et,lt,g+_e.shift(),_+_e.shift()),g+=_e.shift(),_+=_e.shift(),st="C",at.push(g,_);break;case"Q":at.push(_e.shift(),_e.shift()),g=_e.shift(),_=_e.shift(),at.push(g,_);break;case"q":at.push(g+_e.shift(),_+_e.shift()),g+=_e.shift(),_+=_e.shift(),st="Q",at.push(g,_);break;case"T":et=g,lt=_,$=h[h.length-1],$.command==="Q"&&(et=g+(g-$.points[0]),lt=_+(_-$.points[1])),g=_e.shift(),_=_e.shift(),st="Q",at.push(et,lt,g,_);break;case"t":et=g,lt=_,$=h[h.length-1],$.command==="Q"&&(et=g+(g-$.points[0]),lt=_+(_-$.points[1])),g+=_e.shift(),_+=_e.shift(),st="Q",at.push(et,lt,g,_);break;case"A":ut=_e.shift(),dt=_e.shift(),ct=_e.shift(),pt=_e.shift(),ht=_e.shift(),gt=g,yt=_,g=_e.shift(),_=_e.shift(),st="A",at=this.convertEndpointToCenterParameterization(gt,yt,g,_,pt,ht,ut,dt,ct);break;case"a":ut=_e.shift(),dt=_e.shift(),ct=_e.shift(),pt=_e.shift(),ht=_e.shift(),gt=g,yt=_,g+=_e.shift(),_+=_e.shift(),st="A",at=this.convertEndpointToCenterParameterization(gt,yt,g,_,pt,ht,ut,dt,ct);break}h.push({command:st||nt,points:at,start:{x:ot,y:it},pathLength:this.calcLength(ot,it,st||nt,at)})}(nt==="z"||nt==="Z")&&h.push({command:"z",points:[],start:void 0,pathLength:0})}return h}static calcLength(e,s,a,c){let h,d,g,_;const b=Path;switch(a){case"L":return b.getLineLength(e,s,c[0],c[1]);case"C":return(0,BezierFunctions_1.getCubicArcLength)([e,c[0],c[2],c[4]],[s,c[1],c[3],c[5]],1);case"Q":return(0,BezierFunctions_1.getQuadraticArcLength)([e,c[0],c[2]],[s,c[1],c[3]],1);case"A":h=0;const j=c[4],rt=c[5],tt=c[4]+rt;let nt=Math.PI/180;if(Math.abs(j-tt)<nt&&(nt=Math.abs(j-tt)),d=b.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],j,0),rt<0)for(_=j-nt;_>tt;_-=nt)g=b.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],_,0),h+=b.getLineLength(d.x,d.y,g.x,g.y),d=g;else for(_=j+nt;_<tt;_+=nt)g=b.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],_,0),h+=b.getLineLength(d.x,d.y,g.x,g.y),d=g;return g=b.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],tt,0),h+=b.getLineLength(d.x,d.y,g.x,g.y),h}return 0}static convertEndpointToCenterParameterization(e,s,a,c,h,d,g,_,b){const j=b*(Math.PI/180),rt=Math.cos(j)*(e-a)/2+Math.sin(j)*(s-c)/2,tt=-1*Math.sin(j)*(e-a)/2+Math.cos(j)*(s-c)/2,nt=rt*rt/(g*g)+tt*tt/(_*_);nt>1&&(g*=Math.sqrt(nt),_*=Math.sqrt(nt));let _e=Math.sqrt((g*g*(_*_)-g*g*(tt*tt)-_*_*(rt*rt))/(g*g*(tt*tt)+_*_*(rt*rt)));h===d&&(_e*=-1),isNaN(_e)&&(_e=0);const st=_e*g*tt/_,at=_e*-_*rt/g,ot=(e+a)/2+Math.cos(j)*st-Math.sin(j)*at,it=(s+c)/2+Math.sin(j)*st+Math.cos(j)*at,$=function(ht){return Math.sqrt(ht[0]*ht[0]+ht[1]*ht[1])},et=function(ht,gt){return(ht[0]*gt[0]+ht[1]*gt[1])/($(ht)*$(gt))},lt=function(ht,gt){return(ht[0]*gt[1]<ht[1]*gt[0]?-1:1)*Math.acos(et(ht,gt))},ut=lt([1,0],[(rt-st)/g,(tt-at)/_]),dt=[(rt-st)/g,(tt-at)/_],ct=[(-1*rt-st)/g,(-1*tt-at)/_];let pt=lt(dt,ct);return et(dt,ct)<=-1&&(pt=Math.PI),et(dt,ct)>=1&&(pt=0),d===0&&pt>0&&(pt=pt-2*Math.PI),d===1&&pt<0&&(pt=pt+2*Math.PI),[ot,it,g,_,ut,pt,j,d]}}Path$1.Path=Path;Path.prototype.className="Path";Path.prototype._attrsAffectingSize=["data"];(0,Global_1$e._registerNode)(Path);Factory_1$t.Factory.addGetterSetter(Path,"data");Object.defineProperty(Arrow$1,"__esModule",{value:!0});Arrow$1.Arrow=void 0;const Factory_1$s=Factory,Line_1$1=Line$1,Validators_1$s=Validators,Global_1$d=Global,Path_1$2=Path$1;class Arrow extends Line_1$1.Line{_sceneFunc(e){super._sceneFunc(e);const s=Math.PI*2,a=this.points();let c=a;const h=this.tension()!==0&&a.length>4;h&&(c=this.getTensionPoints());const d=this.pointerLength(),g=a.length;let _,b;if(h){const tt=[c[c.length-4],c[c.length-3],c[c.length-2],c[c.length-1],a[g-2],a[g-1]],nt=Path_1$2.Path.calcLength(c[c.length-4],c[c.length-3],"C",tt),_e=Path_1$2.Path.getPointOnQuadraticBezier(Math.min(1,1-d/nt),tt[0],tt[1],tt[2],tt[3],tt[4],tt[5]);_=a[g-2]-_e.x,b=a[g-1]-_e.y}else _=a[g-2]-a[g-4],b=a[g-1]-a[g-3];const j=(Math.atan2(b,_)+s)%s,rt=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(a[g-2],a[g-1]),e.rotate(j),e.moveTo(0,0),e.lineTo(-d,rt/2),e.lineTo(-d,-rt/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(a[0],a[1]),h?(_=(c[0]+c[2])/2-a[0],b=(c[1]+c[3])/2-a[1]):(_=a[2]-a[0],b=a[3]-a[1]),e.rotate((Math.atan2(-b,-_)+s)%s),e.moveTo(0,0),e.lineTo(-d,rt/2),e.lineTo(-d,-rt/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const s=this.dashEnabled();s&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),s&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),s=this.pointerWidth()/2;return{x:e.x,y:e.y-s,width:e.width,height:e.height+s*2}}}Arrow$1.Arrow=Arrow;Arrow.prototype.className="Arrow";(0,Global_1$d._registerNode)(Arrow);Factory_1$s.Factory.addGetterSetter(Arrow,"pointerLength",10,(0,Validators_1$s.getNumberValidator)());Factory_1$s.Factory.addGetterSetter(Arrow,"pointerWidth",10,(0,Validators_1$s.getNumberValidator)());Factory_1$s.Factory.addGetterSetter(Arrow,"pointerAtBeginning",!1);Factory_1$s.Factory.addGetterSetter(Arrow,"pointerAtEnding",!0);var Circle$1={};Object.defineProperty(Circle$1,"__esModule",{value:!0});Circle$1.Circle=void 0;const Factory_1$r=Factory,Shape_1$c=Shape,Validators_1$r=Validators,Global_1$c=Global;class Circle extends Shape_1$c.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Circle$1.Circle=Circle;Circle.prototype._centroid=!0;Circle.prototype.className="Circle";Circle.prototype._attrsAffectingSize=["radius"];(0,Global_1$c._registerNode)(Circle);Factory_1$r.Factory.addGetterSetter(Circle,"radius",0,(0,Validators_1$r.getNumberValidator)());var Ellipse$1={};Object.defineProperty(Ellipse$1,"__esModule",{value:!0});Ellipse$1.Ellipse=void 0;const Factory_1$q=Factory,Shape_1$b=Shape,Validators_1$q=Validators,Global_1$b=Global;class Ellipse extends Shape_1$b.Shape{_sceneFunc(e){const s=this.radiusX(),a=this.radiusY();e.beginPath(),e.save(),s!==a&&e.scale(1,a/s),e.arc(0,0,s,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Ellipse$1.Ellipse=Ellipse;Ellipse.prototype.className="Ellipse";Ellipse.prototype._centroid=!0;Ellipse.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Global_1$b._registerNode)(Ellipse);Factory_1$q.Factory.addComponentsGetterSetter(Ellipse,"radius",["x","y"]);Factory_1$q.Factory.addGetterSetter(Ellipse,"radiusX",0,(0,Validators_1$q.getNumberValidator)());Factory_1$q.Factory.addGetterSetter(Ellipse,"radiusY",0,(0,Validators_1$q.getNumberValidator)());var Image$1={};Object.defineProperty(Image$1,"__esModule",{value:!0});Image$1.Image=void 0;const Util_1$7=Util,Factory_1$p=Factory,Shape_1$a=Shape,Global_1$a=Global,Validators_1$p=Validators;class Image extends Shape_1$a.Shape{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",s=>{this._removeImageLoad(s.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),s=this.hasShadow();return e&&s?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const s=this.getWidth(),a=this.getHeight(),c=this.cornerRadius(),h=this.attrs.image;let d;if(h){const g=this.attrs.cropWidth,_=this.attrs.cropHeight;g&&_?d=[h,this.cropX(),this.cropY(),g,_,0,0,s,a]:d=[h,0,0,s,a]}(this.hasFill()||this.hasStroke()||c)&&(e.beginPath(),c?Util_1$7.Util.drawRoundedRectPath(e,s,a,c):e.rect(0,0,s,a),e.closePath(),e.fillStrokeShape(this)),h&&(c&&e.clip(),e.drawImage.apply(e,d))}_hitFunc(e){const s=this.width(),a=this.height(),c=this.cornerRadius();e.beginPath(),c?Util_1$7.Util.drawRoundedRectPath(e,s,a,c):e.rect(0,0,s,a),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,s;return(e=this.attrs.width)!==null&&e!==void 0?e:(s=this.image())===null||s===void 0?void 0:s.width}getHeight(){var e,s;return(e=this.attrs.height)!==null&&e!==void 0?e:(s=this.image())===null||s===void 0?void 0:s.height}static fromURL(e,s,a=null){const c=Util_1$7.Util.createImageElement();c.onload=function(){const h=new Image({image:c});s(h)},c.onerror=a,c.crossOrigin="Anonymous",c.src=e}}Image$1.Image=Image;Image.prototype.className="Image";(0,Global_1$a._registerNode)(Image);Factory_1$p.Factory.addGetterSetter(Image,"cornerRadius",0,(0,Validators_1$p.getNumberOrArrayOfNumbersValidator)(4));Factory_1$p.Factory.addGetterSetter(Image,"image");Factory_1$p.Factory.addComponentsGetterSetter(Image,"crop",["x","y","width","height"]);Factory_1$p.Factory.addGetterSetter(Image,"cropX",0,(0,Validators_1$p.getNumberValidator)());Factory_1$p.Factory.addGetterSetter(Image,"cropY",0,(0,Validators_1$p.getNumberValidator)());Factory_1$p.Factory.addGetterSetter(Image,"cropWidth",0,(0,Validators_1$p.getNumberValidator)());Factory_1$p.Factory.addGetterSetter(Image,"cropHeight",0,(0,Validators_1$p.getNumberValidator)());var Label$1={};Object.defineProperty(Label$1,"__esModule",{value:!0});Label$1.Tag=Label$1.Label=void 0;const Factory_1$o=Factory,Shape_1$9=Shape,Group_1$1=Group$1,Validators_1$o=Validators,Global_1$9=Global,ATTR_CHANGE_LIST$2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],CHANGE_KONVA$1="Change.konva",NONE$1="none",UP="up",RIGHT$1="right",DOWN="down",LEFT$1="left",attrChangeListLen$1=ATTR_CHANGE_LIST$2.length;class Label extends Group_1$1.Group{constructor(e){super(e),this.on("add.konva",function(s){this._addListeners(s.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let s=this,a;const c=function(){s._sync()};for(a=0;a<attrChangeListLen$1;a++)e.on(ATTR_CHANGE_LIST$2[a]+CHANGE_KONVA$1,c)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),s=this.getTag(),a,c,h,d,g,_,b;if(e&&s){switch(a=e.width(),c=e.height(),h=s.pointerDirection(),d=s.pointerWidth(),b=s.pointerHeight(),g=0,_=0,h){case UP:g=a/2,_=-1*b;break;case RIGHT$1:g=a+d,_=c/2;break;case DOWN:g=a/2,_=c+b;break;case LEFT$1:g=-1*d,_=c/2;break}s.setAttrs({x:-1*g,y:-1*_,width:a,height:c}),e.setAttrs({x:-1*g,y:-1*_})}}}Label$1.Label=Label;Label.prototype.className="Label";(0,Global_1$9._registerNode)(Label);class Tag extends Shape_1$9.Shape{_sceneFunc(e){const s=this.width(),a=this.height(),c=this.pointerDirection(),h=this.pointerWidth(),d=this.pointerHeight(),g=this.cornerRadius();let _=0,b=0,j=0,rt=0;typeof g=="number"?_=b=j=rt=Math.min(g,s/2,a/2):(_=Math.min(g[0]||0,s/2,a/2),b=Math.min(g[1]||0,s/2,a/2),rt=Math.min(g[2]||0,s/2,a/2),j=Math.min(g[3]||0,s/2,a/2)),e.beginPath(),e.moveTo(_,0),c===UP&&(e.lineTo((s-h)/2,0),e.lineTo(s/2,-1*d),e.lineTo((s+h)/2,0)),e.lineTo(s-b,0),e.arc(s-b,b,b,Math.PI*3/2,0,!1),c===RIGHT$1&&(e.lineTo(s,(a-d)/2),e.lineTo(s+h,a/2),e.lineTo(s,(a+d)/2)),e.lineTo(s,a-rt),e.arc(s-rt,a-rt,rt,0,Math.PI/2,!1),c===DOWN&&(e.lineTo((s+h)/2,a),e.lineTo(s/2,a+d),e.lineTo((s-h)/2,a)),e.lineTo(j,a),e.arc(j,a-j,j,Math.PI/2,Math.PI,!1),c===LEFT$1&&(e.lineTo(0,(a+d)/2),e.lineTo(-1*h,a/2),e.lineTo(0,(a-d)/2)),e.lineTo(0,_),e.arc(_,_,_,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,s=0,a=this.pointerWidth(),c=this.pointerHeight(),h=this.pointerDirection(),d=this.width(),g=this.height();return h===UP?(s-=c,g+=c):h===DOWN?g+=c:h===LEFT$1?(e-=a*1.5,d+=a):h===RIGHT$1&&(d+=a*1.5),{x:e,y:s,width:d,height:g}}}Label$1.Tag=Tag;Tag.prototype.className="Tag";(0,Global_1$9._registerNode)(Tag);Factory_1$o.Factory.addGetterSetter(Tag,"pointerDirection",NONE$1);Factory_1$o.Factory.addGetterSetter(Tag,"pointerWidth",0,(0,Validators_1$o.getNumberValidator)());Factory_1$o.Factory.addGetterSetter(Tag,"pointerHeight",0,(0,Validators_1$o.getNumberValidator)());Factory_1$o.Factory.addGetterSetter(Tag,"cornerRadius",0,(0,Validators_1$o.getNumberOrArrayOfNumbersValidator)(4));var Rect$1={};Object.defineProperty(Rect$1,"__esModule",{value:!0});Rect$1.Rect=void 0;const Factory_1$n=Factory,Shape_1$8=Shape,Global_1$8=Global,Util_1$6=Util,Validators_1$n=Validators;class Rect extends Shape_1$8.Shape{_sceneFunc(e){const s=this.cornerRadius(),a=this.width(),c=this.height();e.beginPath(),s?Util_1$6.Util.drawRoundedRectPath(e,a,c,s):e.rect(0,0,a,c),e.closePath(),e.fillStrokeShape(this)}}Rect$1.Rect=Rect;Rect.prototype.className="Rect";(0,Global_1$8._registerNode)(Rect);Factory_1$n.Factory.addGetterSetter(Rect,"cornerRadius",0,(0,Validators_1$n.getNumberOrArrayOfNumbersValidator)(4));var RegularPolygon$1={};Object.defineProperty(RegularPolygon$1,"__esModule",{value:!0});RegularPolygon$1.RegularPolygon=void 0;const Factory_1$m=Factory,Shape_1$7=Shape,Validators_1$m=Validators,Global_1$7=Global;class RegularPolygon extends Shape_1$7.Shape{_sceneFunc(e){const s=this._getPoints();e.beginPath(),e.moveTo(s[0].x,s[0].y);for(let a=1;a<s.length;a++)e.lineTo(s[a].x,s[a].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,s=this.attrs.radius||0,a=[];for(let c=0;c<e;c++)a.push({x:s*Math.sin(c*2*Math.PI/e),y:-1*s*Math.cos(c*2*Math.PI/e)});return a}getSelfRect(){const e=this._getPoints();let s=e[0].x,a=e[0].y,c=e[0].x,h=e[0].y;return e.forEach(d=>{s=Math.min(s,d.x),a=Math.max(a,d.x),c=Math.min(c,d.y),h=Math.max(h,d.y)}),{x:s,y:c,width:a-s,height:h-c}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}RegularPolygon$1.RegularPolygon=RegularPolygon;RegularPolygon.prototype.className="RegularPolygon";RegularPolygon.prototype._centroid=!0;RegularPolygon.prototype._attrsAffectingSize=["radius"];(0,Global_1$7._registerNode)(RegularPolygon);Factory_1$m.Factory.addGetterSetter(RegularPolygon,"radius",0,(0,Validators_1$m.getNumberValidator)());Factory_1$m.Factory.addGetterSetter(RegularPolygon,"sides",0,(0,Validators_1$m.getNumberValidator)());var Ring$1={};Object.defineProperty(Ring$1,"__esModule",{value:!0});Ring$1.Ring=void 0;const Factory_1$l=Factory,Shape_1$6=Shape,Validators_1$l=Validators,Global_1$6=Global,PIx2=Math.PI*2;class Ring extends Shape_1$6.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,PIx2,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),PIx2,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Ring$1.Ring=Ring;Ring.prototype.className="Ring";Ring.prototype._centroid=!0;Ring.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Global_1$6._registerNode)(Ring);Factory_1$l.Factory.addGetterSetter(Ring,"innerRadius",0,(0,Validators_1$l.getNumberValidator)());Factory_1$l.Factory.addGetterSetter(Ring,"outerRadius",0,(0,Validators_1$l.getNumberValidator)());var Sprite$1={};Object.defineProperty(Sprite$1,"__esModule",{value:!0});Sprite$1.Sprite=void 0;const Factory_1$k=Factory,Shape_1$5=Shape,Animation_1=Animation$1,Validators_1$k=Validators,Global_1$5=Global;class Sprite extends Shape_1$5.Shape{constructor(e){super(e),this._updated=!0,this.anim=new Animation_1.Animation(()=>{const s=this._updated;return this._updated=!1,s}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const s=this.animation(),a=this.frameIndex(),c=a*4,h=this.animations()[s],d=this.frameOffsets(),g=h[c+0],_=h[c+1],b=h[c+2],j=h[c+3],rt=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,b,j),e.closePath(),e.fillStrokeShape(this)),rt)if(d){const tt=d[s],nt=a*2;e.drawImage(rt,g,_,b,j,tt[nt+0],tt[nt+1],b,j)}else e.drawImage(rt,g,_,b,j,0,0,b,j)}_hitFunc(e){const s=this.animation(),a=this.frameIndex(),c=a*4,h=this.animations()[s],d=this.frameOffsets(),g=h[c+2],_=h[c+3];if(e.beginPath(),d){const b=d[s],j=a*2;e.rect(b[j+0],b[j+1],g,_)}else e.rect(0,0,g,_);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),s=this.animation(),a=this.animations(),c=a[s],h=c.length/4;e<h-1?this.frameIndex(e+1):this.frameIndex(0)}}Sprite$1.Sprite=Sprite;Sprite.prototype.className="Sprite";(0,Global_1$5._registerNode)(Sprite);Factory_1$k.Factory.addGetterSetter(Sprite,"animation");Factory_1$k.Factory.addGetterSetter(Sprite,"animations");Factory_1$k.Factory.addGetterSetter(Sprite,"frameOffsets");Factory_1$k.Factory.addGetterSetter(Sprite,"image");Factory_1$k.Factory.addGetterSetter(Sprite,"frameIndex",0,(0,Validators_1$k.getNumberValidator)());Factory_1$k.Factory.addGetterSetter(Sprite,"frameRate",17,(0,Validators_1$k.getNumberValidator)());Factory_1$k.Factory.backCompat(Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Star$1={};Object.defineProperty(Star$1,"__esModule",{value:!0});Star$1.Star=void 0;const Factory_1$j=Factory,Shape_1$4=Shape,Validators_1$j=Validators,Global_1$4=Global;class Star extends Shape_1$4.Shape{_sceneFunc(e){const s=this.innerRadius(),a=this.outerRadius(),c=this.numPoints();e.beginPath(),e.moveTo(0,0-a);for(let h=1;h<c*2;h++){const d=h%2===0?a:s,g=d*Math.sin(h*Math.PI/c),_=-1*d*Math.cos(h*Math.PI/c);e.lineTo(g,_)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Star$1.Star=Star;Star.prototype.className="Star";Star.prototype._centroid=!0;Star.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Global_1$4._registerNode)(Star);Factory_1$j.Factory.addGetterSetter(Star,"numPoints",5,(0,Validators_1$j.getNumberValidator)());Factory_1$j.Factory.addGetterSetter(Star,"innerRadius",0,(0,Validators_1$j.getNumberValidator)());Factory_1$j.Factory.addGetterSetter(Star,"outerRadius",0,(0,Validators_1$j.getNumberValidator)());var Text$1={};Object.defineProperty(Text$1,"__esModule",{value:!0});Text$1.Text=void 0;Text$1.stringToArray=stringToArray;const Util_1$5=Util,Factory_1$i=Factory,Shape_1$3=Shape,Global_1$3=Global,Validators_1$i=Validators,Global_2$2=Global;function stringToArray(o){return[...o].reduce((e,s,a,c)=>{if(new RegExp("\\p{Emoji}","u").test(s)){const h=c[a+1];h&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(h)?(e.push(s+h),c[a+1]=""):e.push(s)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(s+(c[a+1]||""))?e.push(s+c[a+1]):a>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(s)?e[e.length-1]+=s:s&&e.push(s);return e},[])}const AUTO="auto",CENTER="center",INHERIT="inherit",JUSTIFY="justify",CHANGE_KONVA="Change.konva",CONTEXT_2D="2d",DASH="-",LEFT="left",TEXT="text",TEXT_UPPER="Text",TOP="top",BOTTOM="bottom",MIDDLE="middle",NORMAL$1="normal",PX_SPACE="px ",SPACE=" ",RIGHT="right",RTL="rtl",WORD="word",CHAR="char",NONE="none",ELLIPSIS="…",ATTR_CHANGE_LIST$1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],attrChangeListLen=ATTR_CHANGE_LIST$1.length;function normalizeFontFamily(o){return o.split(",").map(e=>{e=e.trim();const s=e.indexOf(" ")>=0,a=e.indexOf('"')>=0||e.indexOf("'")>=0;return s&&!a&&(e=`"${e}"`),e}).join(", ")}let dummyContext;function getDummyContext(){return dummyContext||(dummyContext=Util_1$5.Util.createCanvasElement().getContext(CONTEXT_2D),dummyContext)}function _fillFunc$1(o){o.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _strokeFunc$1(o){o.setAttr("miterLimit",2),o.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function checkDefaultFill(o){return o=o||{},!o.fillLinearGradientColorStops&&!o.fillRadialGradientColorStops&&!o.fillPatternImage&&(o.fill=o.fill||"black"),o}class Text extends Shape_1$3.Shape{constructor(e){super(checkDefaultFill(e)),this._partialTextX=0,this._partialTextY=0;for(let s=0;s<attrChangeListLen;s++)this.on(ATTR_CHANGE_LIST$1[s]+CHANGE_KONVA,this._setTextData);this._setTextData()}_sceneFunc(e){const s=this.textArr,a=s.length;if(!this.text())return;let c=this.padding(),h=this.fontSize(),d=this.lineHeight()*h,g=this.verticalAlign(),_=this.direction(),b=0,j=this.align(),rt=this.getWidth(),tt=this.letterSpacing(),nt=this.fill(),_e=this.textDecoration(),st=_e.indexOf("underline")!==-1,at=_e.indexOf("line-through")!==-1,ot;_=_===INHERIT?e.direction:_;let it=d/2,$=MIDDLE;if(Global_1$3.Konva._fixTextRendering){const et=this.measureSize("M");$="alphabetic",it=(et.fontBoundingBoxAscent-et.fontBoundingBoxDescent)/2+d/2}for(_===RTL&&e.setAttr("direction",_),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",$),e.setAttr("textAlign",LEFT),g===MIDDLE?b=(this.getHeight()-a*d-c*2)/2:g===BOTTOM&&(b=this.getHeight()-a*d-c*2),e.translate(c,b+c),ot=0;ot<a;ot++){let et=0,lt=0;const ut=s[ot],dt=ut.text,ct=ut.width,pt=ut.lastInParagraph;if(e.save(),j===RIGHT?et+=rt-ct-c*2:j===CENTER&&(et+=(rt-ct-c*2)/2),st){e.save(),e.beginPath();const ht=Global_1$3.Konva._fixTextRendering?Math.round(h/4):Math.round(h/2),gt=et,yt=it+lt+ht;e.moveTo(gt,yt);const St=j===JUSTIFY&&!pt?rt-c*2:ct;e.lineTo(gt+Math.round(St),yt),e.lineWidth=h/15;const Et=this._getLinearGradient();e.strokeStyle=Et||nt,e.stroke(),e.restore()}if(at){e.save(),e.beginPath();const ht=Global_1$3.Konva._fixTextRendering?-Math.round(h/4):0;e.moveTo(et,it+lt+ht);const gt=j===JUSTIFY&&!pt?rt-c*2:ct;e.lineTo(et+Math.round(gt),it+lt+ht),e.lineWidth=h/15;const yt=this._getLinearGradient();e.strokeStyle=yt||nt,e.stroke(),e.restore()}if(_!==RTL&&(tt!==0||j===JUSTIFY)){const ht=dt.split(" ").length-1,gt=stringToArray(dt);for(let yt=0;yt<gt.length;yt++){const St=gt[yt];St===" "&&!pt&&j===JUSTIFY&&(et+=(rt-c*2-ct)/ht),this._partialTextX=et,this._partialTextY=it+lt,this._partialText=St,e.fillStrokeShape(this),et+=this.measureSize(St).width+tt}}else tt!==0&&e.setAttr("letterSpacing",`${tt}px`),this._partialTextX=et,this._partialTextY=it+lt,this._partialText=dt,e.fillStrokeShape(this);e.restore(),a>1&&(it+=d)}}_hitFunc(e){const s=this.getWidth(),a=this.getHeight();e.beginPath(),e.rect(0,0,s,a),e.closePath(),e.fillStrokeShape(this)}setText(e){const s=Util_1$5.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(TEXT,s),this}getWidth(){return this.attrs.width===AUTO||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===AUTO||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Util_1$5.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var s,a,c,h,d,g,_,b,j,rt,tt;let nt=getDummyContext(),_e=this.fontSize(),st;nt.save(),nt.font=this._getContextFont(),st=nt.measureText(e),nt.restore();const at=_e/100;return{actualBoundingBoxAscent:(s=st.actualBoundingBoxAscent)!==null&&s!==void 0?s:71.58203125*at,actualBoundingBoxDescent:(a=st.actualBoundingBoxDescent)!==null&&a!==void 0?a:0,actualBoundingBoxLeft:(c=st.actualBoundingBoxLeft)!==null&&c!==void 0?c:-7.421875*at,actualBoundingBoxRight:(h=st.actualBoundingBoxRight)!==null&&h!==void 0?h:75.732421875*at,alphabeticBaseline:(d=st.alphabeticBaseline)!==null&&d!==void 0?d:0,emHeightAscent:(g=st.emHeightAscent)!==null&&g!==void 0?g:100*at,emHeightDescent:(_=st.emHeightDescent)!==null&&_!==void 0?_:-20*at,fontBoundingBoxAscent:(b=st.fontBoundingBoxAscent)!==null&&b!==void 0?b:91*at,fontBoundingBoxDescent:(j=st.fontBoundingBoxDescent)!==null&&j!==void 0?j:21*at,hangingBaseline:(rt=st.hangingBaseline)!==null&&rt!==void 0?rt:72.80000305175781*at,ideographicBaseline:(tt=st.ideographicBaseline)!==null&&tt!==void 0?tt:-21*at,width:st.width,height:_e}}_getContextFont(){return this.fontStyle()+SPACE+this.fontVariant()+SPACE+(this.fontSize()+PX_SPACE)+normalizeFontFamily(this.fontFamily())}_addTextLine(e){this.align()===JUSTIFY&&(e=e.trim());const a=this._getTextWidth(e);return this.textArr.push({text:e,width:a,lastInParagraph:!1})}_getTextWidth(e){const s=this.letterSpacing(),a=e.length;return getDummyContext().measureText(e).width+s*a}_setTextData(){let e=this.text().split(`
`),s=+this.fontSize(),a=0,c=this.lineHeight()*s,h=this.attrs.width,d=this.attrs.height,g=h!==AUTO&&h!==void 0,_=d!==AUTO&&d!==void 0,b=this.padding(),j=h-b*2,rt=d-b*2,tt=0,nt=this.wrap(),_e=nt!==NONE,st=nt!==CHAR&&_e,at=this.ellipsis();this.textArr=[],getDummyContext().font=this._getContextFont();const ot=at?this._getTextWidth(ELLIPSIS):0;for(let it=0,$=e.length;it<$;++it){let et=e[it],lt=this._getTextWidth(et);if(g&&lt>j)for(;et.length>0;){let ut=0,dt=stringToArray(et).length,ct="",pt=0;for(;ut<dt;){const ht=ut+dt>>>1,gt=stringToArray(et),yt=gt.slice(0,ht+1).join(""),St=this._getTextWidth(yt);(at&&_&&tt+c>rt?St+ot:St)<=j?(ut=ht+1,ct=yt,pt=St):dt=ht}if(ct){if(st){const yt=stringToArray(et),St=stringToArray(ct),Et=yt[St.length],kt=Et===SPACE||Et===DASH;let Pt;if(kt&&pt<=j)Pt=St.length;else{const bt=St.lastIndexOf(SPACE),mt=St.lastIndexOf(DASH);Pt=Math.max(bt,mt)+1}Pt>0&&(ut=Pt,ct=yt.slice(0,ut).join(""),pt=this._getTextWidth(ct))}if(ct=ct.trimRight(),this._addTextLine(ct),a=Math.max(a,pt),tt+=c,this._shouldHandleEllipsis(tt)){this._tryToAddEllipsisToLastLine();break}if(et=stringToArray(et).slice(ut).join("").trimLeft(),et.length>0&&(lt=this._getTextWidth(et),lt<=j)){this._addTextLine(et),tt+=c,a=Math.max(a,lt);break}}else break}else this._addTextLine(et),tt+=c,a=Math.max(a,lt),this._shouldHandleEllipsis(tt)&&it<$-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),_&&tt+c>rt)break}this.textHeight=s,this.textWidth=a}_shouldHandleEllipsis(e){const s=+this.fontSize(),a=this.lineHeight()*s,c=this.attrs.height,h=c!==AUTO&&c!==void 0,d=this.padding(),g=c-d*2;return!(this.wrap()!==NONE)||h&&e+a>g}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,s=e!==AUTO&&e!==void 0,a=this.padding(),c=e-a*2,h=this.ellipsis(),d=this.textArr[this.textArr.length-1];!d||!h||(s&&(this._getTextWidth(d.text+ELLIPSIS)<c||(d.text=d.text.slice(0,d.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(d.text+ELLIPSIS))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,s=this.hasShadow();return e&&s?!0:super._useBufferCanvas()}}Text$1.Text=Text;Text.prototype._fillFunc=_fillFunc$1;Text.prototype._strokeFunc=_strokeFunc$1;Text.prototype.className=TEXT_UPPER;Text.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,Global_2$2._registerNode)(Text);Factory_1$i.Factory.overWriteSetter(Text,"width",(0,Validators_1$i.getNumberOrAutoValidator)());Factory_1$i.Factory.overWriteSetter(Text,"height",(0,Validators_1$i.getNumberOrAutoValidator)());Factory_1$i.Factory.addGetterSetter(Text,"direction",INHERIT);Factory_1$i.Factory.addGetterSetter(Text,"fontFamily","Arial");Factory_1$i.Factory.addGetterSetter(Text,"fontSize",12,(0,Validators_1$i.getNumberValidator)());Factory_1$i.Factory.addGetterSetter(Text,"fontStyle",NORMAL$1);Factory_1$i.Factory.addGetterSetter(Text,"fontVariant",NORMAL$1);Factory_1$i.Factory.addGetterSetter(Text,"padding",0,(0,Validators_1$i.getNumberValidator)());Factory_1$i.Factory.addGetterSetter(Text,"align",LEFT);Factory_1$i.Factory.addGetterSetter(Text,"verticalAlign",TOP);Factory_1$i.Factory.addGetterSetter(Text,"lineHeight",1,(0,Validators_1$i.getNumberValidator)());Factory_1$i.Factory.addGetterSetter(Text,"wrap",WORD);Factory_1$i.Factory.addGetterSetter(Text,"ellipsis",!1,(0,Validators_1$i.getBooleanValidator)());Factory_1$i.Factory.addGetterSetter(Text,"letterSpacing",0,(0,Validators_1$i.getNumberValidator)());Factory_1$i.Factory.addGetterSetter(Text,"text","",(0,Validators_1$i.getStringValidator)());Factory_1$i.Factory.addGetterSetter(Text,"textDecoration","");var TextPath$1={};Object.defineProperty(TextPath$1,"__esModule",{value:!0});TextPath$1.TextPath=void 0;const Util_1$4=Util,Factory_1$h=Factory,Shape_1$2=Shape,Path_1$1=Path$1,Text_1$1=Text$1,Validators_1$h=Validators,Global_1$2=Global,EMPTY_STRING="",NORMAL="normal";function _fillFunc(o){o.fillText(this.partialText,0,0)}function _strokeFunc(o){o.strokeText(this.partialText,0,0)}class TextPath extends Shape_1$2.Shape{constructor(e){super(e),this.dummyCanvas=Util_1$4.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Path_1$1.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const s=this.pathLength;return e-1>s?null:Path_1$1.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Path_1$1.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const s=this.textDecoration(),a=this.fill(),c=this.fontSize(),h=this.glyphInfo;s==="underline"&&e.beginPath();for(let d=0;d<h.length;d++){e.save();const g=h[d].p0;e.translate(g.x,g.y),e.rotate(h[d].rotation),this.partialText=h[d].text,e.fillStrokeShape(this),s==="underline"&&(d===0&&e.moveTo(0,c/2+1),e.lineTo(c,c/2+1)),e.restore()}s==="underline"&&(e.strokeStyle=a,e.lineWidth=c/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const s=this.glyphInfo;if(s.length>=1){const a=s[0].p0;e.moveTo(a.x,a.y)}for(let a=0;a<s.length;a++){const c=s[a].p1;e.lineTo(c.x,c.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Util_1$4.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Text_1$1.Text.prototype.setText.call(this,e)}_getContextFont(){return Text_1$1.Text.prototype._getContextFont.call(this)}_getTextSize(e){const a=this.dummyCanvas.getContext("2d");a.save(),a.font=this._getContextFont();const c=a.measureText(e);return a.restore(),{width:c.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const a=this.letterSpacing(),c=this.align(),h=this.kerningFunc(),d=Math.max(this.textWidth+((this.attrs.text||"").length-1)*a,0);let g=0;c==="center"&&(g=Math.max(0,this.pathLength/2-d/2)),c==="right"&&(g=Math.max(0,this.pathLength-d));const _=(0,Text_1$1.stringToArray)(this.text());let b=g;for(let j=0;j<_.length;j++){const rt=this._getPointAtLength(b);if(!rt)return;let tt=this._getTextSize(_[j]).width+a;if(_[j]===" "&&c==="justify"){const it=this.text().split(" ").length-1;tt+=(this.pathLength-d)/it}const nt=this._getPointAtLength(b+tt);if(!nt)return;const _e=Path_1$1.Path.getLineLength(rt.x,rt.y,nt.x,nt.y);let st=0;if(h)try{st=h(_[j-1],_[j])*this.fontSize()}catch{st=0}rt.x+=st,nt.x+=st,this.textWidth+=st;const at=Path_1$1.Path.getPointOnLine(st+_e/2,rt.x,rt.y,nt.x,nt.y),ot=Math.atan2(nt.y-rt.y,nt.x-rt.x);this.glyphInfo.push({transposeX:at.x,transposeY:at.y,text:_[j],rotation:ot,p0:rt,p1:nt}),b+=tt}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(b){e.push(b.p0.x),e.push(b.p0.y),e.push(b.p1.x),e.push(b.p1.y)});let s=e[0]||0,a=e[0]||0,c=e[1]||0,h=e[1]||0,d,g;for(let b=0;b<e.length/2;b++)d=e[b*2],g=e[b*2+1],s=Math.min(s,d),a=Math.max(a,d),c=Math.min(c,g),h=Math.max(h,g);const _=this.fontSize();return{x:s-_/2,y:c-_/2,width:a-s+_,height:h-c+_}}destroy(){return Util_1$4.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}TextPath$1.TextPath=TextPath;TextPath.prototype._fillFunc=_fillFunc;TextPath.prototype._strokeFunc=_strokeFunc;TextPath.prototype._fillFuncHit=_fillFunc;TextPath.prototype._strokeFuncHit=_strokeFunc;TextPath.prototype.className="TextPath";TextPath.prototype._attrsAffectingSize=["text","fontSize","data"];(0,Global_1$2._registerNode)(TextPath);Factory_1$h.Factory.addGetterSetter(TextPath,"data");Factory_1$h.Factory.addGetterSetter(TextPath,"fontFamily","Arial");Factory_1$h.Factory.addGetterSetter(TextPath,"fontSize",12,(0,Validators_1$h.getNumberValidator)());Factory_1$h.Factory.addGetterSetter(TextPath,"fontStyle",NORMAL);Factory_1$h.Factory.addGetterSetter(TextPath,"align","left");Factory_1$h.Factory.addGetterSetter(TextPath,"letterSpacing",0,(0,Validators_1$h.getNumberValidator)());Factory_1$h.Factory.addGetterSetter(TextPath,"textBaseline","middle");Factory_1$h.Factory.addGetterSetter(TextPath,"fontVariant",NORMAL);Factory_1$h.Factory.addGetterSetter(TextPath,"text",EMPTY_STRING);Factory_1$h.Factory.addGetterSetter(TextPath,"textDecoration","");Factory_1$h.Factory.addGetterSetter(TextPath,"kerningFunc",void 0);var Transformer$1={};Object.defineProperty(Transformer$1,"__esModule",{value:!0});Transformer$1.Transformer=void 0;const Util_1$3=Util,Factory_1$g=Factory,Node_1$f=Node$1,Shape_1$1=Shape,Rect_1$1=Rect$1,Group_1=Group$1,Global_1$1=Global,Validators_1$g=Validators,Global_2$1=Global,EVENTS_NAME="tr-konva",ATTR_CHANGE_LIST=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(o=>o+`.${EVENTS_NAME}`).join(" "),NODES_RECT="nodesRect",TRANSFORM_CHANGE_STR=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],ANGLES={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},TOUCH_DEVICE="ontouchstart"in Global_1$1.Konva._global;function getCursor(o,e,s){if(o==="rotater")return s;e+=Util_1$3.Util.degToRad(ANGLES[o]||0);const a=(Util_1$3.Util.radToDeg(e)%360+360)%360;return Util_1$3.Util._inRange(a,315+22.5,360)||Util_1$3.Util._inRange(a,0,22.5)?"ns-resize":Util_1$3.Util._inRange(a,45-22.5,45+22.5)?"nesw-resize":Util_1$3.Util._inRange(a,90-22.5,90+22.5)?"ew-resize":Util_1$3.Util._inRange(a,135-22.5,135+22.5)?"nwse-resize":Util_1$3.Util._inRange(a,180-22.5,180+22.5)?"ns-resize":Util_1$3.Util._inRange(a,225-22.5,225+22.5)?"nesw-resize":Util_1$3.Util._inRange(a,270-22.5,270+22.5)?"ew-resize":Util_1$3.Util._inRange(a,315-22.5,315+22.5)?"nwse-resize":(Util_1$3.Util.error("Transformer has unknown angle for cursor detection: "+a),"pointer")}const ANCHORS_NAMES=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function getCenter(o){return{x:o.x+o.width/2*Math.cos(o.rotation)+o.height/2*Math.sin(-o.rotation),y:o.y+o.height/2*Math.cos(o.rotation)+o.width/2*Math.sin(o.rotation)}}function rotateAroundPoint(o,e,s){const a=s.x+(o.x-s.x)*Math.cos(e)-(o.y-s.y)*Math.sin(e),c=s.y+(o.x-s.x)*Math.sin(e)+(o.y-s.y)*Math.cos(e);return{...o,rotation:o.rotation+e,x:a,y:c}}function rotateAroundCenter(o,e){const s=getCenter(o);return rotateAroundPoint(o,e,s)}function getSnap(o,e,s){let a=e;for(let c=0;c<o.length;c++){const h=Global_1$1.Konva.getAngle(o[c]),d=Math.abs(h-e)%(Math.PI*2);Math.min(d,Math.PI*2-d)<s&&(a=h)}return a}let activeTransformersCount=0;class Transformer extends Group_1.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ATTR_CHANGE_LIST,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Util_1$3.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return EVENTS_NAME+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const s=e.filter(c=>c.isAncestorOf(this)?(Util_1$3.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=s,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(c=>{const h=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(c._attrsAffectingSize.length){const d=c._attrsAffectingSize.map(g=>g+"Change."+this._getEventNamespace()).join(" ");c.on(d,h)}c.on(TRANSFORM_CHANGE_STR.map(d=>d+`.${this._getEventNamespace()}`).join(" "),h),c.on(`absoluteTransformChange.${this._getEventNamespace()}`,h),this._proxyDrag(c)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let s;e.on(`dragstart.${this._getEventNamespace()}`,a=>{s=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(a,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,a=>{if(!s)return;const c=e.getAbsolutePosition(),h=c.x-s.x,d=c.y-s.y;this.nodes().forEach(g=>{if(g===e||g.isDragging())return;const _=g.getAbsolutePosition();g.setAbsolutePosition({x:_.x+h,y:_.y+d}),g.startDrag(a)}),s=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(NODES_RECT),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(NODES_RECT,this.__getNodeRect)}__getNodeShape(e,s=this.rotation(),a){const c=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),h=e.getAbsoluteScale(a),d=e.getAbsolutePosition(a),g=c.x*h.x-e.offsetX()*h.x,_=c.y*h.y-e.offsetY()*h.y,b=(Global_1$1.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),j={x:d.x+g*Math.cos(b)+_*Math.sin(-b),y:d.y+_*Math.cos(b)+g*Math.sin(b),width:c.width*h.x,height:c.height*h.y,rotation:b};return rotateAroundPoint(j,-Global_1$1.Konva.getAngle(s),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const s=[];this.nodes().map(b=>{const j=b.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),rt=[{x:j.x,y:j.y},{x:j.x+j.width,y:j.y},{x:j.x+j.width,y:j.y+j.height},{x:j.x,y:j.y+j.height}],tt=b.getAbsoluteTransform();rt.forEach(function(nt){const _e=tt.point(nt);s.push(_e)})});const a=new Util_1$3.Transform;a.rotate(-Global_1$1.Konva.getAngle(this.rotation()));let c=1/0,h=1/0,d=-1/0,g=-1/0;s.forEach(function(b){const j=a.point(b);c===void 0&&(c=d=j.x,h=g=j.y),c=Math.min(c,j.x),h=Math.min(h,j.y),d=Math.max(d,j.x),g=Math.max(g,j.y)}),a.invert();const _=a.point({x:c,y:h});return{x:_.x,y:_.y,width:d-c,height:g-h,rotation:Global_1$1.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ANCHORS_NAMES.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const s=new Rect_1$1.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:TOUCH_DEVICE?10:"auto"}),a=this;s.on("mousedown touchstart",function(c){a._handleMouseDown(c)}),s.on("dragstart",c=>{s.stopDrag(),c.cancelBubble=!0}),s.on("dragend",c=>{c.cancelBubble=!0}),s.on("mouseenter",()=>{const c=Global_1$1.Konva.getAngle(this.rotation()),h=this.rotateAnchorCursor(),d=getCursor(e,c,h);s.getStage().content&&(s.getStage().content.style.cursor=d),this._cursorChange=!0}),s.on("mouseout",()=>{s.getStage().content&&(s.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(s)}_createBack(){const e=new Shape_1$1.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(s,a){const c=a.getParent(),h=c.padding();s.beginPath(),s.rect(-h,-h,a.width()+h*2,a.height()+h*2),s.moveTo(a.width()/2,-h),c.rotateEnabled()&&c.rotateLineVisible()&&s.lineTo(a.width()/2,-c.rotateAnchorOffset()*Util_1$3.Util._sign(a.height())-h),s.fillStrokeShape(a)},hitFunc:(s,a)=>{if(!this.shouldOverdrawWholeArea())return;const c=this.padding();s.beginPath(),s.rect(-c,-c,a.width()+c*2,a.height()+c*2),s.fillStrokeShape(a)}});this.add(e),this._proxyDrag(e),e.on("dragstart",s=>{s.cancelBubble=!0}),e.on("dragmove",s=>{s.cancelBubble=!0}),e.on("dragend",s=>{s.cancelBubble=!0}),this.on("dragmove",s=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const s=this._getNodeRect(),a=s.width,c=s.height,h=Math.sqrt(Math.pow(a,2)+Math.pow(c,2));this.sin=Math.abs(c/h),this.cos=Math.abs(a/h),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const d=e.target.getAbsolutePosition(),g=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:g.x-d.x,y:g.y-d.y},activeTransformersCount++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(_=>{_._fire("transformstart",{evt:e.evt,target:_})})}_handleMouseMove(e){let s,a,c;const h=this.findOne("."+this._movingAnchorName),d=h.getStage();d.setPointersPositions(e);const g=d.getPointerPosition();let _={x:g.x-this._anchorDragOffset.x,y:g.y-this._anchorDragOffset.y};const b=h.getAbsolutePosition();this.anchorDragBoundFunc()&&(_=this.anchorDragBoundFunc()(b,_,e)),h.setAbsolutePosition(_);const j=h.getAbsolutePosition();if(b.x===j.x&&b.y===j.y)return;if(this._movingAnchorName==="rotater"){const it=this._getNodeRect();s=h.x()-it.width/2,a=-h.y()+it.height/2;let $=Math.atan2(-a,s)+Math.PI/2;it.height<0&&($-=Math.PI);const lt=Global_1$1.Konva.getAngle(this.rotation())+$,ut=Global_1$1.Konva.getAngle(this.rotationSnapTolerance()),ct=getSnap(this.rotationSnaps(),lt,ut)-it.rotation,pt=rotateAroundCenter(it,ct);this._fitNodesInto(pt,e);return}const rt=this.shiftBehavior();let tt;rt==="inverted"?tt=this.keepRatio()&&!e.shiftKey:rt==="none"?tt=this.keepRatio():tt=this.keepRatio()||e.shiftKey;let nt=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(tt){const it=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};c=Math.sqrt(Math.pow(it.x-h.x(),2)+Math.pow(it.y-h.y(),2));const $=this.findOne(".top-left").x()>it.x?-1:1,et=this.findOne(".top-left").y()>it.y?-1:1;s=c*this.cos*$,a=c*this.sin*et,this.findOne(".top-left").x(it.x-s),this.findOne(".top-left").y(it.y-a)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(h.y());else if(this._movingAnchorName==="top-right"){if(tt){const it=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};c=Math.sqrt(Math.pow(h.x()-it.x,2)+Math.pow(it.y-h.y(),2));const $=this.findOne(".top-right").x()<it.x?-1:1,et=this.findOne(".top-right").y()>it.y?-1:1;s=c*this.cos*$,a=c*this.sin*et,this.findOne(".top-right").x(it.x+s),this.findOne(".top-right").y(it.y-a)}var _e=h.position();this.findOne(".top-left").y(_e.y),this.findOne(".bottom-right").x(_e.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(h.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(h.x());else if(this._movingAnchorName==="bottom-left"){if(tt){const it=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};c=Math.sqrt(Math.pow(it.x-h.x(),2)+Math.pow(h.y()-it.y,2));const $=it.x<h.x()?-1:1,et=h.y()<it.y?-1:1;s=c*this.cos*$,a=c*this.sin*et,h.x(it.x-s),h.y(it.y+a)}_e=h.position(),this.findOne(".top-left").x(_e.x),this.findOne(".bottom-right").y(_e.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(h.y());else if(this._movingAnchorName==="bottom-right"){if(tt){const it=nt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};c=Math.sqrt(Math.pow(h.x()-it.x,2)+Math.pow(h.y()-it.y,2));const $=this.findOne(".bottom-right").x()<it.x?-1:1,et=this.findOne(".bottom-right").y()<it.y?-1:1;s=c*this.cos*$,a=c*this.sin*et,this.findOne(".bottom-right").x(it.x+s),this.findOne(".bottom-right").y(it.y+a)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(nt=this.centeredScaling()||e.altKey,nt){const it=this.findOne(".top-left"),$=this.findOne(".bottom-right"),et=it.x(),lt=it.y(),ut=this.getWidth()-$.x(),dt=this.getHeight()-$.y();$.move({x:-et,y:-lt}),it.move({x:ut,y:dt})}const st=this.findOne(".top-left").getAbsolutePosition();s=st.x,a=st.y;const at=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ot=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:s,y:a,width:at,height:ot,rotation:Global_1$1.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var s;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const a=this.getNode();activeTransformersCount--,this._fire("transformend",{evt:e,target:a}),(s=this.getLayer())===null||s===void 0||s.batchDraw(),a&&this._nodes.forEach(c=>{var h;c._fire("transformend",{evt:e,target:c}),(h=c.getLayer())===null||h===void 0||h.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,s){const a=this._getNodeRect(),c=1;if(Util_1$3.Util._inRange(e.width,-this.padding()*2-c,c)){this.update();return}if(Util_1$3.Util._inRange(e.height,-this.padding()*2-c,c)){this.update();return}const h=new Util_1$3.Transform;if(h.rotate(Global_1$1.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const tt=h.point({x:-this.padding()*2,y:0});e.x+=tt.x,e.y+=tt.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=tt.x,this._anchorDragOffset.y-=tt.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const tt=h.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=tt.x,this._anchorDragOffset.y-=tt.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const tt=h.point({x:0,y:-this.padding()*2});e.x+=tt.x,e.y+=tt.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=tt.x,this._anchorDragOffset.y-=tt.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const tt=h.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=tt.x,this._anchorDragOffset.y-=tt.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const tt=this.boundBoxFunc()(a,e);tt?e=tt:Util_1$3.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const d=1e7,g=new Util_1$3.Transform;g.translate(a.x,a.y),g.rotate(a.rotation),g.scale(a.width/d,a.height/d);const _=new Util_1$3.Transform,b=e.width/d,j=e.height/d;this.flipEnabled()===!1?(_.translate(e.x,e.y),_.rotate(e.rotation),_.translate(e.width<0?e.width:0,e.height<0?e.height:0),_.scale(Math.abs(b),Math.abs(j))):(_.translate(e.x,e.y),_.rotate(e.rotation),_.scale(b,j));const rt=_.multiply(g.invert());this._nodes.forEach(tt=>{var nt;const _e=tt.getParent().getAbsoluteTransform(),st=tt.getTransform().copy();st.translate(tt.offsetX(),tt.offsetY());const at=new Util_1$3.Transform;at.multiply(_e.copy().invert()).multiply(rt).multiply(_e).multiply(st);const ot=at.decompose();tt.setAttrs(ot),(nt=tt.getLayer())===null||nt===void 0||nt.batchDraw()}),this.rotation(Util_1$3.Util._getRotation(e.rotation)),this._nodes.forEach(tt=>{this._fire("transform",{evt:s,target:tt}),tt._fire("transform",{evt:s,target:tt})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,s){this.findOne(e).setAttrs(s)}update(){var e;const s=this._getNodeRect();this.rotation(Util_1$3.Util._getRotation(s.rotation));const a=s.width,c=s.height,h=this.enabledAnchors(),d=this.resizeEnabled(),g=this.padding(),_=this.anchorSize(),b=this.find("._anchor");b.forEach(rt=>{rt.setAttrs({width:_,height:_,offsetX:_/2,offsetY:_/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:_/2+g,offsetY:_/2+g,visible:d&&h.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:a/2,y:0,offsetY:_/2+g,visible:d&&h.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:a,y:0,offsetX:_/2-g,offsetY:_/2+g,visible:d&&h.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:c/2,offsetX:_/2+g,visible:d&&h.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:a,y:c/2,offsetX:_/2-g,visible:d&&h.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:c,offsetX:_/2+g,offsetY:_/2-g,visible:d&&h.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:a/2,y:c,offsetY:_/2-g,visible:d&&h.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:a,y:c,offsetX:_/2-g,offsetY:_/2-g,visible:d&&h.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:a/2,y:-this.rotateAnchorOffset()*Util_1$3.Util._sign(c)-g,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:a,height:c,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const j=this.anchorStyleFunc();j&&b.forEach(rt=>{j(rt)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Group_1.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Node_1$f.Node.prototype.toObject.call(this)}clone(e){return Node_1$f.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Transformer$1.Transformer=Transformer;Transformer.isTransforming=()=>activeTransformersCount>0;function validateAnchors(o){return o instanceof Array||Util_1$3.Util.warn("enabledAnchors value should be an array"),o instanceof Array&&o.forEach(function(e){ANCHORS_NAMES.indexOf(e)===-1&&Util_1$3.Util.warn("Unknown anchor name: "+e+". Available names are: "+ANCHORS_NAMES.join(", "))}),o||[]}Transformer.prototype.className="Transformer";(0,Global_2$1._registerNode)(Transformer);Factory_1$g.Factory.addGetterSetter(Transformer,"enabledAnchors",ANCHORS_NAMES,validateAnchors);Factory_1$g.Factory.addGetterSetter(Transformer,"flipEnabled",!0,(0,Validators_1$g.getBooleanValidator)());Factory_1$g.Factory.addGetterSetter(Transformer,"resizeEnabled",!0);Factory_1$g.Factory.addGetterSetter(Transformer,"anchorSize",10,(0,Validators_1$g.getNumberValidator)());Factory_1$g.Factory.addGetterSetter(Transformer,"rotateEnabled",!0);Factory_1$g.Factory.addGetterSetter(Transformer,"rotateLineVisible",!0);Factory_1$g.Factory.addGetterSetter(Transformer,"rotationSnaps",[]);Factory_1$g.Factory.addGetterSetter(Transformer,"rotateAnchorOffset",50,(0,Validators_1$g.getNumberValidator)());Factory_1$g.Factory.addGetterSetter(Transformer,"rotateAnchorCursor","crosshair");Factory_1$g.Factory.addGetterSetter(Transformer,"rotationSnapTolerance",5,(0,Validators_1$g.getNumberValidator)());Factory_1$g.Factory.addGetterSetter(Transformer,"borderEnabled",!0);Factory_1$g.Factory.addGetterSetter(Transformer,"anchorStroke","rgb(0, 161, 255)");Factory_1$g.Factory.addGetterSetter(Transformer,"anchorStrokeWidth",1,(0,Validators_1$g.getNumberValidator)());Factory_1$g.Factory.addGetterSetter(Transformer,"anchorFill","white");Factory_1$g.Factory.addGetterSetter(Transformer,"anchorCornerRadius",0,(0,Validators_1$g.getNumberValidator)());Factory_1$g.Factory.addGetterSetter(Transformer,"borderStroke","rgb(0, 161, 255)");Factory_1$g.Factory.addGetterSetter(Transformer,"borderStrokeWidth",1,(0,Validators_1$g.getNumberValidator)());Factory_1$g.Factory.addGetterSetter(Transformer,"borderDash");Factory_1$g.Factory.addGetterSetter(Transformer,"keepRatio",!0);Factory_1$g.Factory.addGetterSetter(Transformer,"shiftBehavior","default");Factory_1$g.Factory.addGetterSetter(Transformer,"centeredScaling",!1);Factory_1$g.Factory.addGetterSetter(Transformer,"ignoreStroke",!1);Factory_1$g.Factory.addGetterSetter(Transformer,"padding",0,(0,Validators_1$g.getNumberValidator)());Factory_1$g.Factory.addGetterSetter(Transformer,"nodes");Factory_1$g.Factory.addGetterSetter(Transformer,"node");Factory_1$g.Factory.addGetterSetter(Transformer,"boundBoxFunc");Factory_1$g.Factory.addGetterSetter(Transformer,"anchorDragBoundFunc");Factory_1$g.Factory.addGetterSetter(Transformer,"anchorStyleFunc");Factory_1$g.Factory.addGetterSetter(Transformer,"shouldOverdrawWholeArea",!1);Factory_1$g.Factory.addGetterSetter(Transformer,"useSingleNodeRotation",!0);Factory_1$g.Factory.backCompat(Transformer,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Wedge$1={};Object.defineProperty(Wedge$1,"__esModule",{value:!0});Wedge$1.Wedge=void 0;const Factory_1$f=Factory,Shape_1=Shape,Global_1=Global,Validators_1$f=Validators,Global_2=Global;class Wedge extends Shape_1.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Global_1.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Wedge$1.Wedge=Wedge;Wedge.prototype.className="Wedge";Wedge.prototype._centroid=!0;Wedge.prototype._attrsAffectingSize=["radius"];(0,Global_2._registerNode)(Wedge);Factory_1$f.Factory.addGetterSetter(Wedge,"radius",0,(0,Validators_1$f.getNumberValidator)());Factory_1$f.Factory.addGetterSetter(Wedge,"angle",0,(0,Validators_1$f.getNumberValidator)());Factory_1$f.Factory.addGetterSetter(Wedge,"clockwise",!1);Factory_1$f.Factory.backCompat(Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Blur$1={};Object.defineProperty(Blur$1,"__esModule",{value:!0});Blur$1.Blur=void 0;const Factory_1$e=Factory,Node_1$e=Node$1,Validators_1$e=Validators;function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function filterGaussBlurRGBA(o,e){const s=o.data,a=o.width,c=o.height;let h,d,g,_,b,j,rt,tt,nt,_e,st,at,ot,it,$,et,lt,ut,dt,ct;const pt=e+e+1,ht=a-1,gt=c-1,yt=e+1,St=yt*(yt+1)/2,Et=new BlurStack,kt=mul_table[e],Pt=shg_table[e];let bt=null,mt=Et,Ct=null,vt=null;for(let wt=1;wt<pt;wt++)mt=mt.next=new BlurStack,wt===yt&&(bt=mt);mt.next=Et,g=d=0;for(let wt=0;wt<c;wt++){at=ot=it=$=_=b=j=rt=0,tt=yt*(et=s[d]),nt=yt*(lt=s[d+1]),_e=yt*(ut=s[d+2]),st=yt*(dt=s[d+3]),_+=St*et,b+=St*lt,j+=St*ut,rt+=St*dt,mt=Et;for(let xt=0;xt<yt;xt++)mt.r=et,mt.g=lt,mt.b=ut,mt.a=dt,mt=mt.next;for(let xt=1;xt<yt;xt++)h=d+((ht<xt?ht:xt)<<2),_+=(mt.r=et=s[h])*(ct=yt-xt),b+=(mt.g=lt=s[h+1])*ct,j+=(mt.b=ut=s[h+2])*ct,rt+=(mt.a=dt=s[h+3])*ct,at+=et,ot+=lt,it+=ut,$+=dt,mt=mt.next;Ct=Et,vt=bt;for(let xt=0;xt<a;xt++)s[d+3]=dt=rt*kt>>Pt,dt!==0?(dt=255/dt,s[d]=(_*kt>>Pt)*dt,s[d+1]=(b*kt>>Pt)*dt,s[d+2]=(j*kt>>Pt)*dt):s[d]=s[d+1]=s[d+2]=0,_-=tt,b-=nt,j-=_e,rt-=st,tt-=Ct.r,nt-=Ct.g,_e-=Ct.b,st-=Ct.a,h=g+((h=xt+e+1)<ht?h:ht)<<2,at+=Ct.r=s[h],ot+=Ct.g=s[h+1],it+=Ct.b=s[h+2],$+=Ct.a=s[h+3],_+=at,b+=ot,j+=it,rt+=$,Ct=Ct.next,tt+=et=vt.r,nt+=lt=vt.g,_e+=ut=vt.b,st+=dt=vt.a,at-=et,ot-=lt,it-=ut,$-=dt,vt=vt.next,d+=4;g+=a}for(let wt=0;wt<a;wt++){ot=it=$=at=b=j=rt=_=0,d=wt<<2,tt=yt*(et=s[d]),nt=yt*(lt=s[d+1]),_e=yt*(ut=s[d+2]),st=yt*(dt=s[d+3]),_+=St*et,b+=St*lt,j+=St*ut,rt+=St*dt,mt=Et;for(let $t=0;$t<yt;$t++)mt.r=et,mt.g=lt,mt.b=ut,mt.a=dt,mt=mt.next;let xt=a;for(let $t=1;$t<=e;$t++)d=xt+wt<<2,_+=(mt.r=et=s[d])*(ct=yt-$t),b+=(mt.g=lt=s[d+1])*ct,j+=(mt.b=ut=s[d+2])*ct,rt+=(mt.a=dt=s[d+3])*ct,at+=et,ot+=lt,it+=ut,$+=dt,mt=mt.next,$t<gt&&(xt+=a);d=wt,Ct=Et,vt=bt;for(let $t=0;$t<c;$t++)h=d<<2,s[h+3]=dt=rt*kt>>Pt,dt>0?(dt=255/dt,s[h]=(_*kt>>Pt)*dt,s[h+1]=(b*kt>>Pt)*dt,s[h+2]=(j*kt>>Pt)*dt):s[h]=s[h+1]=s[h+2]=0,_-=tt,b-=nt,j-=_e,rt-=st,tt-=Ct.r,nt-=Ct.g,_e-=Ct.b,st-=Ct.a,h=wt+((h=$t+yt)<gt?h:gt)*a<<2,_+=at+=Ct.r=s[h],b+=ot+=Ct.g=s[h+1],j+=it+=Ct.b=s[h+2],rt+=$+=Ct.a=s[h+3],Ct=Ct.next,tt+=et=vt.r,nt+=lt=vt.g,_e+=ut=vt.b,st+=dt=vt.a,at-=et,ot-=lt,it-=ut,$-=dt,vt=vt.next,d+=a}}const Blur=function(e){const s=Math.round(this.blurRadius());s>0&&filterGaussBlurRGBA(e,s)};Blur$1.Blur=Blur;Factory_1$e.Factory.addGetterSetter(Node_1$e.Node,"blurRadius",0,(0,Validators_1$e.getNumberValidator)(),Factory_1$e.Factory.afterSetFilter);var Brighten$1={};Object.defineProperty(Brighten$1,"__esModule",{value:!0});Brighten$1.Brighten=void 0;const Factory_1$d=Factory,Node_1$d=Node$1,Validators_1$d=Validators,Brighten=function(o){const e=this.brightness()*255,s=o.data,a=s.length;for(let c=0;c<a;c+=4)s[c]+=e,s[c+1]+=e,s[c+2]+=e};Brighten$1.Brighten=Brighten;Factory_1$d.Factory.addGetterSetter(Node_1$d.Node,"brightness",0,(0,Validators_1$d.getNumberValidator)(),Factory_1$d.Factory.afterSetFilter);var Contrast$1={};Object.defineProperty(Contrast$1,"__esModule",{value:!0});Contrast$1.Contrast=void 0;const Factory_1$c=Factory,Node_1$c=Node$1,Validators_1$c=Validators,Contrast=function(o){const e=Math.pow((this.contrast()+100)/100,2),s=o.data,a=s.length;let c=150,h=150,d=150;for(let g=0;g<a;g+=4)c=s[g],h=s[g+1],d=s[g+2],c/=255,c-=.5,c*=e,c+=.5,c*=255,h/=255,h-=.5,h*=e,h+=.5,h*=255,d/=255,d-=.5,d*=e,d+=.5,d*=255,c=c<0?0:c>255?255:c,h=h<0?0:h>255?255:h,d=d<0?0:d>255?255:d,s[g]=c,s[g+1]=h,s[g+2]=d};Contrast$1.Contrast=Contrast;Factory_1$c.Factory.addGetterSetter(Node_1$c.Node,"contrast",0,(0,Validators_1$c.getNumberValidator)(),Factory_1$c.Factory.afterSetFilter);var Emboss$1={};Object.defineProperty(Emboss$1,"__esModule",{value:!0});Emboss$1.Emboss=void 0;const Factory_1$b=Factory,Node_1$b=Node$1,Util_1$2=Util,Validators_1$b=Validators,Emboss=function(o){const e=this.embossStrength()*10,s=this.embossWhiteLevel()*255,a=this.embossDirection(),c=this.embossBlend(),h=o.data,d=o.width,g=o.height,_=d*4;let b=0,j=0,rt=g;switch(a){case"top-left":b=-1,j=-1;break;case"top":b=-1,j=0;break;case"top-right":b=-1,j=1;break;case"right":b=0,j=1;break;case"bottom-right":b=1,j=1;break;case"bottom":b=1,j=0;break;case"bottom-left":b=1,j=-1;break;case"left":b=0,j=-1;break;default:Util_1$2.Util.error("Unknown emboss direction: "+a)}do{const tt=(rt-1)*_;let nt=b;rt+nt<1&&(nt=0),rt+nt>g&&(nt=0);const _e=(rt-1+nt)*d*4;let st=d;do{const at=tt+(st-1)*4;let ot=j;st+ot<1&&(ot=0),st+ot>d&&(ot=0);const it=_e+(st-1+ot)*4,$=h[at]-h[it],et=h[at+1]-h[it+1],lt=h[at+2]-h[it+2];let ut=$;const dt=ut>0?ut:-ut,ct=et>0?et:-et,pt=lt>0?lt:-lt;if(ct>dt&&(ut=et),pt>dt&&(ut=lt),ut*=e,c){const ht=h[at]+ut,gt=h[at+1]+ut,yt=h[at+2]+ut;h[at]=ht>255?255:ht<0?0:ht,h[at+1]=gt>255?255:gt<0?0:gt,h[at+2]=yt>255?255:yt<0?0:yt}else{let ht=s-ut;ht<0?ht=0:ht>255&&(ht=255),h[at]=h[at+1]=h[at+2]=ht}}while(--st)}while(--rt)};Emboss$1.Emboss=Emboss;Factory_1$b.Factory.addGetterSetter(Node_1$b.Node,"embossStrength",.5,(0,Validators_1$b.getNumberValidator)(),Factory_1$b.Factory.afterSetFilter);Factory_1$b.Factory.addGetterSetter(Node_1$b.Node,"embossWhiteLevel",.5,(0,Validators_1$b.getNumberValidator)(),Factory_1$b.Factory.afterSetFilter);Factory_1$b.Factory.addGetterSetter(Node_1$b.Node,"embossDirection","top-left",void 0,Factory_1$b.Factory.afterSetFilter);Factory_1$b.Factory.addGetterSetter(Node_1$b.Node,"embossBlend",!1,void 0,Factory_1$b.Factory.afterSetFilter);var Enhance$1={};Object.defineProperty(Enhance$1,"__esModule",{value:!0});Enhance$1.Enhance=void 0;const Factory_1$a=Factory,Node_1$a=Node$1,Validators_1$a=Validators;function remap(o,e,s,a,c){const h=s-e,d=c-a;if(h===0)return a+d/2;if(d===0)return a;let g=(o-e)/h;return g=d*g+a,g}const Enhance=function(o){const e=o.data,s=e.length;let a=e[0],c=a,h,d=e[1],g=d,_,b=e[2],j=b,rt;const tt=this.enhance();if(tt===0)return;for(let $=0;$<s;$+=4)h=e[$+0],h<a?a=h:h>c&&(c=h),_=e[$+1],_<d?d=_:_>g&&(g=_),rt=e[$+2],rt<b?b=rt:rt>j&&(j=rt);c===a&&(c=255,a=0),g===d&&(g=255,d=0),j===b&&(j=255,b=0);let nt,_e,st,at,ot,it;if(tt>0)nt=c+tt*(255-c),_e=a-tt*(a-0),st=g+tt*(255-g),at=d-tt*(d-0),ot=j+tt*(255-j),it=b-tt*(b-0);else{const $=(c+a)*.5;nt=c+tt*(c-$),_e=a+tt*(a-$);const et=(g+d)*.5;st=g+tt*(g-et),at=d+tt*(d-et);const lt=(j+b)*.5;ot=j+tt*(j-lt),it=b+tt*(b-lt)}for(let $=0;$<s;$+=4)e[$+0]=remap(e[$+0],a,c,_e,nt),e[$+1]=remap(e[$+1],d,g,at,st),e[$+2]=remap(e[$+2],b,j,it,ot)};Enhance$1.Enhance=Enhance;Factory_1$a.Factory.addGetterSetter(Node_1$a.Node,"enhance",0,(0,Validators_1$a.getNumberValidator)(),Factory_1$a.Factory.afterSetFilter);var Grayscale$1={};Object.defineProperty(Grayscale$1,"__esModule",{value:!0});Grayscale$1.Grayscale=void 0;const Grayscale=function(o){const e=o.data,s=e.length;for(let a=0;a<s;a+=4){const c=.34*e[a]+.5*e[a+1]+.16*e[a+2];e[a]=c,e[a+1]=c,e[a+2]=c}};Grayscale$1.Grayscale=Grayscale;var HSL$1={};Object.defineProperty(HSL$1,"__esModule",{value:!0});HSL$1.HSL=void 0;const Factory_1$9=Factory,Node_1$9=Node$1,Validators_1$9=Validators;Factory_1$9.Factory.addGetterSetter(Node_1$9.Node,"hue",0,(0,Validators_1$9.getNumberValidator)(),Factory_1$9.Factory.afterSetFilter);Factory_1$9.Factory.addGetterSetter(Node_1$9.Node,"saturation",0,(0,Validators_1$9.getNumberValidator)(),Factory_1$9.Factory.afterSetFilter);Factory_1$9.Factory.addGetterSetter(Node_1$9.Node,"luminance",0,(0,Validators_1$9.getNumberValidator)(),Factory_1$9.Factory.afterSetFilter);const HSL=function(o){const e=o.data,s=e.length,a=1,c=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,d=this.luminance()*127,g=a*c*Math.cos(h*Math.PI/180),_=a*c*Math.sin(h*Math.PI/180),b=.299*a+.701*g+.167*_,j=.587*a-.587*g+.33*_,rt=.114*a-.114*g-.497*_,tt=.299*a-.299*g-.328*_,nt=.587*a+.413*g+.035*_,_e=.114*a-.114*g+.293*_,st=.299*a-.3*g+1.25*_,at=.587*a-.586*g-1.05*_,ot=.114*a+.886*g-.2*_;let it,$,et,lt;for(let ut=0;ut<s;ut+=4)it=e[ut+0],$=e[ut+1],et=e[ut+2],lt=e[ut+3],e[ut+0]=b*it+j*$+rt*et+d,e[ut+1]=tt*it+nt*$+_e*et+d,e[ut+2]=st*it+at*$+ot*et+d,e[ut+3]=lt};HSL$1.HSL=HSL;var HSV$1={};Object.defineProperty(HSV$1,"__esModule",{value:!0});HSV$1.HSV=void 0;const Factory_1$8=Factory,Node_1$8=Node$1,Validators_1$8=Validators,HSV=function(o){const e=o.data,s=e.length,a=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,d=a*c*Math.cos(h*Math.PI/180),g=a*c*Math.sin(h*Math.PI/180),_=.299*a+.701*d+.167*g,b=.587*a-.587*d+.33*g,j=.114*a-.114*d-.497*g,rt=.299*a-.299*d-.328*g,tt=.587*a+.413*d+.035*g,nt=.114*a-.114*d+.293*g,_e=.299*a-.3*d+1.25*g,st=.587*a-.586*d-1.05*g,at=.114*a+.886*d-.2*g;for(let ot=0;ot<s;ot+=4){const it=e[ot+0],$=e[ot+1],et=e[ot+2],lt=e[ot+3];e[ot+0]=_*it+b*$+j*et,e[ot+1]=rt*it+tt*$+nt*et,e[ot+2]=_e*it+st*$+at*et,e[ot+3]=lt}};HSV$1.HSV=HSV;Factory_1$8.Factory.addGetterSetter(Node_1$8.Node,"hue",0,(0,Validators_1$8.getNumberValidator)(),Factory_1$8.Factory.afterSetFilter);Factory_1$8.Factory.addGetterSetter(Node_1$8.Node,"saturation",0,(0,Validators_1$8.getNumberValidator)(),Factory_1$8.Factory.afterSetFilter);Factory_1$8.Factory.addGetterSetter(Node_1$8.Node,"value",0,(0,Validators_1$8.getNumberValidator)(),Factory_1$8.Factory.afterSetFilter);var Invert$1={};Object.defineProperty(Invert$1,"__esModule",{value:!0});Invert$1.Invert=void 0;const Invert=function(o){const e=o.data,s=e.length;for(let a=0;a<s;a+=4)e[a]=255-e[a],e[a+1]=255-e[a+1],e[a+2]=255-e[a+2]};Invert$1.Invert=Invert;var Kaleidoscope$1={};Object.defineProperty(Kaleidoscope$1,"__esModule",{value:!0});Kaleidoscope$1.Kaleidoscope=void 0;const Factory_1$7=Factory,Node_1$7=Node$1,Util_1$1=Util,Validators_1$7=Validators,ToPolar=function(o,e,s){const a=o.data,c=e.data,h=o.width,d=o.height,g=s.polarCenterX||h/2,_=s.polarCenterY||d/2;let b=Math.sqrt(g*g+_*_),j=h-g,rt=d-_;const tt=Math.sqrt(j*j+rt*rt);b=tt>b?tt:b;const nt=d,_e=h,st=360/_e*Math.PI/180;for(let at=0;at<_e;at+=1){const ot=Math.sin(at*st),it=Math.cos(at*st);for(let $=0;$<nt;$+=1){j=Math.floor(g+b*$/nt*it),rt=Math.floor(_+b*$/nt*ot);let et=(rt*h+j)*4;const lt=a[et+0],ut=a[et+1],dt=a[et+2],ct=a[et+3];et=(at+$*h)*4,c[et+0]=lt,c[et+1]=ut,c[et+2]=dt,c[et+3]=ct}}},FromPolar=function(o,e,s){const a=o.data,c=e.data,h=o.width,d=o.height,g=s.polarCenterX||h/2,_=s.polarCenterY||d/2;let b=Math.sqrt(g*g+_*_),j=h-g,rt=d-_;const tt=Math.sqrt(j*j+rt*rt);b=tt>b?tt:b;const nt=d,_e=h,st=0;let at,ot;for(j=0;j<h;j+=1)for(rt=0;rt<d;rt+=1){const it=j-g,$=rt-_,et=Math.sqrt(it*it+$*$)*nt/b;let lt=(Math.atan2($,it)*180/Math.PI+360+st)%360;lt=lt*_e/360,at=Math.floor(lt),ot=Math.floor(et);let ut=(ot*h+at)*4;const dt=a[ut+0],ct=a[ut+1],pt=a[ut+2],ht=a[ut+3];ut=(rt*h+j)*4,c[ut+0]=dt,c[ut+1]=ct,c[ut+2]=pt,c[ut+3]=ht}},Kaleidoscope=function(o){const e=o.width,s=o.height;let a,c,h,d,g,_,b,j,rt,tt,nt=Math.round(this.kaleidoscopePower());const _e=Math.round(this.kaleidoscopeAngle()),st=Math.floor(e*(_e%360)/360);if(nt<1)return;const at=Util_1$1.Util.createCanvasElement();at.width=e,at.height=s;const ot=at.getContext("2d").getImageData(0,0,e,s);Util_1$1.Util.releaseCanvas(at),ToPolar(o,ot,{polarCenterX:e/2,polarCenterY:s/2});let it=e/Math.pow(2,nt);for(;it<=8;)it=it*2,nt-=1;it=Math.ceil(it);let $=it,et=0,lt=$,ut=1;for(st+it>e&&(et=$,lt=0,ut=-1),c=0;c<s;c+=1)for(a=et;a!==lt;a+=ut)h=Math.round(a+st)%e,rt=(e*c+h)*4,g=ot.data[rt+0],_=ot.data[rt+1],b=ot.data[rt+2],j=ot.data[rt+3],tt=(e*c+a)*4,ot.data[tt+0]=g,ot.data[tt+1]=_,ot.data[tt+2]=b,ot.data[tt+3]=j;for(c=0;c<s;c+=1)for($=Math.floor(it),d=0;d<nt;d+=1){for(a=0;a<$+1;a+=1)rt=(e*c+a)*4,g=ot.data[rt+0],_=ot.data[rt+1],b=ot.data[rt+2],j=ot.data[rt+3],tt=(e*c+$*2-a-1)*4,ot.data[tt+0]=g,ot.data[tt+1]=_,ot.data[tt+2]=b,ot.data[tt+3]=j;$*=2}FromPolar(ot,o,{})};Kaleidoscope$1.Kaleidoscope=Kaleidoscope;Factory_1$7.Factory.addGetterSetter(Node_1$7.Node,"kaleidoscopePower",2,(0,Validators_1$7.getNumberValidator)(),Factory_1$7.Factory.afterSetFilter);Factory_1$7.Factory.addGetterSetter(Node_1$7.Node,"kaleidoscopeAngle",0,(0,Validators_1$7.getNumberValidator)(),Factory_1$7.Factory.afterSetFilter);var Mask$1={};Object.defineProperty(Mask$1,"__esModule",{value:!0});Mask$1.Mask=void 0;const Factory_1$6=Factory,Node_1$6=Node$1,Validators_1$6=Validators;function pixelAt(o,e,s){let a=(s*o.width+e)*4;const c=[];return c.push(o.data[a++],o.data[a++],o.data[a++],o.data[a++]),c}function rgbDistance(o,e){return Math.sqrt(Math.pow(o[0]-e[0],2)+Math.pow(o[1]-e[1],2)+Math.pow(o[2]-e[2],2))}function rgbMean(o){const e=[0,0,0];for(let s=0;s<o.length;s++)e[0]+=o[s][0],e[1]+=o[s][1],e[2]+=o[s][2];return e[0]/=o.length,e[1]/=o.length,e[2]/=o.length,e}function backgroundMask(o,e){const s=pixelAt(o,0,0),a=pixelAt(o,o.width-1,0),c=pixelAt(o,0,o.height-1),h=pixelAt(o,o.width-1,o.height-1),d=e||10;if(rgbDistance(s,a)<d&&rgbDistance(a,h)<d&&rgbDistance(h,c)<d&&rgbDistance(c,s)<d){const g=rgbMean([a,s,h,c]),_=[];for(let b=0;b<o.width*o.height;b++){const j=rgbDistance(g,[o.data[b*4],o.data[b*4+1],o.data[b*4+2]]);_[b]=j<d?0:255}return _}}function applyMask(o,e){for(let s=0;s<o.width*o.height;s++)o.data[4*s+3]=e[s]}function erodeMask(o,e,s){const a=[1,1,1,1,0,1,1,1,1],c=Math.round(Math.sqrt(a.length)),h=Math.floor(c/2),d=[];for(let g=0;g<s;g++)for(let _=0;_<e;_++){const b=g*e+_;let j=0;for(let rt=0;rt<c;rt++)for(let tt=0;tt<c;tt++){const nt=g+rt-h,_e=_+tt-h;if(nt>=0&&nt<s&&_e>=0&&_e<e){const st=nt*e+_e,at=a[rt*c+tt];j+=o[st]*at}}d[b]=j===255*8?255:0}return d}function dilateMask(o,e,s){const a=[1,1,1,1,1,1,1,1,1],c=Math.round(Math.sqrt(a.length)),h=Math.floor(c/2),d=[];for(let g=0;g<s;g++)for(let _=0;_<e;_++){const b=g*e+_;let j=0;for(let rt=0;rt<c;rt++)for(let tt=0;tt<c;tt++){const nt=g+rt-h,_e=_+tt-h;if(nt>=0&&nt<s&&_e>=0&&_e<e){const st=nt*e+_e,at=a[rt*c+tt];j+=o[st]*at}}d[b]=j>=255*4?255:0}return d}function smoothEdgeMask(o,e,s){const a=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],c=Math.round(Math.sqrt(a.length)),h=Math.floor(c/2),d=[];for(let g=0;g<s;g++)for(let _=0;_<e;_++){const b=g*e+_;let j=0;for(let rt=0;rt<c;rt++)for(let tt=0;tt<c;tt++){const nt=g+rt-h,_e=_+tt-h;if(nt>=0&&nt<s&&_e>=0&&_e<e){const st=nt*e+_e,at=a[rt*c+tt];j+=o[st]*at}}d[b]=j}return d}const Mask=function(o){const e=this.threshold();let s=backgroundMask(o,e);return s&&(s=erodeMask(s,o.width,o.height),s=dilateMask(s,o.width,o.height),s=smoothEdgeMask(s,o.width,o.height),applyMask(o,s)),o};Mask$1.Mask=Mask;Factory_1$6.Factory.addGetterSetter(Node_1$6.Node,"threshold",0,(0,Validators_1$6.getNumberValidator)(),Factory_1$6.Factory.afterSetFilter);var Noise$1={};Object.defineProperty(Noise$1,"__esModule",{value:!0});Noise$1.Noise=void 0;const Factory_1$5=Factory,Node_1$5=Node$1,Validators_1$5=Validators,Noise=function(o){const e=this.noise()*255,s=o.data,a=s.length,c=e/2;for(let h=0;h<a;h+=4)s[h+0]+=c-2*c*Math.random(),s[h+1]+=c-2*c*Math.random(),s[h+2]+=c-2*c*Math.random()};Noise$1.Noise=Noise;Factory_1$5.Factory.addGetterSetter(Node_1$5.Node,"noise",.2,(0,Validators_1$5.getNumberValidator)(),Factory_1$5.Factory.afterSetFilter);var Pixelate$1={};Object.defineProperty(Pixelate$1,"__esModule",{value:!0});Pixelate$1.Pixelate=void 0;const Factory_1$4=Factory,Util_1=Util,Node_1$4=Node$1,Validators_1$4=Validators,Pixelate=function(o){let e=Math.ceil(this.pixelSize()),s=o.width,a=o.height,c=Math.ceil(s/e),h=Math.ceil(a/e),d=o.data;if(e<=0){Util_1.Util.error("pixelSize value can not be <= 0");return}for(let g=0;g<c;g+=1)for(let _=0;_<h;_+=1){let b=0,j=0,rt=0,tt=0;const nt=g*e,_e=nt+e,st=_*e,at=st+e;let ot=0;for(let it=nt;it<_e;it+=1)if(!(it>=s))for(let $=st;$<at;$+=1){if($>=a)continue;const et=(s*$+it)*4;b+=d[et+0],j+=d[et+1],rt+=d[et+2],tt+=d[et+3],ot+=1}b=b/ot,j=j/ot,rt=rt/ot,tt=tt/ot;for(let it=nt;it<_e;it+=1)if(!(it>=s))for(let $=st;$<at;$+=1){if($>=a)continue;const et=(s*$+it)*4;d[et+0]=b,d[et+1]=j,d[et+2]=rt,d[et+3]=tt}}};Pixelate$1.Pixelate=Pixelate;Factory_1$4.Factory.addGetterSetter(Node_1$4.Node,"pixelSize",8,(0,Validators_1$4.getNumberValidator)(),Factory_1$4.Factory.afterSetFilter);var Posterize$1={};Object.defineProperty(Posterize$1,"__esModule",{value:!0});Posterize$1.Posterize=void 0;const Factory_1$3=Factory,Node_1$3=Node$1,Validators_1$3=Validators,Posterize=function(o){const e=Math.round(this.levels()*254)+1,s=o.data,a=s.length,c=255/e;for(let h=0;h<a;h+=1)s[h]=Math.floor(s[h]/c)*c};Posterize$1.Posterize=Posterize;Factory_1$3.Factory.addGetterSetter(Node_1$3.Node,"levels",.5,(0,Validators_1$3.getNumberValidator)(),Factory_1$3.Factory.afterSetFilter);var RGB$1={};Object.defineProperty(RGB$1,"__esModule",{value:!0});RGB$1.RGB=void 0;const Factory_1$2=Factory,Node_1$2=Node$1,Validators_1$2=Validators,RGB=function(o){const e=o.data,s=e.length,a=this.red(),c=this.green(),h=this.blue();for(let d=0;d<s;d+=4){const g=(.34*e[d]+.5*e[d+1]+.16*e[d+2])/255;e[d]=g*a,e[d+1]=g*c,e[d+2]=g*h,e[d+3]=e[d+3]}};RGB$1.RGB=RGB;Factory_1$2.Factory.addGetterSetter(Node_1$2.Node,"red",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});Factory_1$2.Factory.addGetterSetter(Node_1$2.Node,"green",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});Factory_1$2.Factory.addGetterSetter(Node_1$2.Node,"blue",0,Validators_1$2.RGBComponent,Factory_1$2.Factory.afterSetFilter);var RGBA$1={};Object.defineProperty(RGBA$1,"__esModule",{value:!0});RGBA$1.RGBA=void 0;const Factory_1$1=Factory,Node_1$1=Node$1,Validators_1$1=Validators,RGBA=function(o){const e=o.data,s=e.length,a=this.red(),c=this.green(),h=this.blue(),d=this.alpha();for(let g=0;g<s;g+=4){const _=1-d;e[g]=a*d+e[g]*_,e[g+1]=c*d+e[g+1]*_,e[g+2]=h*d+e[g+2]*_}};RGBA$1.RGBA=RGBA;Factory_1$1.Factory.addGetterSetter(Node_1$1.Node,"red",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});Factory_1$1.Factory.addGetterSetter(Node_1$1.Node,"green",0,function(o){return this._filterUpToDate=!1,o>255?255:o<0?0:Math.round(o)});Factory_1$1.Factory.addGetterSetter(Node_1$1.Node,"blue",0,Validators_1$1.RGBComponent,Factory_1$1.Factory.afterSetFilter);Factory_1$1.Factory.addGetterSetter(Node_1$1.Node,"alpha",1,function(o){return this._filterUpToDate=!1,o>1?1:o<0?0:o});var Sepia$1={};Object.defineProperty(Sepia$1,"__esModule",{value:!0});Sepia$1.Sepia=void 0;const Sepia=function(o){const e=o.data,s=e.length;for(let a=0;a<s;a+=4){const c=e[a+0],h=e[a+1],d=e[a+2];e[a+0]=Math.min(255,c*.393+h*.769+d*.189),e[a+1]=Math.min(255,c*.349+h*.686+d*.168),e[a+2]=Math.min(255,c*.272+h*.534+d*.131)}};Sepia$1.Sepia=Sepia;var Solarize$1={};Object.defineProperty(Solarize$1,"__esModule",{value:!0});Solarize$1.Solarize=void 0;const Solarize=function(o){const e=o.data,s=o.width,a=o.height,c=s*4;let h=a;do{const d=(h-1)*c;let g=s;do{const _=d+(g-1)*4;let b=e[_],j=e[_+1],rt=e[_+2];b>127&&(b=255-b),j>127&&(j=255-j),rt>127&&(rt=255-rt),e[_]=b,e[_+1]=j,e[_+2]=rt}while(--g)}while(--h)};Solarize$1.Solarize=Solarize;var Threshold$1={};Object.defineProperty(Threshold$1,"__esModule",{value:!0});Threshold$1.Threshold=void 0;const Factory_1=Factory,Node_1=Node$1,Validators_1=Validators,Threshold=function(o){const e=this.threshold()*255,s=o.data,a=s.length;for(let c=0;c<a;c+=1)s[c]=s[c]<e?0:255};Threshold$1.Threshold=Threshold;Factory_1.Factory.addGetterSetter(Node_1.Node,"threshold",.5,(0,Validators_1.getNumberValidator)(),Factory_1.Factory.afterSetFilter);Object.defineProperty(_FullInternals,"__esModule",{value:!0});_FullInternals.Konva=void 0;const _CoreInternals_1=_CoreInternals,Arc_1=Arc$1,Arrow_1=Arrow$1,Circle_1=Circle$1,Ellipse_1=Ellipse$1,Image_1=Image$1,Label_1=Label$1,Line_1=Line$1,Path_1=Path$1,Rect_1=Rect$1,RegularPolygon_1=RegularPolygon$1,Ring_1=Ring$1,Sprite_1=Sprite$1,Star_1=Star$1,Text_1=Text$1,TextPath_1=TextPath$1,Transformer_1=Transformer$1,Wedge_1=Wedge$1,Blur_1=Blur$1,Brighten_1=Brighten$1,Contrast_1=Contrast$1,Emboss_1=Emboss$1,Enhance_1=Enhance$1,Grayscale_1=Grayscale$1,HSL_1=HSL$1,HSV_1=HSV$1,Invert_1=Invert$1,Kaleidoscope_1=Kaleidoscope$1,Mask_1=Mask$1,Noise_1=Noise$1,Pixelate_1=Pixelate$1,Posterize_1=Posterize$1,RGB_1=RGB$1,RGBA_1=RGBA$1,Sepia_1=Sepia$1,Solarize_1=Solarize$1,Threshold_1=Threshold$1;_FullInternals.Konva=_CoreInternals_1.Konva.Util._assign(_CoreInternals_1.Konva,{Arc:Arc_1.Arc,Arrow:Arrow_1.Arrow,Circle:Circle_1.Circle,Ellipse:Ellipse_1.Ellipse,Image:Image_1.Image,Label:Label_1.Label,Tag:Label_1.Tag,Line:Line_1.Line,Path:Path_1.Path,Rect:Rect_1.Rect,RegularPolygon:RegularPolygon_1.RegularPolygon,Ring:Ring_1.Ring,Sprite:Sprite_1.Sprite,Star:Star_1.Star,Text:Text_1.Text,TextPath:TextPath_1.TextPath,Transformer:Transformer_1.Transformer,Wedge:Wedge_1.Wedge,Filters:{Blur:Blur_1.Blur,Brighten:Brighten_1.Brighten,Contrast:Contrast_1.Contrast,Emboss:Emboss_1.Emboss,Enhance:Enhance_1.Enhance,Grayscale:Grayscale_1.Grayscale,HSL:HSL_1.HSL,HSV:HSV_1.HSV,Invert:Invert_1.Invert,Kaleidoscope:Kaleidoscope_1.Kaleidoscope,Mask:Mask_1.Mask,Noise:Noise_1.Noise,Pixelate:Pixelate_1.Pixelate,Posterize:Posterize_1.Posterize,RGB:RGB_1.RGB,RGBA:RGBA_1.RGBA,Sepia:Sepia_1.Sepia,Solarize:Solarize_1.Solarize,Threshold:Threshold_1.Threshold}});var lib=lib$1.exports;Object.defineProperty(lib,"__esModule",{value:!0});const _FullInternals_1=_FullInternals;lib$1.exports=_FullInternals_1.Konva;var libExports=lib$1.exports;const Konva=getDefaultExportFromCjs(libExports);let stage=null;const layers=new Map;let overlay=null,currentY=0;const stepHeight=800,MAX_CANVAS_HEIGHT=5e4,pendingChunks=[],subStepCounters=new Map;function ensureLayer(o,e=!1){if(!stage)throw new Error("Stage not initialized");let s=o;const a=subStepCounters.get(o)||0;subStepCounters.set(o,a+1),s=o*1e4+a;let c=layers.get(s)||null;if(c&&!c.getStage()&&(console.log(`[renderer] ensureLayer: Cached layer for layerId=${s} is detached, recreating.`),layers.delete(s),c=null),c)console.log(`[renderer] ensureLayer: Reusing existing layer for layerId=${s}`);else{console.log(`[renderer] ensureLayer: Creating new layer for layerId=${s} (stepId=${o}) at currentY=${currentY}`);const h=currentY;c=new Konva.Layer({y:h}),stage.add(c),layers.set(s,c);const d=Math.min(currentY+stepHeight,MAX_CANVAS_HEIGHT);currentY<MAX_CANVAS_HEIGHT?(stage.height(d),overlay&&(overlay.style.height=`${d}px`),currentY+=stepHeight):(console.warn(`[renderer] Approaching max canvas height (${MAX_CANVAS_HEIGHT}px)`),stage.height(MAX_CANVAS_HEIGHT),overlay&&(overlay.style.height=`${MAX_CANVAS_HEIGHT}px`)),console.log(`[renderer] ensureLayer: Stage dimensions now ${stage.width()}x${stage.height()}, layer at y=${h}`);const g=stage.container().parentElement;g&&g.scrollTo({top:h,behavior:"smooth"})}return console.log(`[renderer] ensureLayer: Layer position - x:${c.x()}, y:${c.y()}, visible:${c.visible()} stageAttached=${!!c.getStage()}`),c}function nx(o){return Math.round(o*((stage==null?void 0:stage.width())||800))}function ny(o){return Math.round(o*stepHeight)}function clear(o){var e,s;if(!stage){console.log("[renderer] clear: No stage available");return}{console.log("[renderer] clear: Clearing all - destroying children and resetting"),stage.destroyChildren(),layers.clear(),subStepCounters.clear(),overlay&&(overlay.innerHTML=""),currentY=0;const a=Math.min(stepHeight,((e=stage.container().parentElement)==null?void 0:e.clientHeight)||stepHeight);stage.height(a);const c=new Konva.Layer;stage.add(c),c.draw(),console.log("[renderer] clear: Added base layer to ensure canvas exists"),(s=stage.container().parentElement)==null||s.scrollTo({top:0}),console.log(`[renderer] clear: Reset complete - stage now ${stage.width()}x${a}`);return}}function drawAxis(o,e){if(!stage){console.error("[renderer] drawAxis: No stage available!");return}const s=stage.width(),a=stepHeight,c=50,h=c,d=a-c,g=s-c,_=c;console.log(`[renderer] drawAxis: stage=${s}x${a}, stepHeight=${stepHeight}, coords: (${h},${d}) to (${g},${_})`);const b=new Konva.Line({points:[h,d,h,d],stroke:"#333",strokeWidth:2}),j=new Konva.Line({points:[h,d,h,d],stroke:"#333",strokeWidth:2});o.add(b),o.add(j),o.draw();const rt=new Konva.Tween({node:b,duration:.8,points:[h,d,g,d]}),tt=new Konva.Tween({node:j,duration:.8,points:[h,d,h,_]});rt.play(),setTimeout(()=>tt.play(),400),setTimeout(()=>{const nt=new Konva.Text({text:e.xLabel||"x",x:g-30,y:d+8,fill:"#333",fontSize:16,opacity:0}),_e=new Konva.Text({text:e.yLabel||"y",x:h-35,y:_-20,rotation:-90,fill:"#333",fontSize:16,opacity:0});o.add(nt),o.add(_e),o.draw();const st=new Konva.Tween({node:nt,duration:.5,opacity:1}),at=new Konva.Tween({node:_e,duration:.5,opacity:1});st.play(),at.play(),console.log(`[renderer] drawAxis: Animated labels added - x:"${e.xLabel}" y:"${e.yLabel}"`)},1200),console.log("[renderer] drawAxis: Starting animated axis drawing")}function drawLabel(o,e,s,a,c,h,d){const g=c?nx(s):s,_=c?ny(a):a,b=(d==null?void 0:d.fontSize)||(d!=null&&d.isTitle?28:d!=null&&d.isDefinition?20:16),j=d!=null&&d.bold||d!=null&&d.isTitle?"bold":"normal",rt=d!=null&&d.italic?"italic":"normal",tt=(d==null?void 0:d.align)||"left",nt=h||(d!=null&&d.isTitle?"#FFD700":d!=null&&d.isDefinition?"#00FF88":"#ffffff");if(console.log(`[renderer] drawLabel: "${e}" at (${s},${a}) normalized=${c} -> canvas (${g},${_}) [${d!=null&&d.isTitle?"TITLE":d!=null&&d.isDefinition?"DEFINITION":"TEXT"}]`),d!=null&&d.isDefinition||d!=null&&d.isImportant||d!=null&&d.isTitle){const $=d!=null&&d.isTitle?20:12,et=new Konva.Rect({x:g-$,y:_-$/2,width:e.length*b*.65+$*2,height:b*1.8+$,fill:(d==null?void 0:d.bgColor)||"rgba(0, 0, 0, 0.85)",cornerRadius:8,opacity:0,strokeWidth:d!=null&&d.isTitle?2:1,stroke:d!=null&&d.isTitle?"#FFD700":"rgba(255, 255, 255, 0.1)"});o.add(et),new Konva.Tween({node:et,duration:.3,opacity:.8}).play()}const _e=new Konva.Text({text:"",x:g,y:_,fill:nt,fontSize:b,fontFamily:"Inter, system-ui, -apple-system, sans-serif",fontStyle:rt,fontWeight:j,align:tt,opacity:1,shadowColor:"black",shadowBlur:d!=null&&d.isTitle?15:8,shadowOpacity:.5,shadowOffsetX:2,shadowOffsetY:2});o.add(_e),o.draw();const st=e;let at=0;const ot=d!=null&&d.isTitle?50:30,it=setInterval(()=>{at<=st.length?(_e.text(st.slice(0,at)),o.draw(),at++):clearInterval(it)},ot);console.log(`[renderer] drawLabel: Starting typewriter animation for "${e}" with speed ${ot}ms`)}function drawTitle(o,e,s,a){if(!stage)return;const c=ny(typeof s=="number"?s:.06),h=new Konva.Text({text:e,x:0,y:c,width:stage.width(),align:"center",fill:"#111",fontStyle:"bold",fontSize:28});h.opacity(0),o.add(h),o.draw(),new Konva.Tween({node:h,duration:Math.max(.2,a||.5),opacity:1}).play()}function drawMathLabel(o,e,s,a,c){if(!overlay||!stage)return;const h=a?nx(e):e,d=a?ny(s):s;let g=0;if(c!==void 0)for(const[_e,st]of layers)Math.floor(_e/1e4)===c&&(g=st.y());const _=document.createElement("div");_.style.position="absolute",_.style.left=h+"px",_.style.top=g+d+"px",_.style.color="#FFE4B5",_.style.fontSize="20px",_.style.fontFamily="Computer Modern, KaTeX_Main, serif",_.style.opacity="0",_.style.transition="opacity 0.8s ease-in",_.style.background="linear-gradient(135deg, rgba(30,30,40,0.95) 0%, rgba(40,40,55,0.95) 100%)",_.style.padding="8px 12px",_.style.borderRadius="6px",_.style.border="1px solid rgba(255, 215, 0, 0.3)",_.style.boxShadow="0 4px 6px rgba(0,0,0,0.3), 0 0 20px rgba(255, 215, 0, 0.1)";let b=o.replace(/\$\$/g,"");b=b.replace(/\\vec\{([^}]+)\}/g,"$1⃗"),b=b.replace(/\\text\{([^}]+)\}/g,"$1"),b=b.replace(/\\frac\{([^}]+)\}\{([^}]+)\}/g,"($1)/($2)");const j={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉","+":"₊","-":"₋","=":"₌","(":"₍",")":"₎",a:"ₐ",e:"ₑ",o:"ₒ",x:"ₓ",h:"ₕ",k:"ₖ",l:"ₗ",m:"ₘ",n:"ₙ",p:"ₚ",s:"ₛ",t:"ₜ"},rt={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","+":"⁺","-":"⁻","=":"⁼","(":"⁽",")":"⁾"},tt=_e=>_e.split("").map(st=>j[st]||st).join(""),nt=_e=>_e.split("").map(st=>rt[st]||st).join("");b=b.replace(/_\{([^}]+)\}/g,(_e,st)=>tt(st)),b=b.replace(/\^\{([^}]+)\}/g,(_e,st)=>nt(st)),b=b.replace(/_([a-zA-Z0-9+\-=()])/g,(_e,st)=>tt(st)),b=b.replace(/\^([a-zA-Z0-9+\-=()])/g,(_e,st)=>nt(st)),b=b.replace(/\\cdot/g,"·").replace(/\\sum/g,"∑").replace(/\\int/g,"∫").replace(/\\pi/g,"π").replace(/\\alpha/g,"α").replace(/\\beta/g,"β").replace(/\\gamma/g,"γ").replace(/\\theta/g,"θ").replace(/\\omega/g,"ω").replace(/\\Delta/g,"Δ").replace(/\\sigma/g,"σ").replace(/\\lambda/g,"λ").replace(/\\mu/g,"μ").replace(/\\infty/g,"∞").replace(/\\approx/g,"≈").replace(/\\neq/g,"≠").replace(/\\leq/g,"≤").replace(/\\geq/g,"≥"),_.innerHTML=b,overlay.appendChild(_),setTimeout(()=>{_.style.opacity="1"},100),console.log(`[renderer] Enhanced math label: "${o}" → "${b}" at (${h},${d})`)}async function drawCurve(o,e,s,a,c,h){if(!stage||e.length<2)return;const d=e.map(([tt,nt])=>s?[nx(tt),ny(nt)]:[tt,nt]).flat(),g=new Konva.Line({points:[],stroke:a||"#3b82f6",strokeWidth:h||3,lineCap:"round",lineJoin:"round",opacity:0,shadowColor:a||"#3b82f6",shadowBlur:10,shadowOpacity:.3});o.add(g),new Konva.Tween({node:g,duration:.3,opacity:1}).play();const b=Math.max(.5,c||2)*1e3,j=e.length,rt=performance.now();return new Promise(tt=>{function nt(_e){const st=_e-rt,at=Math.min(1,st/b),ot=at<.5?2*at*at:1-Math.pow(-2*at+2,2)/2,it=Math.max(2,Math.floor(ot*j)),$=d.slice(0,it*2);g.points($),o.batchDraw(),at<1?requestAnimationFrame(nt):(new Konva.Tween({node:g,duration:.3,strokeWidth:(h||3)*1.2,onFinish:()=>{new Konva.Tween({node:g,duration:.3,strokeWidth:h||3}).play()}}).play(),tt())}requestAnimationFrame(nt)})}function drawVector(o,e,s,a,c,h,d,g){const _=h?nx(e):e,b=h?ny(s):s,j=h?nx(a):a,rt=h?ny(c):c,tt=d||"#ef4444",nt=new Konva.Arrow({points:[_,b,_,b],pointerLength:10,pointerWidth:10,fill:tt,stroke:tt,strokeWidth:3,opacity:0});o.add(nt);const _e=new Konva.Tween({node:nt,duration:.3,opacity:1}),st=new Konva.Tween({node:nt,duration:.8,points:[_,b,j,rt],easing:Konva.Easings.EaseInOut});_e.play(),setTimeout(()=>st.play(),300),g&&setTimeout(()=>{const at=(_+j)/2,ot=(b+rt)/2,it=new Konva.Text({text:g,x:at+10,y:ot-10,fill:tt,fontSize:14,fontStyle:"italic",opacity:0});o.add(it),new Konva.Tween({node:it,duration:.5,opacity:1}).play()},1100),o.draw(),console.log(`[renderer] Vector drawn from (${_},${b}) to (${j},${rt})`)}function drawCircle(o,e,s,a,c,h,d){const g=c?nx(e):e,_=c?ny(s):s,b=c?a*((stage==null?void 0:stage.width())||800):a,j=new Konva.Circle({x:g,y:_,radius:0,stroke:h||"#10b981",strokeWidth:2,fill:d?h||"#10b981":void 0,opacity:d?.3:1});o.add(j),new Konva.Tween({node:j,duration:.6,radius:b,easing:Konva.Easings.BackEaseOut}).play(),o.draw(),console.log(`[renderer] Circle drawn at (${g},${_}) with radius ${b}`)}function createOrbit(o,e){if(!stage)return;const s=e.centerX*(stage.width()||800),a=e.centerY*(stage.height()||600),c=e.radius*Math.min(stage.width()||800,stage.height()||600),h=e.objectRadius*50,d=e.color||"#3498db",g=new Konva.Circle({x:s,y:a,radius:h*1.5,fill:e.centerColor||"#FFD700",shadowColor:e.centerColor||"#FFD700",shadowBlur:30,shadowOpacity:.9});if(o.add(g),new Konva.Animation(at=>{if(!at)return;const ot=1+Math.sin(at.time*.002)*.1;g.scaleX(ot),g.scaleY(ot)},o).start(),e.showCenterArrow){const at=new Konva.Arrow({points:[s-100,a-100,s-20,a-20],pointerLength:10,pointerWidth:10,fill:"#FF0000",stroke:"#FF0000",strokeWidth:2,opacity:0});o.add(at),new Konva.Tween({node:at,duration:.5,opacity:.8}).play()}const b=new Konva.Circle({x:s,y:a,radius:c,stroke:"rgba(255, 255, 255, 0.2)",strokeWidth:1,dash:[5,5],opacity:0});o.add(b),new Konva.Tween({node:b,duration:.5,opacity:1}).play();const rt=new Konva.Circle({x:s+c,y:a,radius:0,fill:d,shadowColor:d,shadowBlur:20,shadowOpacity:.6});o.add(rt),new Konva.Tween({node:rt,duration:.5,radius:h,easing:Konva.Easings.BackEaseOut}).play();let nt=null;const _e=[];e.trail&&(nt=new Konva.Line({points:[],stroke:d,strokeWidth:2,opacity:.3,lineCap:"round",lineJoin:"round"}),o.add(nt),nt.moveToBottom(),b.moveToBottom());const st=new Konva.Animation(at=>{if(!at)return;const ot=at.time/(e.period*1e3)*Math.PI*2,it=s+Math.cos(ot)*c,$=a+Math.sin(ot)*c;rt.position({x:it,y:$}),nt&&e.trail&&(_e.push(it,$),_e.length>200&&_e.splice(0,2),nt.points(_e))},o);return setTimeout(()=>st.start(),500),st}function createWave(o,e){if(!stage)return;const s=e.startX*(stage.width()||800),a=e.startY*(stage.height()||600),c=e.width*(stage.width()||800),h=e.amplitude*100,d=e.color||"#00bbff",g=new Konva.Line({points:[],stroke:d,strokeWidth:3,lineCap:"round",lineJoin:"round",tension:.5,opacity:0,shadowColor:d,shadowBlur:10,shadowOpacity:.5});o.add(g),new Konva.Tween({node:g,duration:.5,opacity:1}).play();const b=new Konva.Animation(j=>{if(!j)return;const rt=j.time*.001*e.speed,tt=[];for(let nt=0;nt<=c;nt+=2){const _e=nt/c,st=Math.sin(2*Math.PI*e.frequency*_e-rt)*h;tt.push(s+nt,a+st)}g.points(tt)},o);return b.start(),b}function createParticles(o,e){if(!stage)return;const s=e.x*(stage.width()||800),a=e.y*(stage.height()||600),c=[],h=new Konva.Group;o.add(h);for(let g=0;g<e.count;g++){const _=Math.PI*2*g/e.count+Math.random()*e.spread,b=e.speed*(.5+Math.random()),j={node:new Konva.Circle({x:s,y:a,radius:2+Math.random()*2,fill:e.color||"#FFD700",opacity:1,shadowColor:e.color||"#FFD700",shadowBlur:10,shadowOpacity:.8}),vx:Math.cos(_)*b,vy:Math.sin(_)*b,life:e.lifetime};h.add(j.node),c.push(j)}const d=new Konva.Animation(g=>{if(!g)return;const _=g.timeDiff*.001;c.forEach(b=>{if(b.life-=_,b.life<=0){b.node.opacity(0);return}const j=Math.max(0,b.life/e.lifetime);b.node.opacity(j);const rt=b.node.x()+b.vx*_,tt=b.node.y()+b.vy*_;b.node.position({x:rt,y:tt})})},o);return d.start(),setTimeout(()=>{d.stop(),h.destroy()},e.lifetime*1e3),d}function createAnimatedArrow(o,e){if(!stage)return;const s=e.x*(stage.width()||800),a=e.y*(stage.height()||600),c=e.length*100,h=e.angle||0,d=e.color||"#00ff88",g=new Konva.Circle({x:s,y:a,radius:15,fill:d,opacity:.2,shadowColor:d,shadowBlur:25,shadowOpacity:.5});o.add(g),new Konva.Tween({node:g,duration:.5,radius:30,opacity:0,onFinish:()=>g.destroy()}).play();const b=s+Math.cos(h)*c,j=a+Math.sin(h)*c,rt=new Konva.Arrow({points:[s,a,s,a],pointerLength:12,pointerWidth:12,fill:d,stroke:d,strokeWidth:3,opacity:0,shadowColor:d,shadowBlur:15,shadowOpacity:.5});o.add(rt);const tt=new Konva.Tween({node:rt,duration:.3,opacity:1}),nt=new Konva.Tween({node:rt,duration:.8,points:[s,a,b,j],easing:Konva.Easings.EaseInOut});if(tt.play(),setTimeout(()=>nt.play(),300),e.animated){const _e=new Konva.Animation(st=>{if(!st)return;const at=1+Math.sin(st.time*.003)*.05;rt.scaleX(at),rt.scaleY(at);const ot=Math.sin(st.time*.002)*2,it=Math.cos(st.time*.002)*2;rt.points([s+ot,a+it,b,j])},o);return _e.start(),_e}}function createVectorField(o,e){if(!stage)return;const s=stage.width()||800,a=stage.height()||600,c=e.gridSize,h=[];for(let g=c;g<s;g+=c)for(let _=c;_<a;_+=c){const b=new Konva.Arrow({points:[g,_,g,_],pointerLength:5,pointerWidth:5,fill:"#10b981",stroke:"#10b981",strokeWidth:1,opacity:.4});o.add(b),h.push(b)}const d=new Konva.Animation(g=>{if(!g)return;const _=g.time*.001;h.forEach(b=>{const j=b.points(),rt=j[0],tt=j[1];let nt=0,_e=0;switch(e.type){case"vector":nt=-(tt-a/2)/100,_e=(rt-s/2)/100;break;case"electric":const at=rt-s/2,ot=tt-a/2,it=Math.sqrt(at*at+ot*ot)+1;nt=at/it*e.strength,_e=ot/it*e.strength;break;case"magnetic":nt=Math.sin(_+rt*.01)*e.strength,_e=Math.cos(_+tt*.01)*e.strength;break}const st=20;b.points([rt,tt,rt+nt*st,tt+_e*st])})},o);return d.start(),d}function drawRect(o,e,s,a,c,h,d,g){const _=h?nx(e):e,b=h?ny(s):s,j=h?a*((stage==null?void 0:stage.width())||800):a,rt=h?c*stepHeight:c,tt=new Konva.Rect({x:_,y:b,width:0,height:0,stroke:d||"#f59e0b",strokeWidth:2,fill:g?d||"#f59e0b":void 0,opacity:g?.2:1});o.add(tt),new Konva.Tween({node:tt,duration:.7,width:j,height:rt,easing:Konva.Easings.EaseInOut}).play(),o.draw(),console.log(`[renderer] Rectangle drawn at (${_},${b}) with size ${j}x${rt}`)}async function initRenderer(o,e){stage=o,overlay=e,console.log(`[renderer] initRenderer: stage size ${stage.width()}x${stage.height()}`);const s=stage.container();if(s.style.background="linear-gradient(180deg, #1a1a2e 0%, #16213e 100%)",s.style.transition="none",clear(),pendingChunks.length){const a=pendingChunks.splice(0);console.log(`[renderer] Flushing queued chunks: ${a.length}`);for(const c of a)await execChunk(c)}}async function execChunk(o){var g,_;if(o.type!=="actions"||o.stepId===void 0||o.stepId===null){console.error("[renderer] Invalid chunk received:",o);return}const e=parseInt(String(o.stepId));if(window.stepStartTimes||(window.stepStartTimes={}),window.stepStartTimes[e]=Date.now(),console.log("[renderer] Starting step:",o.stepId,"with",(g=o.actions)==null?void 0:g.length,"actions"),!stage){console.warn("[renderer] Stage not initialized yet; queuing chunk for later flush:",{stepId:o.stepId,actions:((_=o.actions)==null?void 0:_.length)||0}),pendingChunks.push(o);return}let s=ensureLayer(o.stepId,!0);const a=Date.now();for(const b of o.actions)await processActionImpl(b,s,o);const c=Date.now()-a,h=15e3,d=5e3;if(c<h){const b=h-c;console.log(`[renderer] Step ${o.stepId} completed in ${c}ms, waiting ${b}ms more`),await new Promise(j=>setTimeout(j,b))}console.log(`[renderer] Adding ${d}ms grasp time for step ${o.stepId}`),await new Promise(b=>setTimeout(b,d)),console.log("[renderer] Completed step:",o.stepId,"Total time:",Date.now()-a,"ms")}async function processActionImpl(action,layer,chunk){switch(action.op){case"clear":action.target==="all"?stage.find("Layer").forEach(o=>o.destroyChildren()):layer.destroyChildren();break;case"drawAxis":drawAxis(layer,{xLabel:action.xLabel,yLabel:action.yLabel});break;case"drawLabel":drawLabel(layer,action.text,action.x,action.y,action.normalized,action.color,{isTitle:action.isTitle,isDefinition:action.isDefinition,isImportant:action.isImportant,fontSize:action.fontSize,bold:action.bold,italic:action.italic,align:action.align,bgColor:action.bgColor});break;case"drawMathLabel":drawMathLabel(action.tex,action.x,action.y,action.normalized,chunk.stepId);break;case"drawCurve":await drawCurve(layer,action.points,action.normalized,action.color,action.duration,action.width);break;case"drawVector":drawVector(layer,action.x1,action.y1,action.x2,action.y2,action.normalized,action.color,action.label),await new Promise(o=>setTimeout(o,1200));break;case"drawCircle":drawCircle(layer,action.x,action.y,action.radius,action.normalized,action.color,action.fill),await new Promise(o=>setTimeout(o,700));break;case"drawRect":drawRect(layer,action.x,action.y,action.width,action.height,action.normalized,action.color,action.fill),await new Promise(o=>setTimeout(o,800));break;case"delay":await new Promise(o=>setTimeout(o,Math.max(0,(action.duration||0)*1e3)));break;case"drawTitle":drawTitle(layer,action.text,action.y,action.duration);break;case"orbit":createOrbit(layer,action),await new Promise(o=>setTimeout(o,Math.min(action.period*1e3,5e3)));break;case"wave":createWave(layer,action),await new Promise(o=>setTimeout(o,2e3));break;case"particle":createParticles(layer,action),await new Promise(o=>setTimeout(o,Math.min(action.lifetime*500,2e3)));break;case"arrow":createAnimatedArrow(layer,action),await new Promise(o=>setTimeout(o,action.animated?2e3:1500));break;case"field":createVectorField(layer,action),await new Promise(o=>setTimeout(o,2e3));break;case"pulse":if(action.targetId){const o=layer.findOne(`#${action.targetId}`);if(o){const e=new Konva.Animation(s=>{if(!s)return;const a=1+Math.sin(s.time*.003)*(action.scale-1);o.scaleX(a),o.scaleY(a)},layer);e.start(),action.repeat&&action.repeat>0&&setTimeout(()=>e.stop(),action.duration*1e3)}}break;case"rotate":if(action.targetId){const o=layer.findOne(`#${action.targetId}`);o&&(new Konva.Tween({node:o,duration:action.duration,rotation:action.angle,easing:Konva.Easings.EaseInOut}).play(),await new Promise(s=>setTimeout(s,action.duration*1e3)))}break;case"customPath":if(action.path){const o=new Konva.Path({data:action.path,fill:action.fill||"transparent",stroke:action.stroke||"#ffffff",strokeWidth:action.strokeWidth||2,x:(action.x||0)*((stage==null?void 0:stage.width())||800),y:(action.y||0)*((stage==null?void 0:stage.height())||600),scale:{x:action.scale||1,y:action.scale||1},opacity:0});layer.add(o),new Konva.Tween({node:o,duration:1,opacity:1,easing:Konva.Easings.EaseInOut}).play(),action.glow&&(o.shadowColor(action.stroke||"#ffffff"),o.shadowBlur(20),o.shadowOpacity(.5)),await new Promise(s=>setTimeout(s,1e3))}break;case"drawGraph":if(action.func&&action.domain){const points=[],[xMin,xMax]=action.domain,steps=100,dx=(xMax-xMin)/steps;for(let i=0;i<=steps;i++){const x=xMin+i*dx;let y;try{y=eval(action.func.replace(/x/g,`(${x})`))}catch{y=0}const screenX=(x-xMin)/(xMax-xMin)*((stage==null?void 0:stage.width())||800)*.8+((stage==null?void 0:stage.width())||800)*.1,screenY=((stage==null?void 0:stage.height())||600)*.5-y*(action.scale||50);points.push(screenX,screenY)}const graph=new Konva.Line({points,stroke:action.color||"#00ff88",strokeWidth:3,lineCap:"round",lineJoin:"round",tension:.1,opacity:0});layer.add(graph);const len=points.length*2;graph.dashEnabled(!0),graph.dash([len,len]),graph.dashOffset(len),graph.opacity(1);const anim=new Konva.Tween({node:graph,duration:2,dashOffset:0,easing:Konva.Easings.EaseInOut});anim.play(),await new Promise(o=>setTimeout(o,2e3))}break;case"drawDiagram":const diagramGroup=new Konva.Group({x:(action.x||.5)*((stage==null?void 0:stage.width())||800),y:(action.y||.5)*((stage==null?void 0:stage.height())||600)});switch(layer.add(diagramGroup),action.type){case"neuralNetwork":const o=action.layers||[3,4,2],e=80,s=15;for(let h=0;h<o.length;h++){const d=h*e-(o.length-1)*e/2,g=o[h];for(let _=0;_<g;_++){const b=_*40-(g-1)*20,j=new Konva.Circle({x:d,y:b,radius:s,fill:h===0?"#3498db":h===o.length-1?"#e74c3c":"#2ecc71",stroke:"#ffffff",strokeWidth:2,opacity:0});if(diagramGroup.add(j),new Konva.Tween({node:j,duration:.3,opacity:1,delay:(h*g+_)*.05}).play(),h<o.length-1){const tt=o[h+1];for(let nt=0;nt<tt;nt++){const _e=(h+1)*e-(o.length-1)*e/2,st=nt*40-(tt-1)*20,at=new Konva.Line({points:[d,b,_e,st],stroke:"rgba(255, 255, 255, 0.3)",strokeWidth:1,opacity:0});diagramGroup.add(at),at.moveToBottom(),new Konva.Tween({node:at,duration:.5,opacity:1,delay:(h*g+_)*.05+.3}).play()}}}}break;case"molecule":const a=action.atoms||[{element:"C",x:0,y:0},{element:"H",x:-30,y:-30},{element:"H",x:30,y:-30},{element:"H",x:-30,y:30},{element:"H",x:30,y:30}],c=action.bonds||[[0,1],[0,2],[0,3],[0,4]];c.forEach(([h,d],g)=>{const _=a[h],b=a[d],j=new Konva.Line({points:[_.x,_.y,b.x,b.y],stroke:"#666666",strokeWidth:2,opacity:0});diagramGroup.add(j),new Konva.Tween({node:j,duration:.3,opacity:1,delay:g*.1}).play()}),a.forEach((h,d)=>{const g=new Konva.Group({x:h.x,y:h.y}),_=new Konva.Circle({radius:20,fill:h.element==="C"?"#333333":h.element==="H"?"#ffffff":h.element==="O"?"#ff0000":h.element==="N"?"#0000ff":"#999999",stroke:"#ffffff",strokeWidth:2,opacity:0}),b=new Konva.Text({text:h.element,fontSize:16,fontFamily:"Arial",fill:h.element==="C"?"#ffffff":"#000000",align:"center",verticalAlign:"middle",offsetX:8,offsetY:8,opacity:0});g.add(_),g.add(b),diagramGroup.add(g),new Konva.Tween({node:g,duration:.5,opacity:1,delay:c.length*.1+d*.1}).play()});break}await new Promise(o=>setTimeout(o,2e3));break;case"flow":const flowParticles=[],flowGroup=new Konva.Group;layer.add(flowGroup);const flowPath=new Konva.Line({points:action.path.flat(),stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:2,dash:[5,5]});layer.add(flowPath),flowPath.moveToBottom();for(let o=0;o<action.particleCount;o++){const e=new Konva.Circle({x:action.path[0][0],y:action.path[0][1],radius:3,fill:action.color||"#00bbff",opacity:.8,shadowColor:action.color||"#00bbff",shadowBlur:10,shadowOpacity:.5});flowGroup.add(e),flowParticles.push({node:e,pathIndex:0,progress:o*(1/action.particleCount)})}const flowAnimation=new Konva.Animation(o=>{if(!o)return;const e=o.timeDiff*.001;flowParticles.forEach(s=>{s.progress+=action.speed*e*.1,s.progress>=1&&(s.progress=0,s.pathIndex=(s.pathIndex+1)%(action.path.length-1));const a=action.path[s.pathIndex],c=action.path[s.pathIndex+1]||action.path[0],h=a[0]+(c[0]-a[0])*s.progress,d=a[1]+(c[1]-a[1])*s.progress;s.node.position({x:h,y:d})})},layer);flowAnimation.start();break;default:console.warn("[renderer] Unknown action operation:",action);break}}function CanvasStage(){const o=reactExports.useRef(null),e=reactExports.useRef(null),s=reactExports.useRef(null),a=reactExports.useRef(null),c=reactExports.useRef(null),h=16/10,d=800,g=500,_=1400,b=875,[j,rt]=reactExports.useState({w:d,h:g});return reactExports.useEffect(()=>{function tt(){const nt=window.innerWidth-60,_e=window.innerHeight-250;let st=Math.min(nt,_),at=st/h;(at>_e||at>b)&&(at=Math.min(_e,b),st=at*h),st=Math.max(d,st),at=Math.max(g,at),rt({w:Math.round(st),h:Math.round(at)})}return tt(),window.addEventListener("resize",tt),()=>window.removeEventListener("resize",tt)},[]),reactExports.useEffect(()=>{if(a.current&&(console.log("[CanvasStage] Cleaning up previous stage"),c.current&&c.current.cleanup(),a.current.destroy(),a.current=null,c.current=null,delete window.enhancedRenderer),!o.current||!e.current){console.log("[CanvasStage] Container not ready");return}if(j.w===0||j.h===0){console.log("[CanvasStage] Size not set yet");return}console.log("[CanvasStage] Creating Konva stage"),console.log("[CanvasStage] Container:",o.current),console.log("[CanvasStage] Size:",j.w,"x",j.h);const tt="konva-stage-"+Date.now();o.current.id=tt,setTimeout(()=>{if(o.current)try{const nt=new Konva.Stage({container:tt,width:j.w,height:j.h});a.current=nt,console.log("[CanvasStage] Stage created successfully");const _e=new Konva.Layer,st=new Konva.Circle({x:j.w/2,y:j.h/2,radius:30,fill:"blue",stroke:"black",strokeWidth:2});_e.add(st),nt.add(_e),_e.draw(),console.log("[CanvasStage] Test circle added"),console.log("[CanvasStage] Canvas element exists:",!!document.querySelector(`#${tt} canvas`)),initRenderer(nt,e.current),console.log("[CanvasStage] Standard renderer initialized"),nt.batchDraw(),console.log("[CanvasStage] Initial draw complete")}catch(nt){console.error("[CanvasStage] Failed to create stage:",nt)}},100)},[j.w,j.h]),reactExports.useEffect(()=>{a.current&&(a.current.width(j.w),a.current.height(j.h))},[j.w,j.h]),jsxRuntimeExports.jsxs("div",{ref:s,style:{position:"relative",border:"2px solid #e0e0e0",borderRadius:12,width:j.w,height:j.h,overflowY:"auto",overflowX:"hidden",background:"white",boxShadow:"0 10px 30px rgba(0,0,0,0.1)",margin:"0 auto"},children:[jsxRuntimeExports.jsx("div",{ref:o,style:{width:j.w,minHeight:j.h,background:"white"}}),jsxRuntimeExports.jsx("div",{ref:e,style:{position:"absolute",left:0,top:0,width:j.w,height:"100%",pointerEvents:"none",zIndex:10}})]})}const PACKET_TYPES=Object.create(null);PACKET_TYPES.open="0";PACKET_TYPES.close="1";PACKET_TYPES.ping="2";PACKET_TYPES.pong="3";PACKET_TYPES.message="4";PACKET_TYPES.upgrade="5";PACKET_TYPES.noop="6";const PACKET_TYPES_REVERSE=Object.create(null);Object.keys(PACKET_TYPES).forEach(o=>{PACKET_TYPES_REVERSE[PACKET_TYPES[o]]=o});const ERROR_PACKET={type:"error",data:"parser error"},withNativeBlob$1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",withNativeArrayBuffer$2=typeof ArrayBuffer=="function",isView$1=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer,encodePacket=({type:o,data:e},s,a)=>withNativeBlob$1&&e instanceof Blob?s?a(e):encodeBlobAsBase64(e,a):withNativeArrayBuffer$2&&(e instanceof ArrayBuffer||isView$1(e))?s?a(e):encodeBlobAsBase64(new Blob([e]),a):a(PACKET_TYPES[o]+(e||"")),encodeBlobAsBase64=(o,e)=>{const s=new FileReader;return s.onload=function(){const a=s.result.split(",")[1];e("b"+(a||""))},s.readAsDataURL(o)};function toArray(o){return o instanceof Uint8Array?o:o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}let TEXT_ENCODER;function encodePacketToBinary(o,e){if(withNativeBlob$1&&o.data instanceof Blob)return o.data.arrayBuffer().then(toArray).then(e);if(withNativeArrayBuffer$2&&(o.data instanceof ArrayBuffer||isView$1(o.data)))return e(toArray(o.data));encodePacket(o,!1,s=>{TEXT_ENCODER||(TEXT_ENCODER=new TextEncoder),e(TEXT_ENCODER.encode(s))})}const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let o=0;o<chars.length;o++)lookup$1[chars.charCodeAt(o)]=o;const decode$1=o=>{let e=o.length*.75,s=o.length,a,c=0,h,d,g,_;o[o.length-1]==="="&&(e--,o[o.length-2]==="="&&e--);const b=new ArrayBuffer(e),j=new Uint8Array(b);for(a=0;a<s;a+=4)h=lookup$1[o.charCodeAt(a)],d=lookup$1[o.charCodeAt(a+1)],g=lookup$1[o.charCodeAt(a+2)],_=lookup$1[o.charCodeAt(a+3)],j[c++]=h<<2|d>>4,j[c++]=(d&15)<<4|g>>2,j[c++]=(g&3)<<6|_&63;return b},withNativeArrayBuffer$1=typeof ArrayBuffer=="function",decodePacket=(o,e)=>{if(typeof o!="string")return{type:"message",data:mapBinary(o,e)};const s=o.charAt(0);return s==="b"?{type:"message",data:decodeBase64Packet(o.substring(1),e)}:PACKET_TYPES_REVERSE[s]?o.length>1?{type:PACKET_TYPES_REVERSE[s],data:o.substring(1)}:{type:PACKET_TYPES_REVERSE[s]}:ERROR_PACKET},decodeBase64Packet=(o,e)=>{if(withNativeArrayBuffer$1){const s=decode$1(o);return mapBinary(s,e)}else return{base64:!0,data:o}},mapBinary=(o,e)=>{switch(e){case"blob":return o instanceof Blob?o:new Blob([o]);case"arraybuffer":default:return o instanceof ArrayBuffer?o:o.buffer}},SEPARATOR="",encodePayload=(o,e)=>{const s=o.length,a=new Array(s);let c=0;o.forEach((h,d)=>{encodePacket(h,!1,g=>{a[d]=g,++c===s&&e(a.join(SEPARATOR))})})},decodePayload=(o,e)=>{const s=o.split(SEPARATOR),a=[];for(let c=0;c<s.length;c++){const h=decodePacket(s[c],e);if(a.push(h),h.type==="error")break}return a};function createPacketEncoderStream(){return new TransformStream({transform(o,e){encodePacketToBinary(o,s=>{const a=s.length;let c;if(a<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,a);else if(a<65536){c=new Uint8Array(3);const h=new DataView(c.buffer);h.setUint8(0,126),h.setUint16(1,a)}else{c=new Uint8Array(9);const h=new DataView(c.buffer);h.setUint8(0,127),h.setBigUint64(1,BigInt(a))}o.data&&typeof o.data!="string"&&(c[0]|=128),e.enqueue(c),e.enqueue(s)})}})}let TEXT_DECODER;function totalLength(o){return o.reduce((e,s)=>e+s.length,0)}function concatChunks(o,e){if(o[0].length===e)return o.shift();const s=new Uint8Array(e);let a=0;for(let c=0;c<e;c++)s[c]=o[0][a++],a===o[0].length&&(o.shift(),a=0);return o.length&&a<o[0].length&&(o[0]=o[0].slice(a)),s}function createPacketDecoderStream(o,e){TEXT_DECODER||(TEXT_DECODER=new TextDecoder);const s=[];let a=0,c=-1,h=!1;return new TransformStream({transform(d,g){for(s.push(d);;){if(a===0){if(totalLength(s)<1)break;const _=concatChunks(s,1);h=(_[0]&128)===128,c=_[0]&127,c<126?a=3:c===126?a=1:a=2}else if(a===1){if(totalLength(s)<2)break;const _=concatChunks(s,2);c=new DataView(_.buffer,_.byteOffset,_.length).getUint16(0),a=3}else if(a===2){if(totalLength(s)<8)break;const _=concatChunks(s,8),b=new DataView(_.buffer,_.byteOffset,_.length),j=b.getUint32(0);if(j>Math.pow(2,21)-1){g.enqueue(ERROR_PACKET);break}c=j*Math.pow(2,32)+b.getUint32(4),a=3}else{if(totalLength(s)<c)break;const _=concatChunks(s,c);g.enqueue(decodePacket(h?_:TEXT_DECODER.decode(_),e)),a=0}if(c===0||c>o){g.enqueue(ERROR_PACKET);break}}}})}const protocol$1=4;function Emitter(o){if(o)return mixin(o)}function mixin(o){for(var e in Emitter.prototype)o[e]=Emitter.prototype[e];return o}Emitter.prototype.on=Emitter.prototype.addEventListener=function(o,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(e),this};Emitter.prototype.once=function(o,e){function s(){this.off(o,s),e.apply(this,arguments)}return s.fn=e,this.on(o,s),this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(o,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+o];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+o],this;for(var a,c=0;c<s.length;c++)if(a=s[c],a===e||a.fn===e){s.splice(c,1);break}return s.length===0&&delete this._callbacks["$"+o],this};Emitter.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+o],a=1;a<arguments.length;a++)e[a-1]=arguments[a];if(s){s=s.slice(0);for(var a=0,c=s.length;a<c;++a)s[a].apply(this,e)}return this};Emitter.prototype.emitReserved=Emitter.prototype.emit;Emitter.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]};Emitter.prototype.hasListeners=function(o){return!!this.listeners(o).length};const nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0),globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),defaultBinaryType="arraybuffer";function createCookieJar(){}function pick(o,...e){return e.reduce((s,a)=>(o.hasOwnProperty(a)&&(s[a]=o[a]),s),{})}const NATIVE_SET_TIMEOUT=globalThisShim.setTimeout,NATIVE_CLEAR_TIMEOUT=globalThisShim.clearTimeout;function installTimerFunctions(o,e){e.useNativeTimers?(o.setTimeoutFn=NATIVE_SET_TIMEOUT.bind(globalThisShim),o.clearTimeoutFn=NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)):(o.setTimeoutFn=globalThisShim.setTimeout.bind(globalThisShim),o.clearTimeoutFn=globalThisShim.clearTimeout.bind(globalThisShim))}const BASE64_OVERHEAD=1.33;function byteLength(o){return typeof o=="string"?utf8Length(o):Math.ceil((o.byteLength||o.size)*BASE64_OVERHEAD)}function utf8Length(o){let e=0,s=0;for(let a=0,c=o.length;a<c;a++)e=o.charCodeAt(a),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(a++,s+=4);return s}function randomString(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function encode(o){let e="";for(let s in o)o.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(o[s]));return e}function decode(o){let e={},s=o.split("&");for(let a=0,c=s.length;a<c;a++){let h=s[a].split("=");e[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}return e}class TransportError extends Error{constructor(e,s,a){super(e),this.description=s,this.context=a,this.type="TransportError"}}class Transport extends Emitter{constructor(e){super(),this.writable=!1,installTimerFunctions(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,s,a){return super.emitReserved("error",new TransportError(e,s,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=decodePacket(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,s={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const s=encode(e);return s.length?"?"+s:""}}class Polling extends Transport{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||s()})),this.writable||(a++,this.once("drain",function(){--a||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};decodePayload(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,encodePayload(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=randomString()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(e,s)}}let value=!1;try{value=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch(o){}const hasCORS=value;function empty(){}class BaseXHR extends Polling{constructor(e){if(super(e),typeof location<"u"){const s=location.protocol==="https:";let a=location.port;a||(a=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||a!==e.port}}doWrite(e,s){const a=this.request({method:"POST",data:e});a.on("success",s),a.on("error",(c,h)=>{this.onError("xhr post error",c,h)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,a)=>{this.onError("xhr poll error",s,a)}),this.pollXhr=e}}class Request extends Emitter{constructor(e,s,a){super(),this.createRequest=e,installTimerFunctions(this,a),this._opts=a,this._method=a.method||"GET",this._uri=s,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var e;const s=pick(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(s);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let c in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(c)&&a.setRequestHeader(c,this._opts.extraHeaders[c])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var c;a.readyState===3&&((c=this._opts.cookieJar)===null||c===void 0||c.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(c){this.setTimeoutFn(()=>{this._onError(c)},0);return}typeof document<"u"&&(this._index=Request.requestsCount++,Request.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=empty,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Request.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Request.requestsCount=0;Request.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",unloadHandler);else if(typeof addEventListener=="function"){const o="onpagehide"in globalThisShim?"pagehide":"unload";addEventListener(o,unloadHandler,!1)}}function unloadHandler(){for(let o in Request.requests)Request.requests.hasOwnProperty(o)&&Request.requests[o].abort()}const hasXHR2=function(){const o=newRequest({xdomain:!1});return o&&o.responseType!==null}();class XHR extends BaseXHR{constructor(e){super(e);const s=e&&e.forceBase64;this.supportsBinary=hasXHR2&&!s}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Request(newRequest,this.uri(),e)}}function newRequest(o){const e=o.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||hasCORS))return new XMLHttpRequest}catch{}if(!e)try{return new globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class BaseWS extends Transport{get name(){return"websocket"}doOpen(){const e=this.uri(),s=this.opts.protocols,a=isReactNative?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,a)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const a=e[s],c=s===e.length-1;encodePacket(a,this.supportsBinary,h=>{try{this.doWrite(a,h)}catch{}c&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=randomString()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const WebSocketCtor=globalThisShim.WebSocket||globalThisShim.MozWebSocket;class WS extends BaseWS{createSocket(e,s,a){return isReactNative?new WebSocketCtor(e,s,a):s?new WebSocketCtor(e,s):new WebSocketCtor(e)}doWrite(e,s){this.ws.send(s)}}class WT extends Transport{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const s=createPacketDecoderStream(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=e.readable.pipeThrough(s).getReader(),c=createPacketEncoderStream();c.readable.pipeTo(e.writable),this._writer=c.writable.getWriter();const h=()=>{a.read().then(({done:g,value:_})=>{g||(this.onPacket(_),h())}).catch(g=>{})};h();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const a=e[s],c=s===e.length-1;this._writer.write(a).then(()=>{c&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const transports={websocket:WS,webtransport:WT,polling:XHR},re=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse(o){if(o.length>8e3)throw"URI too long";const e=o,s=o.indexOf("["),a=o.indexOf("]");s!=-1&&a!=-1&&(o=o.substring(0,s)+o.substring(s,a).replace(/:/g,";")+o.substring(a,o.length));let c=re.exec(o||""),h={},d=14;for(;d--;)h[parts[d]]=c[d]||"";return s!=-1&&a!=-1&&(h.source=e,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=pathNames(h,h.path),h.queryKey=queryKey(h,h.query),h}function pathNames(o,e){const s=/\/{2,9}/g,a=e.replace(s,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&a.splice(0,1),e.slice(-1)=="/"&&a.splice(a.length-1,1),a}function queryKey(o,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,c,h){c&&(s[c]=h)}),s}const withEventListeners=typeof addEventListener=="function"&&typeof removeEventListener=="function",OFFLINE_EVENT_LISTENERS=[];withEventListeners&&addEventListener("offline",()=>{OFFLINE_EVENT_LISTENERS.forEach(o=>o())},!1);class SocketWithoutUpgrade extends Emitter{constructor(e,s){if(super(),this.binaryType=defaultBinaryType,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){const a=parse(e);s.hostname=a.host,s.secure=a.protocol==="https"||a.protocol==="wss",s.port=a.port,a.query&&(s.query=a.query)}else s.host&&(s.hostname=parse(s.host).host);installTimerFunctions(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(a=>{const c=a.prototype.name;this.transports.push(c),this._transportsByName[c]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=decode(this.opts.query)),withEventListeners&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=protocol$1,s.transport=e,this.id&&(s.sid=this.id);const a=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&SocketWithoutUpgrade.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",SocketWithoutUpgrade.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let a=0;a<this.writeBuffer.length;a++){const c=this.writeBuffer[a].data;if(c&&(s+=byteLength(c)),a>0&&s>this._maxPayload)return this.writeBuffer.slice(0,a);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,nextTick(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,a){return this._sendPacket("message",e,s,a),this}send(e,s,a){return this._sendPacket("message",e,s,a),this}_sendPacket(e,s,a,c){if(typeof s=="function"&&(c=s,s=void 0),typeof a=="function"&&(c=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const h={type:e,data:s,options:a};this.emitReserved("packetCreate",h),this.writeBuffer.push(h),c&&this.once("flush",c),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},a=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():e()}):this.upgrading?a():e()),this}_onError(e){if(SocketWithoutUpgrade.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),withEventListeners&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);a!==-1&&OFFLINE_EVENT_LISTENERS.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}SocketWithoutUpgrade.protocol=protocol$1;class SocketWithUpgrade extends SocketWithoutUpgrade{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let s=this.createTransport(e),a=!1;SocketWithoutUpgrade.priorWebsocketSuccess=!1;const c=()=>{a||(s.send([{type:"ping",data:"probe"}]),s.once("packet",rt=>{if(!a)if(rt.type==="pong"&&rt.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;SocketWithoutUpgrade.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(j(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const tt=new Error("probe error");tt.transport=s.name,this.emitReserved("upgradeError",tt)}}))};function h(){a||(a=!0,j(),s.close(),s=null)}const d=rt=>{const tt=new Error("probe error: "+rt);tt.transport=s.name,h(),this.emitReserved("upgradeError",tt)};function g(){d("transport closed")}function _(){d("socket closed")}function b(rt){s&&rt.name!==s.name&&h()}const j=()=>{s.removeListener("open",c),s.removeListener("error",d),s.removeListener("close",g),this.off("close",_),this.off("upgrading",b)};s.once("open",c),s.once("error",d),s.once("close",g),this.once("close",_),this.once("upgrading",b),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{a||s.open()},200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const s=[];for(let a=0;a<e.length;a++)~this.transports.indexOf(e[a])&&s.push(e[a]);return s}}let Socket$1=class extends SocketWithUpgrade{constructor(e,s={}){const a=typeof e=="object"?e:s;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(c=>transports[c]).filter(c=>!!c)),super(e,a)}};function url(o,e="",s){let a=o;s=s||typeof location<"u"&&location,o==null&&(o=s.protocol+"//"+s.host),typeof o=="string"&&(o.charAt(0)==="/"&&(o.charAt(1)==="/"?o=s.protocol+o:o=s.host+o),/^(https?|wss?):\/\//.test(o)||(typeof s<"u"?o=s.protocol+"//"+o:o="https://"+o),a=parse(o)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const h=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+h+":"+a.port+e,a.href=a.protocol+"://"+h+(s&&s.port===a.port?"":":"+a.port),a}const withNativeArrayBuffer=typeof ArrayBuffer=="function",isView=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer,toString=Object.prototype.toString,withNativeBlob=typeof Blob=="function"||typeof Blob<"u"&&toString.call(Blob)==="[object BlobConstructor]",withNativeFile=typeof File=="function"||typeof File<"u"&&toString.call(File)==="[object FileConstructor]";function isBinary(o){return withNativeArrayBuffer&&(o instanceof ArrayBuffer||isView(o))||withNativeBlob&&o instanceof Blob||withNativeFile&&o instanceof File}function hasBinary(o,e){if(!o||typeof o!="object")return!1;if(Array.isArray(o)){for(let s=0,a=o.length;s<a;s++)if(hasBinary(o[s]))return!0;return!1}if(isBinary(o))return!0;if(o.toJSON&&typeof o.toJSON=="function"&&arguments.length===1)return hasBinary(o.toJSON(),!0);for(const s in o)if(Object.prototype.hasOwnProperty.call(o,s)&&hasBinary(o[s]))return!0;return!1}function deconstructPacket(o){const e=[],s=o.data,a=o;return a.data=_deconstructPacket(s,e),a.attachments=e.length,{packet:a,buffers:e}}function _deconstructPacket(o,e){if(!o)return o;if(isBinary(o)){const s={_placeholder:!0,num:e.length};return e.push(o),s}else if(Array.isArray(o)){const s=new Array(o.length);for(let a=0;a<o.length;a++)s[a]=_deconstructPacket(o[a],e);return s}else if(typeof o=="object"&&!(o instanceof Date)){const s={};for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=_deconstructPacket(o[a],e));return s}return o}function reconstructPacket(o,e){return o.data=_reconstructPacket(o.data,e),delete o.attachments,o}function _reconstructPacket(o,e){if(!o)return o;if(o&&o._placeholder===!0){if(typeof o.num=="number"&&o.num>=0&&o.num<e.length)return e[o.num];throw new Error("illegal attachments")}else if(Array.isArray(o))for(let s=0;s<o.length;s++)o[s]=_reconstructPacket(o[s],e);else if(typeof o=="object")for(const s in o)Object.prototype.hasOwnProperty.call(o,s)&&(o[s]=_reconstructPacket(o[s],e));return o}const RESERVED_EVENTS$1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],protocol=5;var PacketType;(function(o){o[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK"})(PacketType||(PacketType={}));class Encoder{constructor(e){this.replacer=e}encode(e){return(e.type===PacketType.EVENT||e.type===PacketType.ACK)&&hasBinary(e)?this.encodeAsBinary({type:e.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===PacketType.BINARY_EVENT||e.type===PacketType.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=deconstructPacket(e),a=this.encodeAsString(s.packet),c=s.buffers;return c.unshift(a),c}}function isObject(o){return Object.prototype.toString.call(o)==="[object Object]"}class Decoder extends Emitter{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e);const a=s.type===PacketType.BINARY_EVENT;a||s.type===PacketType.BINARY_ACK?(s.type=a?PacketType.EVENT:PacketType.ACK,this.reconstructor=new BinaryReconstructor(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(isBinary(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const a={type:Number(e.charAt(0))};if(PacketType[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===PacketType.BINARY_EVENT||a.type===PacketType.BINARY_ACK){const h=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const d=e.substring(h,s);if(d!=Number(d)||e.charAt(s)!=="-")throw new Error("Illegal attachments");a.attachments=Number(d)}if(e.charAt(s+1)==="/"){const h=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););a.nsp=e.substring(h,s)}else a.nsp="/";const c=e.charAt(s+1);if(c!==""&&Number(c)==c){const h=s+1;for(;++s;){const d=e.charAt(s);if(d==null||Number(d)!=d){--s;break}if(s===e.length)break}a.id=Number(e.substring(h,s+1))}if(e.charAt(++s)){const h=this.tryParse(e.substr(s));if(Decoder.isPayloadValid(a.type,h))a.data=h;else throw new Error("invalid payload")}return a}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case PacketType.CONNECT:return isObject(s);case PacketType.DISCONNECT:return s===void 0;case PacketType.CONNECT_ERROR:return typeof s=="string"||isObject(s);case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&RESERVED_EVENTS$1.indexOf(s[0])===-1);case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BinaryReconstructor{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const parser=Object.freeze(Object.defineProperty({__proto__:null,Decoder,Encoder,get PacketType(){return PacketType},protocol},Symbol.toStringTag,{value:"Module"}));function on(o,e,s){return o.on(e,s),function(){o.off(e,s)}}const RESERVED_EVENTS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Socket extends Emitter{constructor(e,s,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[on(e,"open",this.onopen.bind(this)),on(e,"packet",this.onpacket.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){var a,c,h;if(RESERVED_EVENTS.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const d={type:PacketType.EVENT,data:s};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const j=this.ids++,rt=s.pop();this._registerAckCallback(j,rt),d.id=j}const g=(c=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||c===void 0?void 0:c.writable,_=this.connected&&!(!((h=this.io.engine)===null||h===void 0)&&h._hasPingExpired());return this.flags.volatile&&!g||(_?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(e,s){var a;const c=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(c===void 0){this.acks[e]=s;return}const h=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let g=0;g<this.sendBuffer.length;g++)this.sendBuffer[g].id===e&&this.sendBuffer.splice(g,1);s.call(this,new Error("operation has timed out"))},c),d=(...g)=>{this.io.clearTimeoutFn(h),s.apply(this,g)};d.withError=!0,this.acks[e]=d}emitWithAck(e,...s){return new Promise((a,c)=>{const h=(d,g)=>d?c(d):a(g);h.withError=!0,s.push(h),this.emit(e,...s)})}_addToQueue(e){let s;typeof e[e.length-1]=="function"&&(s=e.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((c,...h)=>a!==this._queue[0]?void 0:(c!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(c)):(this._queue.shift(),s&&s(null,...h)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!e||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(a=>String(a.id)===e)){const a=this.acks[e];delete this.acks[e],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case PacketType.EVENT:case PacketType.BINARY_EVENT:this.onevent(e);break;case PacketType.ACK:case PacketType.BINARY_ACK:this.onack(e);break;case PacketType.DISCONNECT:this.ondisconnect();break;case PacketType.CONNECT_ERROR:this.destroy();const a=new Error(e.data.message);a.data=e.data.data,this.emitReserved("connect_error",a);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const a of s)a.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const s=this;let a=!1;return function(...c){a||(a=!0,s.packet({type:PacketType.ACK,id:e,data:c}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(delete this.acks[e.id],s.withError&&e.data.unshift(null),s.apply(this,e.data))}onconnect(e,s){this.id=e,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let a=0;a<s.length;a++)if(e===s[a])return s.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let a=0;a<s.length;a++)if(e===s[a])return s.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const a of s)a.apply(this,e.data)}}}function Backoff(o){o=o||{},this.ms=o.min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*o);o=Math.floor(e*10)&1?o+s:o-s}return Math.min(o,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(o){this.ms=o};Backoff.prototype.setMax=function(o){this.max=o};Backoff.prototype.setJitter=function(o){this.jitter=o};class Manager extends Emitter{constructor(e,s){var a;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,installTimerFunctions(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((a=s.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const c=s.parser||parser;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Socket$1(this.uri,this.opts);const s=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const c=on(s,"open",function(){a.onopen(),e&&e()}),h=g=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",g),e?e(g):this.maybeReconnectOnOpen()},d=on(s,"error",h);if(this._timeout!==!1){const g=this._timeout,_=this.setTimeoutFn(()=>{c(),h(new Error("timeout")),s.close()},g);this.opts.autoUnref&&_.unref(),this.subs.push(()=>{this.clearTimeoutFn(_)})}return this.subs.push(c),this.subs.push(d),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(on(e,"ping",this.onping.bind(this)),on(e,"data",this.ondata.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this)),on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(s){this.onclose("parse error",s)}}ondecoded(e){nextTick(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,s){let a=this.nsps[e];return a?this._autoConnect&&!a.active&&a.connect():(a=new Socket(this,e,s),this.nsps[e]=a),a}_destroy(e){const s=Object.keys(this.nsps);for(const a of s)if(this.nsps[a].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let a=0;a<s.length;a++)this.engine.write(s[a],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,s){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(c=>{c?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",c)):e.onreconnect()}))},s);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const cache={};function lookup(o,e){typeof o=="object"&&(e=o,o=void 0),e=e||{};const s=url(o,e.path||"/socket.io"),a=s.source,c=s.id,h=s.path,d=cache[c]&&h in cache[c].nsps,g=e.forceNew||e["force new connection"]||e.multiplex===!1||d;let _;return g?_=new Manager(a,e):(cache[c]||(cache[c]=new Manager(a,e)),_=cache[c]),s.query&&!e.query&&(e.query=s.queryKey),_.socket(s.path,e)}Object.assign(lookup,{Manager,Socket,io:lookup,connect:lookup});let socket=null,currentSession=null,joinedSession=null,joinPromise=null,resolveJoin=null;function getSocket(o){return console.log("[socket] getSocket called with sessionId:",o),socket&&currentSession===o?(console.log("[socket] Reusing existing socket for session:",o),socket):(socket&&(console.log("[socket] Disconnecting old socket"),socket.disconnect(),socket=null),console.log("[socket] Creating new socket connection"),socket=lookup("http://localhost:3001",{transports:["websocket"]}),joinedSession=null,joinPromise=new Promise(e=>{resolveJoin=e}),socket.on("connect",()=>{console.log("[socket] Socket connected, joining session:",o),socket.emit("join",{sessionId:o}),currentSession=o,joinedSession=null}),socket.on("joined",e=>{console.log("[socket] Joined room ack for session:",e.sessionId),joinedSession=e.sessionId,resolveJoin&&resolveJoin()}),currentSession=o,console.log("[socket] Socket setup complete for session:",o),socket)}async function waitForJoin(o,e=3e3){if(joinedSession===o||!joinPromise)return;let s;await Promise.race([joinPromise,new Promise((a,c)=>{s=setTimeout(()=>c(new Error("join timeout")),e)})]).finally(()=>clearTimeout(s))}function App(){const[o,e]=reactExports.useState(""),[s,a]=reactExports.useState(null),[c,h]=reactExports.useState(null),[d,g]=reactExports.useState(""),[_,b]=reactExports.useState(""),[j,rt]=reactExports.useState([]),[tt,nt]=reactExports.useState(!1),[_e,st]=reactExports.useState(!1);function at(){var lt;const et=s||(typeof window<"u"&&((lt=window.crypto)!=null&&lt.randomUUID)?window.crypto.randomUUID():Math.random().toString(36).slice(2));return s||a(et),getSocket(et),et}const ot=reactExports.useMemo(()=>s?getSocket(s):null,[s]);reactExports.useEffect(()=>{if(ot)return ot.on("connect",()=>{console.log("[socket] Connected to backend, socket ID:",ot.id)}),ot.on("disconnect",et=>{console.log("[socket] Disconnected from backend:",et)}),ot.on("connect_error",et=>{console.error("[socket] Connection error:",et)}),ot.on("rendered",et=>{var lt,ut,dt,ct,pt,ht,gt;if(et.targetSession&&et.targetSession!==s){console.log("[socket] Ignoring event for different session:",et.targetSession);return}console.log("=== FRONTEND RECEIVED RENDERED EVENT ==="),console.log("Event data:",et),console.log("Session match:",et.targetSession===s||!et.targetSession),console.log("Step:",et.step),console.log("Actions:",((lt=et.actions)==null?void 0:lt.length)||0,"actions"),console.log("Plan title:",(ut=et.plan)==null?void 0:ut.title),console.log("Plan subtitle:",(dt=et.plan)==null?void 0:dt.subtitle),console.log("Plan toc:",(ct=et.plan)==null?void 0:ct.toc),console.log("=== END FRONTEND EVENT ==="),(pt=et.plan)!=null&&pt.title&&g(et.plan.title),(ht=et.plan)!=null&&ht.subtitle&&b(et.plan.subtitle),Array.isArray((gt=et.plan)==null?void 0:gt.toc)&&rt(et.plan.toc),h(et.step),et.actions&&et.actions.length>0&&execChunk(et),nt(!0),st(!1)}),()=>{ot.off("connect"),ot.off("disconnect"),ot.off("connect_error")}},[ot]);async function it(){nt(!1),st(!0);const et=at();try{await waitForJoin(et,3e3)}catch(dt){console.warn("[submit] join wait failed, proceeding anyway:",dt)}const ut=await(await fetch("http://localhost:3001/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:o,sessionId:et})})).json();a(dt=>dt||ut.sessionId||et)}async function $(){s&&await fetch(`/api/session/${s}/next`,{method:"POST"})}return jsxRuntimeExports.jsxs("div",{style:{fontFamily:"Inter, system-ui, Arial, sans-serif",padding:16},children:[jsxRuntimeExports.jsx("h2",{children:"Universal Interactive Learning Engine (MVP)"}),d&&jsxRuntimeExports.jsx("h3",{style:{marginTop:0},children:d}),_&&jsxRuntimeExports.jsx("div",{style:{marginTop:4,color:"#555"},children:_}),j.length>0&&jsxRuntimeExports.jsxs("div",{style:{marginTop:8,padding:8,background:"#fafafa",border:"1px solid #eee",borderRadius:6},children:[jsxRuntimeExports.jsx("strong",{children:"Table of Contents (5-minute plan)"}),jsxRuntimeExports.jsx("ol",{style:{margin:"8px 0 0 20px"},children:j.sort((et,lt)=>et.minute-lt.minute).map(et=>jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsxs("span",{style:{fontWeight:600},children:["Minute ",et.minute,":"]})," ",et.title,et.summary?jsxRuntimeExports.jsx("div",{style:{color:"#666"},children:et.summary}):null]},et.minute))})]}),_&&jsxRuntimeExports.jsx("h4",{style:{marginTop:0},children:_}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:[jsxRuntimeExports.jsxs("div",{style:{minWidth:320},children:[jsxRuntimeExports.jsx("label",{style:{display:"block",fontWeight:600},children:"Query"}),jsxRuntimeExports.jsx("textarea",{value:o,onChange:et=>e(et.target.value),rows:3,style:{width:"100%"},placeholder:"Type your topic (e.g., 'Explain H2O molecular structure and hydrogen bonding')"}),jsxRuntimeExports.jsx("button",{onClick:it,style:{marginTop:8},disabled:!o.trim(),children:"Run"}),jsxRuntimeExports.jsx("button",{onClick:$,style:{marginTop:8,marginLeft:8},disabled:!tt,children:"Next Step"}),c&&jsxRuntimeExports.jsxs("div",{style:{marginTop:16,padding:8,background:"#f0f0f0",borderRadius:4},children:[jsxRuntimeExports.jsx("strong",{children:"Current Step:"})," ",c==null?void 0:c.desc]})]}),jsxRuntimeExports.jsx("div",{style:{flex:1,minWidth:600},children:jsxRuntimeExports.jsx(CanvasStage,{title:d})})]})]})}const root=createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(App,{}));
