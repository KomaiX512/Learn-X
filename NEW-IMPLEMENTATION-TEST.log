
> backend@0.1.0 dev
> ts-node-dev --respawn --transpile-only src/index.ts

[INFO] 23:11:15 ts-node-dev ver. 2.0.0 (using ts-node ver. 10.9.2, typescript ver. 5.9.2)

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-11T18:11:16.031Z [debug] NEW Plan worker created
2025-10-11T18:11:16.031Z [debug] NEW Gen worker created
2025-10-11T18:11:16.032Z [debug] NEW Parallel worker created
✅ Orchestrator initialized


══════════════════════════════════════════════════════════════════════
✅ SERVER READY
══════════════════════════════════════════════════════════════════════
🌐 Backend URL: http://localhost:8000
🔗 Health Check: http://localhost:8000/health
📡 WebSocket Ready: ws://localhost:8000
══════════════════════════════════════════════════════════════════════

2025-10-11T18:11:16.035Z [debug] Server listening on port 8000
✅ Redis connected
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
2025-10-11T18:12:16.048Z [debug] [monitor] Metrics updated:
2025-10-11T18:13:16.064Z [debug] [monitor] Metrics updated:
2025-10-11T18:14:16.080Z [debug] [monitor] Metrics updated:
2025-10-11T18:14:31.381Z [debug] Received request on /api/query {"body":{"query":"mitochondrial electron transport chain"}}
2025-10-11T18:14:31.382Z [debug] [api] Stored query for session c4840e3a-5646-4502-873d-9486230524a2: "mitochondrial electron transport chain"
2025-10-11T18:14:31.382Z [debug] [orchestrator] Enqueuing plan for session c4840e3a-5646-4502-873d-9486230524a2
2025-10-11T18:14:31.383Z [debug] [orchestrator] Plan job added with id 10 for session c4840e3a-5646-4502-873d-9486230524a2

──────────────────────────────────────────────────────────────────────
📋 PLAN WORKER STARTED
──────────────────────────────────────────────────────────────────────
Session: c4840e3a-5646-4502-873d-9486230524a2
Query: mitochondrial electron transport chain
Time: 2025-10-11T18:14:31.384Z
──────────────────────────────────────────────────────────────────────
2025-10-11T18:14:31.384Z [debug] [plan] START: session=c4840e3a-5646-4502-873d-9486230524a2 query=mitochondrial electron transport chain
2025-10-11T18:14:31.384Z [debug] [monitor] Started tracking request c4840e3a-5646-4502-873d-9486230524a2
2025-10-11T18:14:31.384Z [debug] [cache] MISS - No cached plan for query: "mitochondrial electron transport chain..."
2025-10-11T18:14:31.384Z [debug] [planner] Sending enhanced prompt to Gemini...
2025-10-11T18:14:31.392Z [debug] [timeout] Setting 120000ms timeout for planner/gemini
2025-10-11T18:14:31.412Z [debug] [socket] New connection: HHF9W0XwHROzamYiAAAB
2025-10-11T18:14:31.413Z [debug] [socket] Socket HHF9W0XwHROzamYiAAAB joined session c4840e3a-5646-4502-873d-9486230524a2
2025-10-11T18:14:31.413Z [debug] [socket] Socket HHF9W0XwHROzamYiAAAB is now in rooms: HHF9W0XwHROzamYiAAAB, c4840e3a-5646-4502-873d-9486230524a2
2025-10-11T18:14:47.333Z [debug] [planner] Received response from Gemini in 15949ms
2025-10-11T18:14:47.334Z [debug] [planner] JSON parsed successfully on first attempt
2025-10-11T18:14:47.334Z [debug] [monitor] Plan generation for c4840e3a-5646-4502-873d-9486230524a2 took 15950ms
2025-10-11T18:14:47.334Z [debug] [cache] Cached plan for query: "mitochondrial electron transport chain..."
=== NEW STRUCTURED PLAN ===
Session: c4840e3a-5646-4502-873d-9486230524a2
Query: mitochondrial electron transport chain
Plan title: The Mitochondrial Electron Transport Chain: Your Cellular Power Plant
Plan subtitle: Discover how your cells generate most of their energy using a tiny, intricate molecular machine.
Plan toc: [
  {
    minute: 1,
    title: 'The Intuition',
    summary: 'Core idea: Turning food energy into usable cellular power efficiently.'
  },
  {
    minute: 2,
    title: 'How It Works',
    summary: 'The mechanism explained: Electrons drive proton pumps, creating a gradient for ATP synthesis.'
  },
  {
    minute: 3,
    title: 'Real Applications',
    summary: 'Where this matters: Life, death, disease, and performance hinge on this chain.'
  }
]
Plan steps count: 3
Step 0: id=1, tag=intuition, desc="Imagine your body as a high-performance engine. While food gives you fuel, the **Mitochondrial Electron Transport Chain (ETC)** is the power plant that extracts the maximum energy from that fuel. Think of it like a cascading series of tiny waterfalls inside your cells' powerhouses (mitochondria). High-energy **electrons**, derived from your food, are the 'water' falling down these 'waterfalls'. With each drop, a small amount of energy is released and cleverly harnessed to create cellular currency, **ATP**."
Step 1: id=2, tag=mechanics, desc="Here's the molecular relay race: High-energy **electrons**, carried by molecules like **NADH** and **FADH2** (from glucose breakdown), are passed down a 'chain' of protein complexes (**Complexes I, II, III, IV**) embedded in the **inner mitochondrial membrane**. As these electrons move from one complex to the next, like a hot potato, they release energy. This energy is used to actively pump **protons (H+)** from the inner compartment (**mitochondrial matrix**) into the space between membranes (**intermembrane space**), building up a powerful **proton gradient** – like water behind a dam. These protons then rush back into the matrix, down their concentration gradient, through a molecular turbine called **ATP Synthase**. This flow spins the turbine, directly powering the synthesis of vast amounts of **ATP**. Oxygen is the final electron acceptor, forming water."
Step 2: id=3, tag=applications, desc="The ETC is fundamental to life. Disruptions can be catastrophic. For instance, toxins like **cyanide** fatally bind to Complex IV, immediately halting electron flow and ATP production, leading to rapid cell death and organ failure. Conversely, efficient ETC function is crucial for everything from athletic performance and healthy aging to preventing **mitochondrial diseases**. Understanding this chain helps us develop treatments, optimize health, and even explore how exercise boosts cellular energy production. It's truly the engine driving most of your body's energy."
=== END NEW STRUCTURED PLAN ===
2025-10-11T18:14:47.335Z [debug] [plan] OK: session=c4840e3a-5646-4502-873d-9486230524a2 plan received with 3 steps
2025-10-11T18:14:47.335Z [debug] [plan] Enqueuing PARALLEL generation of all 3 steps
2025-10-11T18:14:47.336Z [debug] [plan] END: session=c4840e3a-5646-4502-873d-9486230524a2

====================================================================================================
🔥 PARALLEL WORKER CALLED
====================================================================================================
Job ID: 10
Job name: parallel-generate
Job data keys: [ 'plan', 'sessionId', 'query' ]
====================================================================================================


──────────────────────────────────────────────────────────────────────
⚡ PARALLEL WORKER STARTED
──────────────────────────────────────────────────────────────────────
Session: c4840e3a-5646-4502-873d-9486230524a2
Query: mitochondrial electron transport chain
Steps to generate: 3
Time: 2025-10-11T18:14:47.337Z
──────────────────────────────────────────────────────────────────────
2025-10-11T18:14:47.337Z [info] [parallel] ⚡ STARTING parallel generation for 3 steps (session: c4840e3a-5646-4502-873d-9486230524a2)
2025-10-11T18:14:47.338Z [info] [parallel] ⏸️  Staggering 5000ms before step 2 to avoid rate limits
2025-10-11T18:14:47.338Z [debug] [cache] MISS - No cached chunk for step 1
2025-10-11T18:14:47.338Z [info] [parallel] 🚀 Step 1: Using v3 TRUE GENERATION
2025-10-11T18:14:47.338Z [info] [codegenV3WithRetry] Attempt 1/2 for step 1
2025-10-11T18:14:47.339Z [info] [codegenV3] Generating step 1: Imagine your body as a high-performance engine. While food gives you fuel, the **Mitochondrial Electron Transport Chain (ETC)** is the power plant that extracts the maximum energy from that fuel. Think of it like a cascading series of tiny waterfalls inside your cells' powerhouses (mitochondria). High-energy **electrons**, derived from your food, are the 'water' falling down these 'waterfalls'. With each drop, a small amount of energy is released and cleverly harnessed to create cellular currency, **ATP**.
2025-10-11T18:14:47.339Z [info] [codegenV3] Topic: "mitochondrial electron transport chain"
2025-10-11T18:14:47.339Z [debug] [codegenV3] Prompt length: 1387 chars
2025-10-11T18:14:52.339Z [info] [parallel] ⏸️  Staggering 5000ms before step 3 to avoid rate limits
2025-10-11T18:14:52.339Z [debug] [cache] MISS - No cached chunk for step 2
2025-10-11T18:14:52.339Z [info] [parallel] 🚀 Step 2: Using v3 TRUE GENERATION
2025-10-11T18:14:52.339Z [info] [codegenV3WithRetry] Attempt 1/2 for step 2
2025-10-11T18:14:52.339Z [info] [codegenV3] Generating step 2: Here's the molecular relay race: High-energy **electrons**, carried by molecules like **NADH** and **FADH2** (from glucose breakdown), are passed down a 'chain' of protein complexes (**Complexes I, II, III, IV**) embedded in the **inner mitochondrial membrane**. As these electrons move from one complex to the next, like a hot potato, they release energy. This energy is used to actively pump **protons (H+)** from the inner compartment (**mitochondrial matrix**) into the space between membranes (**intermembrane space**), building up a powerful **proton gradient** – like water behind a dam. These protons then rush back into the matrix, down their concentration gradient, through a molecular turbine called **ATP Synthase**. This flow spins the turbine, directly powering the synthesis of vast amounts of **ATP**. Oxygen is the final electron acceptor, forming water.
2025-10-11T18:14:52.339Z [info] [codegenV3] Topic: "mitochondrial electron transport chain"
2025-10-11T18:14:52.339Z [debug] [codegenV3] Prompt length: 1747 chars
2025-10-11T18:14:57.340Z [debug] [cache] MISS - No cached chunk for step 3
2025-10-11T18:14:57.340Z [info] [parallel] 🚀 Step 3: Using v3 TRUE GENERATION
2025-10-11T18:14:57.340Z [info] [codegenV3WithRetry] Attempt 1/2 for step 3
2025-10-11T18:14:57.341Z [info] [codegenV3] Generating step 3: The ETC is fundamental to life. Disruptions can be catastrophic. For instance, toxins like **cyanide** fatally bind to Complex IV, immediately halting electron flow and ATP production, leading to rapid cell death and organ failure. Conversely, efficient ETC function is crucial for everything from athletic performance and healthy aging to preventing **mitochondrial diseases**. Understanding this chain helps us develop treatments, optimize health, and even explore how exercise boosts cellular energy production. It's truly the engine driving most of your body's energy.
2025-10-11T18:14:57.341Z [info] [codegenV3] Topic: "mitochondrial electron transport chain"
2025-10-11T18:14:57.341Z [debug] [codegenV3] Prompt length: 1448 chars
2025-10-11T18:15:16.081Z [debug] [monitor] Metrics updated:
2025-10-11T18:15:54.115Z [debug] [codegenV3] Received 6652 chars from API
2025-10-11T18:15:54.115Z [info] [codegenV3] ✅ Generated SVG in 61.78s (6652 chars)
2025-10-11T18:15:54.115Z [debug] [codegenV3] Quality: animations=false, labels=27, shapes=36
2025-10-11T18:15:54.115Z [info] [codegenV3WithRetry] ✅ SUCCESS (1 actions)
2025-10-11T18:15:54.115Z [debug] compilerRouter: routing to js
2025-10-11T18:15:54.115Z [debug] [debugger] START: Received chunk for stepId=2
2025-10-11T18:15:54.115Z [debug] [debugger] Chunk type: actions
2025-10-11T18:15:54.115Z [debug] [debugger] Has actions: true
2025-10-11T18:15:54.115Z [debug] [debugger] Actions count: 1
2025-10-11T18:15:54.115Z [debug] [debugger] Chunk is valid with 1 actions, allowing all for rich visualizations
2025-10-11T18:15:54.116Z [debug] [cache] Cached chunk for query step 2
2025-10-11T18:15:54.116Z [debug] [monitor] Step 2 generation for c4840e3a-5646-4502-873d-9486230524a2 took 61777ms
2025-10-11T18:15:54.116Z [info] [parallel] ✅ Step 2 COMPLETE in 61777ms with 1 actions

══════════════════════════════════════════════════════════════════════
🚀 ABOUT TO EMIT STEP
══════════════════════════════════════════════════════════════════════
SessionId: c4840e3a-5646-4502-873d-9486230524a2
StepId: 2
Actions: 1
Room sockets: 1
══════════════════════════════════════════════════════════════════════
✅ EMITTED SUCCESSFULLY

2025-10-11T18:15:54.116Z [info] [parallel] 🚀 IMMEDIATELY EMITTED step 2 to frontend (1 sockets)
2025-10-11T18:16:02.030Z [debug] [codegenV3] Received 8136 chars from API
2025-10-11T18:16:02.030Z [info] [codegenV3] ✅ Generated SVG in 64.69s (8136 chars)
2025-10-11T18:16:02.030Z [debug] [codegenV3] Quality: animations=false, labels=38, shapes=24
2025-10-11T18:16:02.030Z [info] [codegenV3WithRetry] ✅ SUCCESS (1 actions)
2025-10-11T18:16:02.030Z [debug] compilerRouter: routing to js
2025-10-11T18:16:02.030Z [debug] [debugger] START: Received chunk for stepId=3
2025-10-11T18:16:02.030Z [debug] [debugger] Chunk type: actions
2025-10-11T18:16:02.030Z [debug] [debugger] Has actions: true
2025-10-11T18:16:02.030Z [debug] [debugger] Actions count: 1
2025-10-11T18:16:02.030Z [debug] [debugger] Chunk is valid with 1 actions, allowing all for rich visualizations
2025-10-11T18:16:02.030Z [debug] [cache] Cached chunk for query step 3
2025-10-11T18:16:02.030Z [debug] [monitor] Step 3 generation for c4840e3a-5646-4502-873d-9486230524a2 took 64690ms
2025-10-11T18:16:02.030Z [info] [parallel] ✅ Step 3 COMPLETE in 64690ms with 1 actions

══════════════════════════════════════════════════════════════════════
🚀 ABOUT TO EMIT STEP
══════════════════════════════════════════════════════════════════════
SessionId: c4840e3a-5646-4502-873d-9486230524a2
StepId: 3
Actions: 1
Room sockets: 1
══════════════════════════════════════════════════════════════════════
✅ EMITTED SUCCESSFULLY

2025-10-11T18:16:02.031Z [info] [parallel] 🚀 IMMEDIATELY EMITTED step 3 to frontend (1 sockets)
2025-10-11T18:16:04.915Z [debug] [codegenV3] Received 9097 chars from API
2025-10-11T18:16:04.916Z [info] [codegenV3] ✅ Generated SVG in 77.58s (9097 chars)
2025-10-11T18:16:04.916Z [debug] [codegenV3] Quality: animations=false, labels=32, shapes=33
2025-10-11T18:16:04.916Z [info] [codegenV3WithRetry] ✅ SUCCESS (1 actions)
2025-10-11T18:16:04.916Z [debug] compilerRouter: routing to js
2025-10-11T18:16:04.916Z [debug] [debugger] START: Received chunk for stepId=1
2025-10-11T18:16:04.916Z [debug] [debugger] Chunk type: actions
2025-10-11T18:16:04.916Z [debug] [debugger] Has actions: true
2025-10-11T18:16:04.916Z [debug] [debugger] Actions count: 1
2025-10-11T18:16:04.916Z [debug] [debugger] Chunk is valid with 1 actions, allowing all for rich visualizations
2025-10-11T18:16:04.916Z [debug] [cache] Cached chunk for query step 1
2025-10-11T18:16:04.916Z [debug] [monitor] Step 1 generation for c4840e3a-5646-4502-873d-9486230524a2 took 77578ms
2025-10-11T18:16:04.916Z [info] [parallel] ✅ Step 1 COMPLETE in 77578ms with 1 actions

══════════════════════════════════════════════════════════════════════
🚀 ABOUT TO EMIT STEP
══════════════════════════════════════════════════════════════════════
SessionId: c4840e3a-5646-4502-873d-9486230524a2
StepId: 1
Actions: 1
Room sockets: 1
══════════════════════════════════════════════════════════════════════
✅ EMITTED SUCCESSFULLY

2025-10-11T18:16:04.916Z [info] [parallel] 🚀 IMMEDIATELY EMITTED step 1 to frontend (1 sockets)
2025-10-11T18:16:04.917Z [debug] [parallel] Parallel generation complete: 3/3 successful in 77578ms
2025-10-11T18:16:04.917Z [debug] [monitor] Completed request c4840e3a-5646-4502-873d-9486230524a2 in 93533ms (success: true)
2025-10-11T18:16:04.917Z [debug] [parallel] Job complete for session c4840e3a-5646-4502-873d-9486230524a2
2025-10-11T18:16:06.927Z [debug] [socket] Socket HHF9W0XwHROzamYiAAAB disconnected: client namespace disconnect
2025-10-11T18:16:16.093Z [debug] [monitor] Metrics updated:
2025-10-11T18:17:16.104Z [debug] [monitor] Metrics updated:
2025-10-11T18:17:49.522Z [debug] Received request on /api/query {"body":{"query":"photosynthesis"}}
2025-10-11T18:17:49.523Z [debug] [api] Stored query for session 7ed4c130-e192-4d68-afb9-d6eb3776a1c7: "photosynthesis"
2025-10-11T18:17:49.523Z [debug] [orchestrator] Enqueuing plan for session 7ed4c130-e192-4d68-afb9-d6eb3776a1c7
2025-10-11T18:17:49.523Z [debug] [orchestrator] Plan job added with id 11 for session 7ed4c130-e192-4d68-afb9-d6eb3776a1c7

──────────────────────────────────────────────────────────────────────
📋 PLAN WORKER STARTED
──────────────────────────────────────────────────────────────────────
Session: 7ed4c130-e192-4d68-afb9-d6eb3776a1c7
Query: photosynthesis
Time: 2025-10-11T18:17:49.524Z
──────────────────────────────────────────────────────────────────────
2025-10-11T18:17:49.524Z [debug] [plan] START: session=7ed4c130-e192-4d68-afb9-d6eb3776a1c7 query=photosynthesis
2025-10-11T18:17:49.524Z [debug] [monitor] Started tracking request 7ed4c130-e192-4d68-afb9-d6eb3776a1c7
2025-10-11T18:17:49.524Z [debug] [cache] MISS - No cached plan for query: "photosynthesis..."
2025-10-11T18:17:49.524Z [debug] [planner] Sending enhanced prompt to Gemini...
2025-10-11T18:17:49.524Z [debug] [timeout] Setting 120000ms timeout for planner/gemini
2025-10-11T18:18:02.063Z [debug] [planner] Received response from Gemini in 12539ms
2025-10-11T18:18:02.063Z [debug] [planner] JSON parsed successfully on first attempt
2025-10-11T18:18:02.063Z [debug] [monitor] Plan generation for 7ed4c130-e192-4d68-afb9-d6eb3776a1c7 took 12539ms
2025-10-11T18:18:02.063Z [debug] [cache] Cached plan for query: "photosynthesis..."
=== NEW STRUCTURED PLAN ===
Session: 7ed4c130-e192-4d68-afb9-d6eb3776a1c7
Query: photosynthesis
Plan title: Photosynthesis: The Plant's Secret Recipe
Plan subtitle: Discover how plants turn sunlight into energy and air, fueling life on Earth.
Plan toc: [
  {
    minute: 1,
    title: 'The Intuition',
    summary: 'How plants use sunlight to grow and create their own food.'
  },
  {
    minute: 2,
    title: 'How It Works',
    summary: 'The specific ingredients and products of this amazing process.'
  },
  {
    minute: 3,
    title: 'Real Applications',
    summary: 'Why photosynthesis is vital for all life and our planet.'
  }
]
Plan steps count: 3
Step 0: id=1, tag=intuition, desc="Imagine a tall tree or a tiny blade of grass. How do they grow so big and strong without eating burgers? They're master chefs, using sunlight as their oven! Point to a vibrant green plant and say, 'This plant isn't eating dirt; it's capturing the sun's energy, like charging a solar panel, to make its own food. That green color? It's the key to this magic!'"
Step 1: id=2, tag=mechanics, desc="So, what's the recipe? Plants take in **carbon dioxide** (CO2) from the air through tiny pores on their leaves (stomata), and **water** (H2O) from the soil through their roots. Inside their green cells are special mini-factories called **chloroplasts**, containing a pigment called **chlorophyll** (which makes them green). Chlorophyll acts like a tiny solar panel, absorbing the **sunlight** energy. This energy then powers a chemical reaction, converting CO2 and H2O into **glucose** (a type of sugar – the plant's food!) and releasing **oxygen** (O2) back into the air as a byproduct. Think of it: Water + Carbon Dioxide + Sunlight → Glucose + Oxygen."
Step 2: id=3, tag=applications, desc="Why should *we* care about a plant's lunch? Because photosynthesis is the foundation of almost all life! Every bite of food you eat, directly or indirectly, comes from this process. The oxygen you breathe, every single breath, was once a byproduct of a plant's hard work. It's also crucial for our planet's climate, removing massive amounts of CO2 from the atmosphere. Understanding photosynthesis helps us develop better crops, fight climate change, and even imagine new ways to harness solar energy, just like plants do every day."
=== END NEW STRUCTURED PLAN ===
2025-10-11T18:18:02.064Z [debug] [plan] OK: session=7ed4c130-e192-4d68-afb9-d6eb3776a1c7 plan received with 3 steps
2025-10-11T18:18:02.064Z [debug] [plan] Enqueuing PARALLEL generation of all 3 steps
2025-10-11T18:18:02.065Z [debug] [plan] END: session=7ed4c130-e192-4d68-afb9-d6eb3776a1c7

====================================================================================================
🔥 PARALLEL WORKER CALLED
====================================================================================================
Job ID: 11
Job name: parallel-generate
Job data keys: [ 'plan', 'sessionId', 'query' ]
====================================================================================================


──────────────────────────────────────────────────────────────────────
⚡ PARALLEL WORKER STARTED
──────────────────────────────────────────────────────────────────────
Session: 7ed4c130-e192-4d68-afb9-d6eb3776a1c7
Query: photosynthesis
Steps to generate: 3
Time: 2025-10-11T18:18:02.065Z
──────────────────────────────────────────────────────────────────────
2025-10-11T18:18:02.065Z [info] [parallel] ⚡ STARTING parallel generation for 3 steps (session: 7ed4c130-e192-4d68-afb9-d6eb3776a1c7)
2025-10-11T18:18:02.066Z [info] [parallel] ⏸️  Staggering 5000ms before step 2 to avoid rate limits
2025-10-11T18:18:02.066Z [debug] [cache] MISS - No cached chunk for step 1
2025-10-11T18:18:02.066Z [info] [parallel] 🚀 Step 1: Using v3 TRUE GENERATION
2025-10-11T18:18:02.066Z [info] [codegenV3WithRetry] Attempt 1/2 for step 1
2025-10-11T18:18:02.066Z [info] [codegenV3] Generating step 1: Imagine a tall tree or a tiny blade of grass. How do they grow so big and strong without eating burgers? They're master chefs, using sunlight as their oven! Point to a vibrant green plant and say, 'This plant isn't eating dirt; it's capturing the sun's energy, like charging a solar panel, to make its own food. That green color? It's the key to this magic!'
2025-10-11T18:18:02.066Z [info] [codegenV3] Topic: "photosynthesis"
2025-10-11T18:18:02.067Z [debug] [codegenV3] Prompt length: 1210 chars
2025-10-11T18:18:07.067Z [info] [parallel] ⏸️  Staggering 5000ms before step 3 to avoid rate limits
2025-10-11T18:18:07.067Z [debug] [cache] MISS - No cached chunk for step 2
2025-10-11T18:18:07.067Z [info] [parallel] 🚀 Step 2: Using v3 TRUE GENERATION
2025-10-11T18:18:07.067Z [info] [codegenV3WithRetry] Attempt 1/2 for step 2
2025-10-11T18:18:07.067Z [info] [codegenV3] Generating step 2: So, what's the recipe? Plants take in **carbon dioxide** (CO2) from the air through tiny pores on their leaves (stomata), and **water** (H2O) from the soil through their roots. Inside their green cells are special mini-factories called **chloroplasts**, containing a pigment called **chlorophyll** (which makes them green). Chlorophyll acts like a tiny solar panel, absorbing the **sunlight** energy. This energy then powers a chemical reaction, converting CO2 and H2O into **glucose** (a type of sugar – the plant's food!) and releasing **oxygen** (O2) back into the air as a byproduct. Think of it: Water + Carbon Dioxide + Sunlight → Glucose + Oxygen.
2025-10-11T18:18:07.067Z [info] [codegenV3] Topic: "photosynthesis"
2025-10-11T18:18:07.067Z [debug] [codegenV3] Prompt length: 1506 chars
2025-10-11T18:18:12.067Z [debug] [cache] MISS - No cached chunk for step 3
2025-10-11T18:18:12.067Z [info] [parallel] 🚀 Step 3: Using v3 TRUE GENERATION
2025-10-11T18:18:12.067Z [info] [codegenV3WithRetry] Attempt 1/2 for step 3
2025-10-11T18:18:12.067Z [info] [codegenV3] Generating step 3: Why should *we* care about a plant's lunch? Because photosynthesis is the foundation of almost all life! Every bite of food you eat, directly or indirectly, comes from this process. The oxygen you breathe, every single breath, was once a byproduct of a plant's hard work. It's also crucial for our planet's climate, removing massive amounts of CO2 from the atmosphere. Understanding photosynthesis helps us develop better crops, fight climate change, and even imagine new ways to harness solar energy, just like plants do every day.
2025-10-11T18:18:12.067Z [info] [codegenV3] Topic: "photosynthesis"
2025-10-11T18:18:12.067Z [debug] [codegenV3] Prompt length: 1384 chars
2025-10-11T18:18:16.105Z [debug] [monitor] Metrics updated:
2025-10-11T18:19:02.007Z [debug] [codegenV3] Received 3467 chars from API
2025-10-11T18:19:02.007Z [info] [codegenV3] ✅ Generated SVG in 54.94s (3467 chars)
2025-10-11T18:19:02.007Z [debug] [codegenV3] Quality: animations=false, labels=13, shapes=18
2025-10-11T18:19:02.007Z [info] [codegenV3WithRetry] ✅ SUCCESS (1 actions)
2025-10-11T18:19:02.007Z [debug] compilerRouter: routing to js
2025-10-11T18:19:02.007Z [debug] [debugger] START: Received chunk for stepId=2
2025-10-11T18:19:02.007Z [debug] [debugger] Chunk type: actions
2025-10-11T18:19:02.007Z [debug] [debugger] Has actions: true
2025-10-11T18:19:02.007Z [debug] [debugger] Actions count: 1
2025-10-11T18:19:02.007Z [debug] [debugger] Chunk is valid with 1 actions, allowing all for rich visualizations
2025-10-11T18:19:02.007Z [debug] [cache] Cached chunk for query step 2
2025-10-11T18:19:02.007Z [debug] [monitor] Step 2 generation for 7ed4c130-e192-4d68-afb9-d6eb3776a1c7 took 54940ms
2025-10-11T18:19:02.007Z [info] [parallel] ✅ Step 2 COMPLETE in 54940ms with 1 actions

══════════════════════════════════════════════════════════════════════
🚀 ABOUT TO EMIT STEP
══════════════════════════════════════════════════════════════════════
SessionId: 7ed4c130-e192-4d68-afb9-d6eb3776a1c7
StepId: 2
Actions: 1
Room sockets: 0
══════════════════════════════════════════════════════════════════════
✅ EMITTED SUCCESSFULLY

2025-10-11T18:19:02.008Z [info] [parallel] 🚀 IMMEDIATELY EMITTED step 2 to frontend (0 sockets)
2025-10-11T18:19:05.993Z [debug] [codegenV3] Received 6093 chars from API
2025-10-11T18:19:05.994Z [info] [codegenV3] ✅ Generated SVG in 63.93s (6093 chars)
2025-10-11T18:19:05.994Z [debug] [codegenV3] Quality: animations=false, labels=17, shapes=27
2025-10-11T18:19:05.994Z [info] [codegenV3WithRetry] ✅ SUCCESS (1 actions)
2025-10-11T18:19:05.994Z [debug] compilerRouter: routing to js
2025-10-11T18:19:05.994Z [debug] [debugger] START: Received chunk for stepId=1
2025-10-11T18:19:05.994Z [debug] [debugger] Chunk type: actions
2025-10-11T18:19:05.994Z [debug] [debugger] Has actions: true
2025-10-11T18:19:05.994Z [debug] [debugger] Actions count: 1
2025-10-11T18:19:05.994Z [debug] [debugger] Chunk is valid with 1 actions, allowing all for rich visualizations
2025-10-11T18:19:05.994Z [debug] [cache] Cached chunk for query step 1
2025-10-11T18:19:05.994Z [debug] [monitor] Step 1 generation for 7ed4c130-e192-4d68-afb9-d6eb3776a1c7 took 63928ms
2025-10-11T18:19:05.994Z [info] [parallel] ✅ Step 1 COMPLETE in 63928ms with 1 actions

══════════════════════════════════════════════════════════════════════
🚀 ABOUT TO EMIT STEP
══════════════════════════════════════════════════════════════════════
SessionId: 7ed4c130-e192-4d68-afb9-d6eb3776a1c7
StepId: 1
Actions: 1
Room sockets: 0
══════════════════════════════════════════════════════════════════════
✅ EMITTED SUCCESSFULLY

2025-10-11T18:19:05.995Z [info] [parallel] 🚀 IMMEDIATELY EMITTED step 1 to frontend (0 sockets)
2025-10-11T18:19:16.109Z [debug] [monitor] Metrics updated:
2025-10-11T18:19:21.332Z [debug] [codegenV3] Received 6169 chars from API
2025-10-11T18:19:21.332Z [info] [codegenV3] ✅ Generated SVG in 69.27s (6169 chars)
2025-10-11T18:19:21.332Z [debug] [codegenV3] Quality: animations=false, labels=27, shapes=10
2025-10-11T18:19:21.332Z [info] [codegenV3WithRetry] ✅ SUCCESS (1 actions)
2025-10-11T18:19:21.332Z [debug] compilerRouter: routing to js
2025-10-11T18:19:21.332Z [debug] [debugger] START: Received chunk for stepId=3
2025-10-11T18:19:21.332Z [debug] [debugger] Chunk type: actions
2025-10-11T18:19:21.332Z [debug] [debugger] Has actions: true
2025-10-11T18:19:21.332Z [debug] [debugger] Actions count: 1
2025-10-11T18:19:21.332Z [debug] [debugger] Chunk is valid with 1 actions, allowing all for rich visualizations
2025-10-11T18:19:21.333Z [debug] [cache] Cached chunk for query step 3
2025-10-11T18:19:21.333Z [debug] [monitor] Step 3 generation for 7ed4c130-e192-4d68-afb9-d6eb3776a1c7 took 69267ms
2025-10-11T18:19:21.333Z [info] [parallel] ✅ Step 3 COMPLETE in 69267ms with 1 actions

══════════════════════════════════════════════════════════════════════
🚀 ABOUT TO EMIT STEP
══════════════════════════════════════════════════════════════════════
SessionId: 7ed4c130-e192-4d68-afb9-d6eb3776a1c7
StepId: 3
Actions: 1
Room sockets: 0
══════════════════════════════════════════════════════════════════════
✅ EMITTED SUCCESSFULLY

2025-10-11T18:19:21.333Z [info] [parallel] 🚀 IMMEDIATELY EMITTED step 3 to frontend (0 sockets)
2025-10-11T18:19:21.333Z [debug] [parallel] Parallel generation complete: 3/3 successful in 79267ms
2025-10-11T18:19:21.333Z [debug] [monitor] Completed request 7ed4c130-e192-4d68-afb9-d6eb3776a1c7 in 91809ms (success: true)
2025-10-11T18:19:21.333Z [debug] [parallel] Job complete for session 7ed4c130-e192-4d68-afb9-d6eb3776a1c7
2025-10-11T18:20:16.116Z [debug] [monitor] Metrics updated:
2025-10-11T18:21:16.121Z [debug] [monitor] Metrics updated:
2025-10-11T18:22:16.125Z [debug] [monitor] Metrics updated:
2025-10-11T18:23:16.127Z [debug] [monitor] Metrics updated:
2025-10-11T18:24:16.128Z [debug] [monitor] Metrics updated:
2025-10-11T18:25:16.132Z [debug] [monitor] Metrics updated:
2025-10-11T18:26:16.135Z [debug] [monitor] Metrics updated:
2025-10-11T18:27:16.136Z [debug] [monitor] Metrics updated:
2025-10-11T18:28:16.141Z [debug] [monitor] Metrics updated:
2025-10-11T18:29:16.143Z [debug] [monitor] Metrics updated:
2025-10-11T18:30:16.145Z [debug] [monitor] Metrics updated:
2025-10-11T18:31:16.160Z [debug] [monitor] Metrics updated:
2025-10-11T18:32:16.174Z [debug] [monitor] Metrics updated:
2025-10-11T18:33:16.186Z [debug] [monitor] Metrics updated:
2025-10-11T18:34:16.196Z [debug] [monitor] Metrics updated:
2025-10-11T18:35:16.205Z [debug] [monitor] Metrics updated:
2025-10-11T18:36:16.212Z [debug] [monitor] Metrics updated:
[INFO] 23:36:40 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3.ts has been modified
2025-10-11T18:36:40.378Z [debug] Shutting down server...
2025-10-11T18:36:40.378Z [debug] Server shut down.

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-11T18:36:40.589Z [debug] NEW Plan worker created
2025-10-11T18:36:40.590Z [debug] NEW Gen worker created
2025-10-11T18:36:40.590Z [debug] NEW Parallel worker created
✅ Orchestrator initialized


══════════════════════════════════════════════════════════════════════
✅ SERVER READY
══════════════════════════════════════════════════════════════════════
🌐 Backend URL: http://localhost:8000
🔗 Health Check: http://localhost:8000/health
📡 WebSocket Ready: ws://localhost:8000
══════════════════════════════════════════════════════════════════════

2025-10-11T18:36:40.596Z [debug] Server listening on port 8000
✅ Redis connected
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
[INFO] 23:37:02 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3.ts has been modified
2025-10-11T18:37:02.046Z [debug] Shutting down server...
2025-10-11T18:37:02.046Z [debug] Server shut down.

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-11T18:37:02.218Z [debug] NEW Plan worker created
2025-10-11T18:37:02.219Z [debug] NEW Gen worker created
2025-10-11T18:37:02.219Z [debug] NEW Parallel worker created
✅ Orchestrator initialized


══════════════════════════════════════════════════════════════════════
✅ SERVER READY
══════════════════════════════════════════════════════════════════════
🌐 Backend URL: http://localhost:8000
🔗 Health Check: http://localhost:8000/health
📡 WebSocket Ready: ws://localhost:8000
══════════════════════════════════════════════════════════════════════

2025-10-11T18:37:02.223Z [debug] Server listening on port 8000
✅ Redis connected
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
[INFO] 00:25:15 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-11T19:25:15.741Z [debug] NEW Plan worker created
2025-10-11T19:25:15.742Z [debug] NEW Gen worker created
2025-10-11T19:25:15.742Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 00:25:15 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-11T19:25:15.754Z [debug] Shutting down server...
2025-10-11T19:25:15.755Z [debug] Server shut down.
[INFO] 00:25:50 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-11T19:25:50.513Z [debug] NEW Plan worker created
2025-10-11T19:25:50.514Z [debug] NEW Gen worker created
2025-10-11T19:25:50.514Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 00:25:50 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-11T19:25:50.525Z [debug] Shutting down server...
2025-10-11T19:25:50.526Z [debug] Server shut down.
[INFO] 00:39:14 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-11T19:39:15.068Z [debug] NEW Plan worker created
2025-10-11T19:39:15.069Z [debug] NEW Gen worker created
2025-10-11T19:39:15.069Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 00:39:15 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-11T19:39:15.080Z [debug] Shutting down server...
2025-10-11T19:39:15.081Z [debug] Server shut down.
[INFO] 00:58:58 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-11T19:58:58.273Z [debug] NEW Plan worker created
2025-10-11T19:58:58.274Z [debug] NEW Gen worker created
2025-10-11T19:58:58.274Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 00:58:58 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-11T19:58:58.286Z [debug] Shutting down server...
2025-10-11T19:58:58.286Z [debug] Server shut down.
[INFO] 00:59:46 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-11T19:59:46.875Z [debug] NEW Plan worker created
2025-10-11T19:59:46.876Z [debug] NEW Gen worker created
2025-10-11T19:59:46.876Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 00:59:46 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-11T19:59:46.887Z [debug] Shutting down server...
2025-10-11T19:59:46.887Z [debug] Server shut down.
[INFO] 01:00:57 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-11T20:00:57.966Z [debug] NEW Plan worker created
2025-10-11T20:00:57.967Z [debug] NEW Gen worker created
2025-10-11T20:00:57.967Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 01:00:57 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-11T20:00:57.979Z [debug] Shutting down server...
2025-10-11T20:00:57.979Z [debug] Server shut down.
[INFO] 10:31:28 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-12T05:31:28.640Z [debug] NEW Plan worker created
2025-10-12T05:31:28.641Z [debug] NEW Gen worker created
2025-10-12T05:31:28.641Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 10:31:28 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-12T05:31:28.652Z [debug] Shutting down server...
2025-10-12T05:31:28.653Z [debug] Server shut down.
[INFO] 10:31:57 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/orchestrator.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-12T05:31:57.492Z [debug] NEW Plan worker created
2025-10-12T05:31:57.493Z [debug] NEW Gen worker created
2025-10-12T05:31:57.493Z [debug] NEW Parallel worker created
✅ Orchestrator initialized


══════════════════════════════════════════════════════════════════════
✅ SERVER READY
══════════════════════════════════════════════════════════════════════
🌐 Backend URL: http://localhost:8000
🔗 Health Check: http://localhost:8000/health
📡 WebSocket Ready: ws://localhost:8000
══════════════════════════════════════════════════════════════════════

2025-10-12T05:31:57.496Z [debug] Server listening on port 8000
✅ Redis connected
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 6.0.16
[INFO] 10:32:16 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3WithRetry.ts has been modified
2025-10-12T05:32:16.816Z [debug] Shutting down server...
2025-10-12T05:32:16.816Z [debug] Server shut down.

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-12T05:32:17.013Z [debug] NEW Plan worker created
2025-10-12T05:32:17.014Z [debug] NEW Gen worker created
2025-10-12T05:32:17.014Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 10:32:17 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-12T05:32:17.026Z [debug] Shutting down server...
2025-10-12T05:32:17.026Z [debug] Server shut down.
[INFO] 10:32:25 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3WithRetry.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-12T05:32:26.049Z [debug] NEW Plan worker created
2025-10-12T05:32:26.050Z [debug] NEW Gen worker created
2025-10-12T05:32:26.050Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 10:32:26 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-12T05:32:26.065Z [debug] Shutting down server...
2025-10-12T05:32:26.066Z [debug] Server shut down.
[INFO] 10:32:35 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3WithRetry.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-12T05:32:35.907Z [debug] NEW Plan worker created
2025-10-12T05:32:35.908Z [debug] NEW Gen worker created
2025-10-12T05:32:35.908Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 10:32:35 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-12T05:32:35.919Z [debug] Shutting down server...
2025-10-12T05:32:35.919Z [debug] Server shut down.
[INFO] 10:58:37 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/codegenV3.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-12T05:58:37.408Z [debug] NEW Plan worker created
2025-10-12T05:58:37.408Z [debug] NEW Gen worker created
2025-10-12T05:58:37.408Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 10:58:37 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-12T05:58:37.420Z [debug] Shutting down server...
2025-10-12T05:58:37.420Z [debug] Server shut down.
[INFO] 11:00:47 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/visual.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-12T06:00:47.912Z [debug] NEW Plan worker created
2025-10-12T06:00:47.912Z [debug] NEW Gen worker created
2025-10-12T06:00:47.912Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 11:00:47 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-12T06:00:47.924Z [debug] Shutting down server...
2025-10-12T06:00:47.924Z [debug] Server shut down.
[INFO] 11:12:18 Restarting: /home/komail/LEAF/Learn-X/app/backend/src/agents/planner.ts has been modified

══════════════════════════════════════════════════════════════════════
🚀 LEARN-X BACKEND STARTING
══════════════════════════════════════════════════════════════════════
📍 Configuration:
   PORT: 8000
   FRONTEND_URLS: http://localhost:5173, http://localhost:5174
   REDIS_URL: redis://localhost:6379
   GEMINI_API_KEY: ✅ SET
   USE_VISUAL_VERSION: v3
   LOG_LEVEL: debug
══════════════════════════════════════════════════════════════════════

🔌 Connecting to Redis...
🎭 Initializing orchestrator...
🧹 Clearing stale job queues on startup...
2025-10-12T06:12:18.301Z [debug] NEW Plan worker created
2025-10-12T06:12:18.302Z [debug] NEW Gen worker created
2025-10-12T06:12:18.302Z [debug] NEW Parallel worker created
✅ Orchestrator initialized

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at Server.listen (node:net:1953:7)
    at main (/home/komail/LEAF/Learn-X/app/backend/src/index.ts:294:10)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
[ERROR] 11:12:18 Error: listen EADDRINUSE: address already in use :::8000
✅ Redis connected
2025-10-12T06:12:18.313Z [debug] Shutting down server...
2025-10-12T06:12:18.314Z [debug] Server shut down.
